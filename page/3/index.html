<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-5J42R3VH2D"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-5J42R3VH2D');
</script>

  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 3.7.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"taccisum.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="el psy congroo.">
<meta property="og:type" content="website">
<meta property="og:title" content="Taccisum&#39;s blog üòâ">
<meta property="og:url" content="https://taccisum.github.io/page/3/index.html">
<meta property="og:site_name" content="Taccisum&#39;s blog üòâ">
<meta property="og:description" content="el psy congroo.">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Taccisum&#39;s blog üòâ">
<meta name="twitter:description" content="el psy congroo.">

<link rel="canonical" href="https://taccisum.github.io/page/3/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>Taccisum's blog üòâ</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="stylesheet" href="/css/prism-ghcolors.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Taccisum's blog üòâ</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://taccisum.github.io/zuul_hystrix_default_timeout_config_invalid_reason_research.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="taccisum">
      <meta itemprop="description" content="el psy congroo.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Taccisum's blog üòâ">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/zuul_hystrix_default_timeout_config_invalid_reason_research.html" class="post-title-link" itemprop="url">zuul‰∏≠hystrixÈªòËÆ§timeoutÈÖçÁΩÆÂ§±ÊïàÁöÑÂéüÂõ†</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-08-30 15:29:35" itemprop="dateCreated datePublished" datetime="2018-08-30T15:29:35+08:00">2018-08-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-03-13 18:05:01" itemprop="dateModified" datetime="2020-03-13T18:05:01+08:00">2020-03-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index"><span itemprop="name">java</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/Ë∏©ÂùëÊó•ËÆ∞/" itemprop="url" rel="index"><span itemprop="name">Ë∏©ÂùëÊó•ËÆ∞</span></a>
                </span>
            </span>

          
            <span id="/zuul_hystrix_default_timeout_config_invalid_reason_research.html" class="post-meta-item leancloud_visitors" data-flag-title="zuul‰∏≠hystrixÈªòËÆ§timeoutÈÖçÁΩÆÂ§±ÊïàÁöÑÂéüÂõ†" title="Views">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/zuul_hystrix_default_timeout_config_invalid_reason_research.html#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/zuul_hystrix_default_timeout_config_invalid_reason_research.html" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="ÊâÄÂ§ÑÁéØÂ¢É"><a href="#ÊâÄÂ§ÑÁéØÂ¢É" class="headerlink" title="ÊâÄÂ§ÑÁéØÂ¢É"></a>ÊâÄÂ§ÑÁéØÂ¢É</h1><ul>
<li><code>spring boot</code>: 1.5.9.RELEASE</li>
<li><code>spring cloud</code>: Edgware.RELEASE</li>
</ul>
<h1 id="ÈóÆÈ¢òÊèèËø∞"><a href="#ÈóÆÈ¢òÊèèËø∞" class="headerlink" title="ÈóÆÈ¢òÊèèËø∞"></a>ÈóÆÈ¢òÊèèËø∞</h1><p>Ê†πÊçÆnetflix hystrixÂÆòÊñπÁöÑÊèèËø∞ÔºåÂèØ‰ª•ÈÄöËøá<a href="https://github.com/Netflix/Hystrix/wiki/Configuration#execution.isolation.thread.timeoutInMilliseconds" target="_blank" rel="noopener"><code>hystrix.command.default.execution.isolation.thread.timeoutInMilliseconds</code></a>Ëøô‰∏™ÂÖ®Â±ÄÈÖçÁΩÆ‰∏∫ÊâÄÊúâÊúçÂä°ÈÖçÁΩÆÈªòËÆ§Ë∂ÖÊó∂Êó∂Èó¥„ÄÇÁÑ∂ËÄåÂú®ÂÆûË∑µ‰∏≠Âç¥ÂèëÁé∞ËØ•ÈÖçÁΩÆÂπ∂Ê≤°ÊúâÁîüÊïàÔºà‰∏ÄÁõ¥ÊòØ2000msÔºâÔºå‰ΩÜÈíàÂØπÂêÑÊúçÂä°ËøõË°åÂçïÁã¨ÈÖçÁΩÆÂç¥ÊòØÂèØ‰ª•ÁîüÊïàÁöÑ„ÄÇ</p>
<h1 id="ÈóÆÈ¢òÂÆö‰Ωç"><a href="#ÈóÆÈ¢òÂÆö‰Ωç" class="headerlink" title="ÈóÆÈ¢òÂÆö‰Ωç"></a>ÈóÆÈ¢òÂÆö‰Ωç</h1><p>ÁªègoogleÂèëÁé∞ÔºåhystrixÁöÑtimeoutÊú∫Âà∂ÊòØÈÄöËøá<code>HystrixTimer</code>Êù•Â§ÑÁêÜÁöÑ„ÄÇ</p>
<p>HystrixTimerÊòØ‰∏Ä‰∏™Âçï‰æãÔºåÂºÄÂèë‰∫∫ÂëòÂèØ‰ª•Âú®ÊâßË°å<code>HystrixCommand</code>ÂâçÈÄöËøáË∞ÉÁî®HystrixTimer.getInstance().addTimerListener()ÊñπÊ≥ïÊù•Ê∑ªÂä†‰∏Ä‰∏™ÂÆöÊó∂ÁöÑlistenerÔºåÁÑ∂ÂêéÂú®command on completedÁöÑÊó∂ÂÄôÁßªÈô§ÂÆÉ„ÄÇÁõ∏ÂÖ≥ÁöÑ‰ª£Á†ÅÂ∑≤ÁªèÁî±netflixÂÆûÁé∞‰∫ÜÔºåÂèØ‰ª•Êü•ÁúãÊ∫êÁ†Å<a href="https://github.com/Netflix/Hystrix/blob/master/hystrix-core/src/main/java/com/netflix/hystrix/AbstractCommand.java#L1137" target="_blank" rel="noopener"><code>AbstractCommand.java</code></a></p>
<pre class="line-numbers language-java"><code class="language-java">TimerListener listener <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TimerListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getIntervalTimeInMilliseconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> originalCommand<span class="token punctuation">.</span>properties<span class="token punctuation">.</span><span class="token function">executionTimeoutInMilliseconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">final</span> Reference<span class="token operator">&lt;</span>TimerListener<span class="token operator">></span> tl <span class="token operator">=</span> HystrixTimer<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addTimerListener</span><span class="token punctuation">(</span>listener<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// set externally so execute/queue can see this</span>
originalCommand<span class="token punctuation">.</span>timeoutTimer<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>tl<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">/**
* If this subscriber receives values it means the parent succeeded/completed
*/</span>
Subscriber<span class="token operator">&lt;</span>R<span class="token operator">></span> parent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Subscriber</span><span class="token operator">&lt;</span>R<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onCompleted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isNotTimedOut</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment" spellcheck="true">// stop timer and pass notification through</span>
            tl<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            child<span class="token punctuation">.</span><span class="token function">onCompleted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onError</span><span class="token punctuation">(</span>Throwable e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isNotTimedOut</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment" spellcheck="true">// stop timer and pass notification through</span>
            tl<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            child<span class="token punctuation">.</span><span class="token function">onError</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>‰ªé‰ª•‰∏ä‰ª£Á†ÅÂèØ‰ª•ÂæàÂÆπÊòìËøΩÊ∫ØÂà∞hystrixË∂ÖÊó∂Êó∂Èó¥ÊòØ‰ªéoriginalCommand.properties(<code>HystrixCommandProperties</code>)Ëøô‰∏™ÂØπË±°‰∏≠Ëé∑ÂèñÁöÑÔºåËÄåÂú®spring cloudÊèê‰æõÁöÑ<code>AbstractRibbonCommand</code>‰∏≠Â≠òÂú®‰ª•‰∏ã‰ª£Á†Å</p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">final</span> HystrixCommandProperties<span class="token punctuation">.</span>Setter setter <span class="token operator">=</span> HystrixCommandProperties<span class="token punctuation">.</span><span class="token function">Setter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">withExecutionIsolationStrategy</span><span class="token punctuation">(</span>zuulProperties<span class="token punctuation">.</span><span class="token function">getRibbonIsolationStrategy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withExecutionTimeoutInMilliseconds</span><span class="token punctuation">(</span>
                RibbonClientConfiguration<span class="token punctuation">.</span>DEFAULT_CONNECT_TIMEOUT <span class="token operator">+</span> RibbonClientConfiguration<span class="token punctuation">.</span>DEFAULT_READ_TIMEOUT<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p><strong>ÂØºËá¥originalCommand.propertiesÂú®ÊûÑÂª∫Êó∂ÂèØ‰ª•Ëé∑ÂèñÂà∞‰∏Ä‰∏™executionTimeoutInMillisecondsÁöÑÂÆû‰æãÁ∫ßÈªòËÆ§ÂÄºÔºå‰ªéËÄåË¶ÜÁõñÊéâ‰∫ÜÂÖ®Â±ÄÁöÑexecutionTimeoutInMillisecondsÈÖçÁΩÆÔºå‰ΩÜÂÆû‰æãÁ∫ßÁöÑÈÖçÁΩÆÂπ∂‰∏çÂèóÂΩ±ÂìçÔºåÂõ†‰∏∫hystrix property‰ºòÂÖàÁ∫ß‰∏∫Ôºö</strong>  </p>
<ol>
<li>Global default from code</li>
<li>Dynamic global default property</li>
<li>Instance default from code</li>
<li>Dynamic instance property</li>
</ol>
<h1 id="Ëß£ÂÜ≥ÊñπÊ°à"><a href="#Ëß£ÂÜ≥ÊñπÊ°à" class="headerlink" title="Ëß£ÂÜ≥ÊñπÊ°à"></a>Ëß£ÂÜ≥ÊñπÊ°à</h1><ol>
<li><p>ÊîπÂÜôHttpClientRibbonCommandÁöÑÂÆûÁé∞<br>//todo:: ÂæÖË°•ÂÖÖ</p>
</li>
<li><p>ÂçáÁ∫ßspring cloudÁâàÊú¨Âà∞Edgware.SR1‰ª•‰∏ä<br>Spring cloudÂú®<code>Edgware.SR1</code>ÁâàÊú¨‰∏≠Â∑≤ÁªèËß£ÂÜ≥‰∫ÜÊ≠§ÈóÆÈ¢ò(<a href="https://github.com/spring-cloud/spring-cloud-netflix/pull/2633" target="_blank" rel="noopener">issue2633</a>)ÔºåÂ¶ÇÊûúÊúâÊù°‰ª∂ÂèØ‰ª•Áõ¥Êé•ÈÄöËøáÂçáÁ∫ßÁâàÊú¨Êù•Ëß£ÂÜ≥Ê≠§ÈóÆÈ¢ò„ÄÇ</p>
</li>
</ol>
<h1 id="ÂèÇËÄÉÈìæÊé•"><a href="#ÂèÇËÄÉÈìæÊé•" class="headerlink" title="ÂèÇËÄÉÈìæÊé•"></a>ÂèÇËÄÉÈìæÊé•</h1><ul>
<li><a href="https://github.com/Netflix/Hystrix/wiki/Configuration" target="_blank" rel="noopener">Hystrix Configurations</a></li>
<li><a href="https://segmentfault.com/a/1190000015393836" target="_blank" rel="noopener">ËÅäËÅähystrixÁöÑtimeoutÂ§ÑÁêÜ - segmentfault</a></li>
<li><a href="https://segmentfault.com/a/1190000012439580" target="_blank" rel="noopener">HystrixÂ∑•‰ΩúÂéüÁêÜ</a></li>
<li><a href="https://www.jianshu.com/p/6e2f11821c77" target="_blank" rel="noopener">ribbonËÆæÁΩÆurlÁ∫ßÂà´ÁöÑË∂ÖÊó∂Êó∂Èó¥</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://taccisum.github.io/openfeign_research_and_application.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="taccisum">
      <meta itemprop="description" content="el psy congroo.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Taccisum's blog üòâ">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/openfeign_research_and_application.html" class="post-title-link" itemprop="url">Â£∞ÊòéÂºèhttpÂÆ¢Êà∑Á´ØopenfeignÁöÑÁ†îÁ©∂‰∏éÂ∫îÁî®</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-06-21 05:54:42" itemprop="dateCreated datePublished" datetime="2018-06-21T05:54:42+08:00">2018-06-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-03-13 18:05:01" itemprop="dateModified" datetime="2020-03-13T18:05:01+08:00">2020-03-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index"><span itemprop="name">java</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/spring-cloud/" itemprop="url" rel="index"><span itemprop="name">spring cloud</span></a>
                </span>
            </span>

          
            <span id="/openfeign_research_and_application.html" class="post-meta-item leancloud_visitors" data-flag-title="Â£∞ÊòéÂºèhttpÂÆ¢Êà∑Á´ØopenfeignÁöÑÁ†îÁ©∂‰∏éÂ∫îÁî®" title="Views">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/openfeign_research_and_application.html#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/openfeign_research_and_application.html" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="ÁÆÄ‰ªã"><a href="#ÁÆÄ‰ªã" class="headerlink" title="ÁÆÄ‰ªã"></a>ÁÆÄ‰ªã</h1><h2 id="openfeign"><a href="#openfeign" class="headerlink" title="openfeign"></a>openfeign</h2><p>openfeignÔºåÁÆÄÁß∞feignÔºåÊòØnetflixÂºÄÊ∫êÁöÑÊäÄÊúØÊ†à‰πã‰∏Ä„ÄÇ<br>feignÁöÑ‰∏ªÊó®ÊòØ‰ΩøÂæóÁºñÂÜôjava httpÂÆ¢Êà∑Á´ØÊõ¥ÂÆπÊòì„ÄÇ‰∏∫‰∫ÜË¥ØÂΩªËøô‰∏™ÁêÜÂøµÔºåfeignÈááÁî®‰∫ÜÈÄöËøáÂ§ÑÁêÜÊ≥®Ëß£Êù•Ëá™Âä®ÁîüÊàêËØ∑Ê±ÇÁöÑÊñπÂºèÔºàÂÆòÊñπÁß∞Âëº‰∏∫<code>Â£∞ÊòéÂºè</code>„ÄÅ<code>Ê®°ÊùøÂåñ</code>Ôºâ„ÄÇÂõ†Ê≠§ÔºåÂü∫‰∫éfeignÁºñÂÜôÁöÑhttpÂÆ¢Êà∑Á´ØÁîªÈ£éÁúãËµ∑Êù•ÊòØËøôÊ†∑ÁöÑ</p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">interface</span> <span class="token class-name">Bank</span> <span class="token punctuation">{</span>
  <span class="token annotation punctuation">@RequestLine</span><span class="token punctuation">(</span><span class="token string">"POST /account/{id}"</span><span class="token punctuation">)</span>
  Account <span class="token function">getAccountInfo</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span> String id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>ÁÑ∂ÂêéÈÄöËøá‰∏ÄÁ≥ªÂàóÊìç‰ΩúÂèØ‰ª•‰∏∫BankÊé•Âè£Âú®ËøêË°åÊó∂Ëá™Âä®ÁîüÊàêÂØπÂ∫îÁöÑÂÆûÁé∞„ÄÇÈÄöËøáËøô‰∏™ÂÆûÁé∞Êàë‰ª¨Â∞±ÂèØ‰ª•Âú®java‰∏≠ÂÉèË∞ÉÁî®‰∏Ä‰∏™Êú¨Âú∞ÊñπÊ≥ï‰∏ÄÊ†∑ÂÆåÊàê‰∏ÄÊ¨°httpËØ∑Ê±ÇÔºåÂ§ßÂ§ßÂáèÂ∞ë‰∫ÜÁºñÁ†ÅÊàêÊú¨ÔºåÂêåÊó∂ÊèêÈ´ò‰∫Ü‰ª£Á†ÅÂèØËØªÊÄß„ÄÇ</p>
<h2 id="spring-cloud-openfeign"><a href="#spring-cloud-openfeign" class="headerlink" title="spring-cloud-openfeign"></a>spring-cloud-openfeign</h2><p>spring-cloud-feignÂü∫‰∫éËá™Âä®ÈÖçÁΩÆÂäüËÉΩÔºàautoconfigurationÔºâÔºå‰∏∫spring bootÂ∫îÁî®Êèê‰æõopenfiegnÁöÑÈõÜÊàêÔºö</p>
<ul>
<li>ÊîØÊåÅÈÄöËøá<code>JAX-RS</code>Êàñ<code>Spring MVC annotations</code>Êù•ÊûÑÂª∫feign client</li>
<li>Ëá™Âä®‰ΩøÁî®Spring MVCÁöÑ<code>HttpMessageConverters</code>Êù•ÂÆåÊàêÂ∫èÂàóÂåñÂèçÂ∫èÂàóÂåñ</li>
<li>ÈõÜÊàê‰∫Ü<code>ribbon</code>Âíå<code>hystrix</code>ÔºåÂè™Ë¶ÅÂú®È°πÁõÆ‰∏≠ÂºïÂÖ•Áõ∏ÂÖ≥ÁöÑ‰æùËµñÂç≥ÂèØÁ´ãÂç≥‰ΩøÁî®</li>
<li>Êó†ÈúÄ‰ªª‰ΩïÈÖçÁΩÆÔºåÂºÄÁÆ±Âç≥Áî®ÔºåÁßâÊâø‰∫Üspring-boot‰∏ÄË¥ØÁöÑ‰ΩúÈ£é„ÄÇ</li>
</ul>
<blockquote>
<p><a href="https://github.com/spring-cloud/spring-cloud-openfeign/blob/master/docs/src/main/asciidoc/spring-cloud-openfeign.adoc" target="_blank" rel="noopener">ÂÆòÊñπÊñáÊ°£ÂèÇËÄÉ</a></p>
</blockquote>
<h1 id="Â∏∏ËßÅÈóÆÈ¢òÂèäËß£ÂÜ≥ÊñπÊ°à"><a href="#Â∏∏ËßÅÈóÆÈ¢òÂèäËß£ÂÜ≥ÊñπÊ°à" class="headerlink" title="Â∏∏ËßÅÈóÆÈ¢òÂèäËß£ÂÜ≥ÊñπÊ°à"></a>Â∏∏ËßÅÈóÆÈ¢òÂèäËß£ÂÜ≥ÊñπÊ°à</h1><h2 id="Â§ÑÁêÜÂìçÂ∫îÊï∞ÊçÆÁöÑÈÄöÁî®ÈÉ®ÂàÜ"><a href="#Â§ÑÁêÜÂìçÂ∫îÊï∞ÊçÆÁöÑÈÄöÁî®ÈÉ®ÂàÜ" class="headerlink" title="Â§ÑÁêÜÂìçÂ∫îÊï∞ÊçÆÁöÑÈÄöÁî®ÈÉ®ÂàÜ"></a>Â§ÑÁêÜÂìçÂ∫îÊï∞ÊçÆÁöÑÈÄöÁî®ÈÉ®ÂàÜ</h2><p>apiÂìçÂ∫îÊï∞ÊçÆÊ†ºÂºèÔºå‰∏ÄËà¨ËÄåË®ÄÈô§ÂÆûÈôÖÁöÑ‰∏öÂä°Êï∞ÊçÆÂ§ñÊòØÂõ∫ÂÆöÁöÑÊ†ºÂºèÔºåÂÖ∂‰∏≠ÂåÖÊã¨‰∫ÜÂØπÊ≠§Ê¨°ËØ∑Ê±ÇÁöÑÂ§ÑÁêÜ‰ø°ÊÅØÊèèËø∞„ÄÇÂØπ‰∫éËøôÈÉ®ÂàÜÊï∞ÊçÆÔºåÂ∫îÁî±feignËøõË°åÁªü‰∏ÄÂ§ÑÁêÜ„ÄÇ</p>
<h3 id="Ëß£ÂÜ≥ÊñπÊ°à"><a href="#Ëß£ÂÜ≥ÊñπÊ°à" class="headerlink" title="Ëß£ÂÜ≥ÊñπÊ°à"></a>Ëß£ÂÜ≥ÊñπÊ°à</h3><p>feignclientÊòØÈÄöËøáDecoderÊù•ÂØπËØ∑Ê±ÇÂìçÂ∫îËøõË°åÂ§ÑÁêÜÁöÑÔºåÂõ†Ê≠§ÂèØ‰ª•‰ΩøÁî®Ëá™ÂÆö‰πâÁöÑDecoderÊù•Â§ÑÁêÜÂìçÂ∫îÊï∞ÊçÆÁöÑÈÄöÁî®ÈÉ®ÂàÜ„ÄÇ</p>
<p>‰æãÂ¶ÇÂèØ‰ª•ÂÆö‰πâ‰∏Ä‰∏™<code>UnwrapRestfulApiResponseSpringDecoder</code>Êù•ÂØπ<code>RestfulApiResponse</code>ËøõË°åËá™Âä®ÊãÜÂåÖÊìç‰ΩúÔºåÂπ∂ÈÄöËøá<code>@FeignClient</code>ÁöÑ<code>configuration</code>Â±ûÊÄßÈÖçÁΩÆÂÖ∂‰ΩøÁî®ÁöÑDecoder„ÄÇ</p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token annotation punctuation">@FeignClient</span><span class="token punctuation">(</span>name <span class="token operator">=</span> AuthCenter<span class="token punctuation">.</span>SERVICE_NAME<span class="token punctuation">,</span> path <span class="token operator">=</span> RMIPath<span class="token punctuation">.</span>USER<span class="token punctuation">,</span> configuration <span class="token operator">=</span> TenantUserClient<span class="token punctuation">.</span>Configuration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">TenantUserClient</span> <span class="token punctuation">{</span>
    <span class="token keyword">class</span> <span class="token class-name">Configuration</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Autowired</span>
        <span class="token keyword">private</span> ObjectFactory<span class="token operator">&lt;</span>HttpMessageConverters<span class="token operator">></span> messageConverters<span class="token punctuation">;</span>

        <span class="token annotation punctuation">@Bean</span>
        <span class="token keyword">public</span> Decoder <span class="token function">feignDecoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ResponseEntityDecoder</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">UnwrapRestfulApiResponseSpringDecoder</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>messageConverters<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="Êú¨Âú∞Ë∞ÉÁî®ÈúÄË¶ÅÊ≥®ÂÜåÂà∞Ê≥®ÂÜå‰∏≠ÂøÉÂØºËá¥ÊúçÂä°‰∏çÂèØÁî®ÁöÑÈóÆÈ¢ò"><a href="#Êú¨Âú∞Ë∞ÉÁî®ÈúÄË¶ÅÊ≥®ÂÜåÂà∞Ê≥®ÂÜå‰∏≠ÂøÉÂØºËá¥ÊúçÂä°‰∏çÂèØÁî®ÁöÑÈóÆÈ¢ò" class="headerlink" title="Êú¨Âú∞Ë∞ÉÁî®ÈúÄË¶ÅÊ≥®ÂÜåÂà∞Ê≥®ÂÜå‰∏≠ÂøÉÂØºËá¥ÊúçÂä°‰∏çÂèØÁî®ÁöÑÈóÆÈ¢ò"></a>Êú¨Âú∞Ë∞ÉÁî®ÈúÄË¶ÅÊ≥®ÂÜåÂà∞Ê≥®ÂÜå‰∏≠ÂøÉÂØºËá¥ÊúçÂä°‰∏çÂèØÁî®ÁöÑÈóÆÈ¢ò</h2><p>Âú®ÂÆûÈôÖÂºÄÂèëËøáÁ®ã‰∏≠ÔºåÊúâÊó∂‰ºöÂá∫Áé∞ÈúÄË¶ÅÂú®Êú¨Âú∞Ë∞ÉÁî®ËøúÁ®ãÊúçÂä°Êù•ËøõË°åË∞ÉËØïÁöÑÊÉÖÂÜµÔºåÊ≠§Êó∂Êàë‰ª¨ÈúÄË¶ÅÂ∞ÜÊú¨Âú∞ÁöÑÂ∫îÁî®Ê≥®ÂÜåÂà∞Ê≥®ÂÜå‰∏≠ÂøÉ„ÄÇËÄå‰∏ÄÊó¶ËøôÊ†∑ÂÅöÔºå‰ºöÂØºËá¥ËØ•ÊúçÂä°Â≠òÂú®Â§ö‰∏™ËäÇÁÇπÔºà‰∏Ä‰∏™ËøúÁ®ã‰∏Ä‰∏™Êú¨Âú∞ÔºâÔºå‰ªéËÄåÂØºËá¥‰æùËµñËØ•ÊúçÂä°ÁöÑÂ∫îÁî®ËΩØË¥üËΩΩÂùáË°°Ë¥üËΩΩÂà∞Êú¨Âú∞ËäÇÁÇπÊó∂‰ºöÂ§±Ë¥•„ÄÇ</p>
<h3 id="Ëß£ÂÜ≥ÊñπÊ°à-1"><a href="#Ëß£ÂÜ≥ÊñπÊ°à-1" class="headerlink" title="Ëß£ÂÜ≥ÊñπÊ°à"></a>Ëß£ÂÜ≥ÊñπÊ°à</h3><h4 id="1-‰∏çÈÄöËøáÊ≥®ÂÜå‰∏≠ÂøÉËé∑Âèñ‰ø°ÊÅØÔºå‰ΩøÁî®Áõ¥Êé•ÊåáÂÆöurlÁöÑÊñπÂºèË∞ÉÁî®Ôºà‚úò‰∏çÊé®ËçêÔºâ"><a href="#1-‰∏çÈÄöËøáÊ≥®ÂÜå‰∏≠ÂøÉËé∑Âèñ‰ø°ÊÅØÔºå‰ΩøÁî®Áõ¥Êé•ÊåáÂÆöurlÁöÑÊñπÂºèË∞ÉÁî®Ôºà‚úò‰∏çÊé®ËçêÔºâ" class="headerlink" title="1. ‰∏çÈÄöËøáÊ≥®ÂÜå‰∏≠ÂøÉËé∑Âèñ‰ø°ÊÅØÔºå‰ΩøÁî®Áõ¥Êé•ÊåáÂÆöurlÁöÑÊñπÂºèË∞ÉÁî®Ôºà‚úò‰∏çÊé®ËçêÔºâ"></a>1. ‰∏çÈÄöËøáÊ≥®ÂÜå‰∏≠ÂøÉËé∑Âèñ‰ø°ÊÅØÔºå‰ΩøÁî®Áõ¥Êé•ÊåáÂÆöurlÁöÑÊñπÂºèË∞ÉÁî®Ôºà‚úò‰∏çÊé®ËçêÔºâ</h4><p><strong>ÂèÇËÄÉ‰ª£Á†Å</strong></p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token annotation punctuation">@FeignClient</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"sysinfo-service"</span> <span class="token punctuation">,</span>url <span class="token operator">=</span> <span class="token string">"http://49.4.7.72"</span><span class="token punctuation">,</span> path <span class="token operator">=</span> <span class="token string">"/"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">SysinfoClient</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>Ê≠§ÊñπÊ°à‰ºòÁÇπÊòØÁÆÄÂçïÊòìÁî®Ôºå‰ΩÜÁº∫ÁÇπ‰πüÂæàÊòéÊòæÔºö</p>
<ol>
<li>Âú®Â∫îÁî®ÂÆûÈôÖ‰∏äÁ∫øÊó∂ÈúÄË¶ÅÂ∞ÜË∞ÉÁî®ÊñπÂºè‰øÆÊîπ‰∏∫ÈÄöËøáÊ≥®ÂÜå‰∏≠ÂøÉË∞ÉÁî®ÔºåÂê¶ÂàôclientÂ∞ÜÊó†Ê≥ïËøõË°åË¥üËΩΩÂùáË°°ÔºåÂõ†Ê≠§ÈúÄË¶ÅÈ¢ëÁπÅÊîπÂä®‰ª£Á†Å</li>
<li>Âú®ÁâπÂÆöÁéØÂ¢É‰∏ãÔºåÂç≥‰ΩøÂøòËÆ∞ÂàáÊç¢Ë∞ÉÁî®ÊñπÂºèÊúâÊó∂‰πü‰∏çÂΩ±ÂìçclientÁöÑ‰ΩøÁî®Ôºå‰ºöÂ∞ÜÈóÆÈ¢òÈöêËóèÔºåÂüã‰∏ãÈöêÊÇ£</li>
<li>Âπ∂Ê≤°Êúâ‰∏éÂÖ∂ÂÆÉÊúçÂä°ÁúüÊ≠£Âú∞Ëß£ËÄ¶Ôºå‰∏ÄÊó¶‰æùËµñÁöÑÊúçÂä°ÊïÖÈöúÂ∞±‰ºöÂØºËá¥Êú¨Âú∞ÂºÄÂèëÊó†Ê≥ïËøõË°å</li>
</ol>
<p>Áî±‰∫éÂ≠òÂú®‰∏äËø∞Áº∫ÁÇπÔºåÁé∞‰∏ÄËà¨<strong>‰∏çÊé®Ëçê</strong>‰ΩøÁî®ËØ•ÊñπÊ°à„ÄÇ</p>
<h4 id="2-‰ΩøÁî®ÊâìÊ°©ÁöÑÊñπÂºè‰∏éËøúÁ®ãÊúçÂä°Ëß£ËÄ¶Ôºà‚úîÊé®ËçêÔºâ"><a href="#2-‰ΩøÁî®ÊâìÊ°©ÁöÑÊñπÂºè‰∏éËøúÁ®ãÊúçÂä°Ëß£ËÄ¶Ôºà‚úîÊé®ËçêÔºâ" class="headerlink" title="2. ‰ΩøÁî®ÊâìÊ°©ÁöÑÊñπÂºè‰∏éËøúÁ®ãÊúçÂä°Ëß£ËÄ¶Ôºà‚úîÊé®ËçêÔºâ"></a>2. ‰ΩøÁî®ÊâìÊ°©ÁöÑÊñπÂºè‰∏éËøúÁ®ãÊúçÂä°Ëß£ËÄ¶Ôºà‚úîÊé®ËçêÔºâ</h4><p>Â§ßËá¥ÊÄùË∑Ø‰∏∫ÔºåÈÄöËøáSpringÁöÑ<code>@Profile</code>Ê≥®Ëß£ÔºåÂú®‰∏çÂêåÁöÑÁéØÂ¢É‰∏∫Â∫îÁî®Ê≥®ÂÜå‰∏çÂêåÁöÑclient beanÔºà‰æãÂ¶ÇÂú®Êú¨Âú∞ÁéØÂ¢É‰ΩøÁî®Hard Code beanÔºåËÄåÂú®ÈùûÊú¨Âú∞ÁéØÂ¢ÉÂàô‰ΩøÁî®ËøúÁ®ãË∞ÉÁî®ÁöÑclient beanÔºâ„ÄÇ</p>
<p><strong>ÂèÇËÄÉ‰ª£Á†Å</strong><br><strong>ClientConfiguration.java</strong></p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token annotation punctuation">@EnableAuthClient</span>
<span class="token annotation punctuation">@EnableFeignClients</span><span class="token punctuation">(</span>basePackages <span class="token operator">=</span> <span class="token string">"com.cheegu.icm.biz.foo.client"</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@Profile</span><span class="token punctuation">(</span><span class="token punctuation">{</span>SpringProfiles<span class="token punctuation">.</span>DEV<span class="token punctuation">,</span> SpringProfiles<span class="token punctuation">.</span>TEST<span class="token punctuation">,</span> SpringProfiles<span class="token punctuation">.</span>PROD<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ClientConfiguration</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>MockClientConfiguration.java</strong></p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@Profile</span><span class="token punctuation">(</span>SpringProfiles<span class="token punctuation">.</span>LOCAL<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MockClientConfiguration</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> SysinfoClient <span class="token function">sysinfoClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">SysinfoClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> UserInfoDto <span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">UserInfoDto</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> TableData<span class="token operator">&lt;</span>UserRowDto<span class="token operator">></span> <span class="token function">users</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> TableData<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> TenantUserClient <span class="token function">tenantUserClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">TenantUserClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> List<span class="token operator">&lt;</span>ResourceInfoDto<span class="token operator">></span> <span class="token function">listMyAlResource</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="Â¶Ç‰ΩïÂú®Ë∞ÉÁî®Êó∂Â∏¶‰∏äËØ∑Ê±ÇÂ§¥"><a href="#Â¶Ç‰ΩïÂú®Ë∞ÉÁî®Êó∂Â∏¶‰∏äËØ∑Ê±ÇÂ§¥" class="headerlink" title="Â¶Ç‰ΩïÂú®Ë∞ÉÁî®Êó∂Â∏¶‰∏äËØ∑Ê±ÇÂ§¥"></a>Â¶Ç‰ΩïÂú®Ë∞ÉÁî®Êó∂Â∏¶‰∏äËØ∑Ê±ÇÂ§¥</h2><p>Âú®‰ΩøÁî®ÂÆ¢Êà∑Á´ØËøõË°åË∞ÉÁî®Êó∂ÔºåÊúâÊó∂‰ºöÈúÄË¶ÅÂ∏¶‰∏äÊüê‰∫õËØ∑Ê±ÇÂ§¥Ôºà‰æãÂ¶ÇËÆ§ËØÅtokenÔºâÔºå‰ΩÜÂèà‰∏çÂ∏åÊúõÂú®‰ª£Á†Å‰∏≠ÊâãÂä®ÂéªÂÅöËøô‰∫õÊìç‰Ωú„ÄÇ</p>
<h3 id="Ëß£ÂÜ≥ÊñπÊ°à-2"><a href="#Ëß£ÂÜ≥ÊñπÊ°à-2" class="headerlink" title="Ëß£ÂÜ≥ÊñπÊ°à"></a>Ëß£ÂÜ≥ÊñπÊ°à</h3><p>ÂèØ‰ª•ÈÄöËøáÂÆûÁé∞feignÊèê‰æõÁöÑ<code>RequestInterceptor</code>Êé•Âè£Êù•ÂØπËØ∑Ê±ÇËøõË°åÂàáÈù¢Â§ÑÁêÜ„ÄÇËøôÊ†∑ÊØèÊ¨°ÈÄöËøáclientÂèëËµ∑ËØ∑Ê±ÇÊó∂ÈÉΩ‰ºöÁî±feign interceptorËøõË°åÊã¶Êà™Ôºå‰∏∫ËØ∑Ê±ÇÊ∑ªÂä†headers„ÄÇ</p>
<p><strong>ÂèÇËÄÉ‰ª£Á†Å</strong></p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AppConfiguration</span> <span class="token keyword">implements</span> <span class="token class-name">EnvironmentAware</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> Environment environment<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> AuthorizationInfoForwardingInterceptor <span class="token function">authorizationInfoForwardingInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">//Ëøô‰∏™interceptor‰ºö‰∏∫ËØ∑Ê±ÇËá™Âä®Â∏¶‰∏äËÆ§ËØÅtoken</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">AuthorizationInfoForwardingInterceptor</span><span class="token punctuation">(</span>environment<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"spring.application.name"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setEnvironment</span><span class="token punctuation">(</span>Environment environment<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>environment <span class="token operator">=</span> environment<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="ÊåáÂÆö‰∫ÜgetÊñπÊ≥ïÔºå‰ΩÜfeign‰ªçÁÑ∂‰ΩøÁî®‰∫ÜpostÊñπÊ≥ïËøõË°åËØ∑Ê±Ç"><a href="#ÊåáÂÆö‰∫ÜgetÊñπÊ≥ïÔºå‰ΩÜfeign‰ªçÁÑ∂‰ΩøÁî®‰∫ÜpostÊñπÊ≥ïËøõË°åËØ∑Ê±Ç" class="headerlink" title="ÊåáÂÆö‰∫ÜgetÊñπÊ≥ïÔºå‰ΩÜfeign‰ªçÁÑ∂‰ΩøÁî®‰∫ÜpostÊñπÊ≥ïËøõË°åËØ∑Ê±Ç"></a>ÊåáÂÆö‰∫ÜgetÊñπÊ≥ïÔºå‰ΩÜfeign‰ªçÁÑ∂‰ΩøÁî®‰∫ÜpostÊñπÊ≥ïËøõË°åËØ∑Ê±Ç</h2><p>Â¶Ç‰∏ã‰ª£Á†ÅÊâÄÁ§∫</p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token annotation punctuation">@FeignClient</span><span class="token punctuation">(</span><span class="token string">"microservice-provider-user"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserFeignClient</span> <span class="token punctuation">{</span>
  <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"/get"</span><span class="token punctuation">,</span> method <span class="token operator">=</span> RequestMethod<span class="token punctuation">.</span>GET<span class="token punctuation">)</span>
  <span class="token keyword">public</span> User <span class="token function">get0</span><span class="token punctuation">(</span>User user<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>ÈÄöËøá<code>@RequestMapping</code>ÁöÑmethodÂ±ûÊÄßÊåáÂÆö‰∫ÜËØ∑Ê±ÇÊñπÊ≥ï‰∏∫GETÔºå‰ΩÜÂÆûÈôÖËøêË°å‰ºöÂèëÁé∞feign‰ªçÁÑ∂‰ΩøÁî®‰∫ÜPOSTÊñπÊ≥ïËøõË°å‰∫ÜË∞ÉÁî®„ÄÇ</p>
<h3 id="Ëß£ÂÜ≥ÊñπÊ°à-3"><a href="#Ëß£ÂÜ≥ÊñπÊ°à-3" class="headerlink" title="Ëß£ÂÜ≥ÊñπÊ°à"></a>Ëß£ÂÜ≥ÊñπÊ°à</h3><p>ËøôÁßçÂÜôÊ≥ïÂπ∂‰∏çÊ≠£Á°ÆÔºåÊ≠£Á°ÆÂÜôÊ≥ïÊúâ‰∫åÔºö</p>
<h4 id="1-ÈÄöËøá-RequestParamÊåáÂÆöurlÂèÇÊï∞Âêç"><a href="#1-ÈÄöËøá-RequestParamÊåáÂÆöurlÂèÇÊï∞Âêç" class="headerlink" title="1. ÈÄöËøá@RequestParamÊåáÂÆöurlÂèÇÊï∞Âêç"></a>1. ÈÄöËøá@RequestParamÊåáÂÆöurlÂèÇÊï∞Âêç</h4><pre class="line-numbers language-java"><code class="language-java"><span class="token annotation punctuation">@FeignClient</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"microservice-provider-user"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserFeignClient</span> <span class="token punctuation">{</span>
  <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"/get"</span><span class="token punctuation">,</span> method <span class="token operator">=</span> RequestMethod<span class="token punctuation">.</span>GET<span class="token punctuation">)</span>
  <span class="token keyword">public</span> User <span class="token function">get1</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span> Long id<span class="token punctuation">,</span> <span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span> String username<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="2-ÂΩìÁõÆÊ†áurlÂèÇÊï∞ËæÉÂ§öÊó∂ÔºåÂèØ‰ΩøÁî®mapÊù•ÊûÑÂª∫"><a href="#2-ÂΩìÁõÆÊ†áurlÂèÇÊï∞ËæÉÂ§öÊó∂ÔºåÂèØ‰ΩøÁî®mapÊù•ÊûÑÂª∫" class="headerlink" title="2. ÂΩìÁõÆÊ†áurlÂèÇÊï∞ËæÉÂ§öÊó∂ÔºåÂèØ‰ΩøÁî®mapÊù•ÊûÑÂª∫"></a>2. ÂΩìÁõÆÊ†áurlÂèÇÊï∞ËæÉÂ§öÊó∂ÔºåÂèØ‰ΩøÁî®mapÊù•ÊûÑÂª∫</h4><pre class="line-numbers language-java"><code class="language-java"><span class="token annotation punctuation">@FeignClient</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"microservice-provider-user"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserFeignClient</span> <span class="token punctuation">{</span>
  <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"/get"</span><span class="token punctuation">,</span> method <span class="token operator">=</span> RequestMethod<span class="token punctuation">.</span>GET<span class="token punctuation">)</span>
  <span class="token keyword">public</span> User <span class="token function">get2</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span> Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token operator">></span> map<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="‰ΩøÁî®MultipartFileÁ±ªÂûã‰Ωú‰∏∫ËØ∑Ê±ÇÂèÇÊï∞"><a href="#‰ΩøÁî®MultipartFileÁ±ªÂûã‰Ωú‰∏∫ËØ∑Ê±ÇÂèÇÊï∞" class="headerlink" title="‰ΩøÁî®MultipartFileÁ±ªÂûã‰Ωú‰∏∫ËØ∑Ê±ÇÂèÇÊï∞"></a>‰ΩøÁî®MultipartFileÁ±ªÂûã‰Ωú‰∏∫ËØ∑Ê±ÇÂèÇÊï∞</h2><p>ÊúâÊó∂ÂØπÂ§ñÊèê‰æõÁöÑÊé•Âè£Ë∞ÉÁî®ÂèØËÉΩÈúÄË¶Å‰º†ÈÄÅÊñá‰ª∂ÔºåÊ≠§Êó∂ÈúÄË¶ÅÂØπ<code>MultipartFile</code>Á±ªÂûãÁöÑÂèÇÊï∞ËøõË°åÂ§ÑÁêÜ</p>
<h3 id="Ëß£ÂÜ≥ÊñπÊ°à-4"><a href="#Ëß£ÂÜ≥ÊñπÊ°à-4" class="headerlink" title="Ëß£ÂÜ≥ÊñπÊ°à"></a>Ëß£ÂÜ≥ÊñπÊ°à</h3><p><strong>ÂæÖË°•ÂÖÖ</strong></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://taccisum.github.io/outbound_rule_invalid_cause_by_urlrewritefilter_and_shirofilter.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="taccisum">
      <meta itemprop="description" content="el psy congroo.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Taccisum's blog üòâ">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/outbound_rule_invalid_cause_by_urlrewritefilter_and_shirofilter.html" class="post-title-link" itemprop="url">ÂêåÊó∂ÈÖçÁΩÆUrlRewriteFilter‰∏éShiroFilterÂØºËá¥outbound ruleÂ§±ÊïàÁöÑÈóÆÈ¢ò</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-12-21 16:10:51" itemprop="dateCreated datePublished" datetime="2017-12-21T16:10:51+08:00">2017-12-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-03-13 18:05:01" itemprop="dateModified" datetime="2020-03-13T18:05:01+08:00">2020-03-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index"><span itemprop="name">java</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/Ë∏©ÂùëÊó•ËÆ∞/" itemprop="url" rel="index"><span itemprop="name">Ë∏©ÂùëÊó•ËÆ∞</span></a>
                </span>
            </span>

          
            <span id="/outbound_rule_invalid_cause_by_urlrewritefilter_and_shirofilter.html" class="post-meta-item leancloud_visitors" data-flag-title="ÂêåÊó∂ÈÖçÁΩÆUrlRewriteFilter‰∏éShiroFilterÂØºËá¥outbound ruleÂ§±ÊïàÁöÑÈóÆÈ¢ò" title="Views">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/outbound_rule_invalid_cause_by_urlrewritefilter_and_shirofilter.html#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/outbound_rule_invalid_cause_by_urlrewritefilter_and_shirofilter.html" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="È°πÁõÆÁéØÂ¢É"><a href="#È°πÁõÆÁéØÂ¢É" class="headerlink" title="È°πÁõÆÁéØÂ¢É"></a>È°πÁõÆÁéØÂ¢É</h2><p>Spring Boot1.5.4 + Shiro1.4.0 + UrlRewriteFilter4.0.4</p>
<h2 id="ÈóÆÈ¢òÊèèËø∞"><a href="#ÈóÆÈ¢òÊèèËø∞" class="headerlink" title="ÈóÆÈ¢òÊèèËø∞"></a>ÈóÆÈ¢òÊèèËø∞</h2><p>ÊúÄËøëÂú®È°πÁõÆ‰∏≠ÂêåÊó∂Áî®Âà∞<a href="http://shiro.apache.org/" target="_blank" rel="noopener">Shiro</a>Âíå<a href="http://www.tuckey.org/urlrewrite/" target="_blank" rel="noopener">UrlRewriteFilter</a>„ÄÇÁî±‰∫éÂú®webÁéØÂ¢É‰∏ã‰∏§ËÄÖÈÉΩÊòØÈÄöËøáÈÖçÁΩÆfilterÊù•ÂÆûÁé∞ÂäüËÉΩÁöÑÔºåÂõ†Ê≠§ÂØºËá¥Âá∫Áé∞‰∫ÜÂÜ≤Á™Å‚Äî‚ÄîUrlRewriteFilterÁöÑoutbound ruleÊó†Ê≥ïÊ≠£Â∏∏Â∑•‰Ωú„ÄÇÂÖ∑‰ΩìË°®Áé∞‰∏∫Ôºö</p>
<p>Âú®urlrewrite.xml‰∏≠ÈÖçÁΩÆ‰∫Ü</p>
<pre class="line-numbers language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>urlrewrite</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>outbound-rule</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>from</span><span class="token punctuation">></span></span>/in-rewrite\?type=(\w+)$<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>from</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>to</span><span class="token punctuation">></span></span>/in/$1.html<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>to</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>outbound-rule</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>urlrewrite</span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Âú®java‰ª£Á†Å‰∏≠ÂÆö‰πâaction</p>
<pre class="line-numbers language-java"><code class="language-java">    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"out-rewrite"</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ResponseBody</span>
    <span class="token keyword">public</span> String <span class="token function">out</span><span class="token punctuation">(</span>HttpServletRequest request<span class="token punctuation">,</span> HttpServletResponse response<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> response<span class="token punctuation">.</span><span class="token function">encodeURL</span><span class="token punctuation">(</span><span class="token string">"localhost:8080/in-rewrite?type=233"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment" spellcheck="true">//will be rewrite to 'localhost:8080/in/233.html'</span>
    <span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Ê≠£Â∏∏Êù•ËØ¥ÔºåËÆøÈóÆËøô‰∏™apiÂ∫îËØ•ËøîÂõû‚Äùlocalhost:8080/in/233.html‚ÄùÊâçÂØπÔºå‰ΩÜÂç¥ËøîÂõû‰∫ÜÊú™ËΩ¨Êç¢ÂâçÁöÑurlÔºåÂç≥‚Äùlocalhost:8080/in-rewrite?type=233‚Äù„ÄÇ</p>
<h2 id="ÈóÆÈ¢òÂàÜÊûê"><a href="#ÈóÆÈ¢òÂàÜÊûê" class="headerlink" title="ÈóÆÈ¢òÂàÜÊûê"></a>ÈóÆÈ¢òÂàÜÊûê</h2><p>Âú®Ë∞ÉËØïÊ∫êÁ†ÅÁöÑÊó∂ÂÄôÂèëÁé∞ÔºåÂêåÊó∂ÈÖçÁΩÆ‰∫ÜShiroFilterÂíåUrlRewriteFilterÊó∂ÔºåresponseÁöÑÁ±ªÂûãÊòØ<code>ShiroHttpServletResponse</code>ÔºåÊ≠§Êó∂outbound ruleÊòØ‰∏çËµ∑‰ΩúÁî®ÁöÑ„ÄÇËÄåÊääShiroFilterÁöÑÈÖçÁΩÆÂéªÊéâÔºåÂè™Áïô‰∏ãUrlRewriteFilterÊó∂ÔºåresponseÁöÑÁ±ªÂûãÂàôÊòØ<code>UrlRewriteWrappedResponse</code>ÔºåËÄåÊ≠§Êó∂outbound ruleÊòØËµ∑‰ΩúÁî®ÁöÑ„ÄÇÊòæÁÑ∂Ôºå‰∏§ËÄÖÂú®filterÈáåÈù¢ÈÉΩÂØπresponseËøõË°å‰∫ÜÈáçÊñ∞ÂåÖË£ÖÔºåËÄåShiroFilterÊâßË°åÂú®ÂêéÔºåÂØºËá¥ÂâçËÄÖÁöÑÈÉ®ÂàÜÂäüËÉΩÂ§±Êïà„ÄÇ</p>
<p>ÂÜçÊü•Áúã‰∏äÈù¢‰∏§‰∏™responseÂåÖË£ÖÁ±ªÁöÑÊ∫êÁ†ÅÔºö</p>
<p><strong>UrlRewriteWrappedResponse.java</strong></p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token keyword">public</span> String <span class="token function">encodeURL</span><span class="token punctuation">(</span>String s<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        RewrittenOutboundUrl rou <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">processPreEncodeURL</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>rou <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">encodeURL</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>rou<span class="token punctuation">.</span><span class="token function">isEncode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                rou<span class="token punctuation">.</span><span class="token function">setTarget</span><span class="token punctuation">(</span><span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">encodeURL</span><span class="token punctuation">(</span>rou<span class="token punctuation">.</span><span class="token function">getTarget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">processPostEncodeURL</span><span class="token punctuation">(</span>rou<span class="token punctuation">.</span><span class="token function">getTarget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTarget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>ShiroHttpServletResponse.java</strong></p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token keyword">public</span> String <span class="token function">encodeURL</span><span class="token punctuation">(</span>String url<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        String absolute <span class="token operator">=</span> <span class="token function">toAbsolute</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isEncodeable</span><span class="token punctuation">(</span>absolute<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment" spellcheck="true">// W3c spec clearly said</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>url<span class="token punctuation">.</span><span class="token function">equalsIgnoreCase</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                url <span class="token operator">=</span> absolute<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> <span class="token function">toEncoded</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> url<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>ÂèëÁé∞‰∏§ËÄÖÂùáÂØπ<code>encodeUrl</code>„ÄÅ<code>encodeRedirectUrl</code>Á≠âÂõõ‰∏™ÊñπÊ≥ïËøõË°å‰∫ÜÊîπÂÜô„ÄÇShiroÁöÑÂåÖË£ÖÁ±ªÊâßË°åÂú®ÂêéÔºåÂØºËá¥<code>UrlRewriteWrappedResponse</code>ÁöÑÁõ∏ÂÖ≥‰ª£Á†ÅÊ≤°ÊúâË¢´ÊâßË°å„ÄÇ</p>
<h2 id="Ëß£ÂÜ≥ÊñπÊ°à"><a href="#Ëß£ÂÜ≥ÊñπÊ°à" class="headerlink" title="Ëß£ÂÜ≥ÊñπÊ°à"></a>Ëß£ÂÜ≥ÊñπÊ°à</h2><h3 id="ÈáçÊéíFilterÁöÑÊâßË°åÈ°∫Â∫è"><a href="#ÈáçÊéíFilterÁöÑÊâßË°åÈ°∫Â∫è" class="headerlink" title="ÈáçÊéíFilterÁöÑÊâßË°åÈ°∫Â∫è"></a>ÈáçÊéíFilterÁöÑÊâßË°åÈ°∫Â∫è</h3><p>ËÆ©<code>UrlRewriteWrappedResponse</code>ÁöÑÂåÖË£ÖËøáÁ®ãÊâßË°åÂú®ÂêéÔºåÈÅøÂÖçencodeUrlÊñπÊ≥ïË¢´ÊîπÂÜô„ÄÇ</p>
<p>ÊòæÁÑ∂Ëøô‰∏çÊòØ‰∏Ä‰∏™Â•ΩÁöÑÂäûÊ≥ïÔºåÂéüÂõ†Â¶Ç‰∏ãÔºö</p>
<ol>
<li>ÂØºËá¥<code>ShiroHttpServletResponse</code>ÁöÑÊñπÊ≥ïË¢´ÊîπÂÜôÔºåÂèØËÉΩÂºïÂá∫ÂÖ∂ÂÆÉÊú™Áü•ÈóÆÈ¢òÔºåÊó†ÂºÇ‰∫éÊãÜ‰∏úÂ¢ôË°•Ë•øÂ¢ô</li>
<li>ÂØºËá¥ShiroFilterÊâßË°åÂú®ÂâçÔºåÂèØËÉΩÂØºËá¥‰∏Ä‰∫õËÆøÈóÆÁöÑurlËøòÊú™Ë¢´ÈáçÂÜôÔºåËøôÊ¨°ËÆøÈóÆÂ∞±Ë¢´ShiroÊã¶Êà™‰∫Ü</li>
</ol>
<h3 id="Ëá™Â∑±ÂÆûÁé∞encodeUrlÁöÑÈÄªËæë"><a href="#Ëá™Â∑±ÂÆûÁé∞encodeUrlÁöÑÈÄªËæë" class="headerlink" title="Ëá™Â∑±ÂÆûÁé∞encodeUrlÁöÑÈÄªËæë"></a>Ëá™Â∑±ÂÆûÁé∞encodeUrlÁöÑÈÄªËæë</h3><p>ËÆ©<code>ShiroHttpServletResponse</code>ÊâßË°åencodeÂâçÂÖàÊâßË°å<code>UrlRewriteWrappedResponse</code>ÁöÑencode‰ª£Á†Å„ÄÇ</p>
<ol>
<li><p>ÊîπÂÜô<code>ShiroHttpServletResponse</code>ÔºåÈáçÂÜôÂÖ∂encodeÈÄªËæë</p>
<pre class="line-numbers language-java"><code class="language-java"> <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomShiroHttpServletResponse</span> <span class="token keyword">extends</span> <span class="token class-name">ShiroHttpServletResponse</span> <span class="token punctuation">{</span>
     <span class="token keyword">private</span> HttpServletResponse wrapped<span class="token punctuation">;</span>

     <span class="token keyword">public</span> <span class="token function">CustomShiroHttpServletResponse</span><span class="token punctuation">(</span>HttpServletResponse wrapped<span class="token punctuation">,</span> ServletContext context<span class="token punctuation">,</span> ShiroHttpServletRequest request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token keyword">super</span><span class="token punctuation">(</span>wrapped<span class="token punctuation">,</span> context<span class="token punctuation">,</span> request<span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token keyword">this</span><span class="token punctuation">.</span>wrapped <span class="token operator">=</span> wrapped<span class="token punctuation">;</span>
     <span class="token punctuation">}</span>

     <span class="token annotation punctuation">@Override</span>
     <span class="token keyword">public</span> String <span class="token function">encodeRedirectURL</span><span class="token punctuation">(</span>String url<span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">encodeRedirectURL</span><span class="token punctuation">(</span>wrapped<span class="token punctuation">.</span><span class="token function">encodeRedirectURL</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>

     <span class="token annotation punctuation">@Override</span>
     <span class="token keyword">public</span> String <span class="token function">encodeRedirectUrl</span><span class="token punctuation">(</span>String s<span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">encodeRedirectUrl</span><span class="token punctuation">(</span>wrapped<span class="token punctuation">.</span><span class="token function">encodeRedirectUrl</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>

     <span class="token annotation punctuation">@Override</span>
     <span class="token keyword">public</span> String <span class="token function">encodeURL</span><span class="token punctuation">(</span>String url<span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">encodeURL</span><span class="token punctuation">(</span>wrapped<span class="token punctuation">.</span><span class="token function">encodeURL</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>

     <span class="token annotation punctuation">@Override</span>
     <span class="token keyword">public</span> String <span class="token function">encodeUrl</span><span class="token punctuation">(</span>String s<span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">encodeUrl</span><span class="token punctuation">(</span>wrapped<span class="token punctuation">.</span><span class="token function">encodeUrl</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</li>
<li><p>ÊîπÂÜô<code>ShiroFilter</code>Ôºå‰ΩøÁî®<code>CustomShiroHttpServletResponse</code>‰ª£Êõø<code>ShiroHttpServletResponse</code></p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomSpringShiroFilter</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractShiroFilter</span> <span class="token punctuation">{</span>
 <span class="token keyword">protected</span> <span class="token function">CustomSpringShiroFilter</span><span class="token punctuation">(</span>WebSecurityManager webSecurityManager<span class="token punctuation">,</span> FilterChainResolver resolver<span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token comment" spellcheck="true">//ËøôÊÆµ‰ª£Á†ÅÊòØcopy‰∫ÜShiroFilterFactoryBean$SpringShiroFilterÁöÑÊûÑÈÄ†ÊñπÊ≥ï‰∏≠ÁöÑ‰ª£Á†Å</span>
     <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">if</span> <span class="token punctuation">(</span>webSecurityManager <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">"WebSecurityManager property cannot be null."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
     <span class="token function">setSecurityManager</span><span class="token punctuation">(</span>webSecurityManager<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">if</span> <span class="token punctuation">(</span>resolver <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token function">setFilterChainResolver</span><span class="token punctuation">(</span>resolver<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>

 <span class="token annotation punctuation">@Override</span>
 <span class="token keyword">protected</span> ServletResponse <span class="token function">wrapServletResponse</span><span class="token punctuation">(</span>HttpServletResponse orig<span class="token punctuation">,</span> ShiroHttpServletRequest request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token comment" spellcheck="true">//‰ΩøÁî®CustomShiroHttpServletResponse‰ª£ÊõøÂéüÊúâÁöÑResponse Wrapper</span>
     <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">CustomShiroHttpServletResponse</span><span class="token punctuation">(</span>orig<span class="token punctuation">,</span> <span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> request<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</li>
<li><p>ÁÑ∂ÂêéÊîπÂÜô<code>ShiroFilterFactoryBean</code>ÁöÑcreateInstanceÊñπÊ≥ïÔºå‰ΩøÁî®<code>CustomSpringShiroFilter</code>Ôºå‰ª£ÊõøÂéüÊù•ÁöÑFilter</p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomShiroFilterFactoryBean</span> <span class="token keyword">extends</span> <span class="token class-name">ShiroFilterFactoryBean</span> <span class="token punctuation">{</span>
 <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">transient</span> <span class="token keyword">final</span> Logger log <span class="token operator">=</span> LoggerFactory<span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span>ShiroFilterFactoryBean<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

 <span class="token annotation punctuation">@Override</span>
 <span class="token keyword">protected</span> AbstractShiroFilter <span class="token function">createInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span>
     <span class="token comment" spellcheck="true">//ËøôÈÉ®ÂàÜ‰ª£Á†Å‰∏éÁà∂Á±ªÁõ∏Âêå</span>
     log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"Creating Shiro Filter instance."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

     SecurityManager securityManager <span class="token operator">=</span> <span class="token function">getSecurityManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">if</span> <span class="token punctuation">(</span>securityManager <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>
         String msg <span class="token operator">=</span> <span class="token string">"SecurityManager property must be set."</span><span class="token punctuation">;</span>
         <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">BeanInitializationException</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>

     <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>securityManager <span class="token keyword">instanceof</span> <span class="token class-name">WebSecurityManager</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         String msg <span class="token operator">=</span> <span class="token string">"The security manager does not implement the WebSecurityManager interface."</span><span class="token punctuation">;</span>
         <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">BeanInitializationException</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>

     FilterChainManager manager <span class="token operator">=</span> <span class="token function">createFilterChainManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

     PathMatchingFilterChainResolver chainResolver <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PathMatchingFilterChainResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     chainResolver<span class="token punctuation">.</span><span class="token function">setFilterChainManager</span><span class="token punctuation">(</span>manager<span class="token punctuation">)</span><span class="token punctuation">;</span>

     <span class="token comment" spellcheck="true">//‰ΩøÁî®CustomSpringShiroFilter‰ª£ÊõøSpringShiroFilter</span>
     <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">CustomSpringShiroFilter</span><span class="token punctuation">(</span><span class="token punctuation">(</span>WebSecurityManager<span class="token punctuation">)</span> securityManager<span class="token punctuation">,</span> chainResolver<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</li>
<li><p>ÈáçÂêØÈ°πÁõÆÔºåËÆøÈóÆ‚Äù/out-rewrite‚ÄùÔºåÁªìÊûúÂ¶Ç‰∏ã<br><img src="/images/20171221/outbound.png" alt="outbound rule"></p>
</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://taccisum.github.io/instantiationexception_on_mybatistest.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="taccisum">
      <meta itemprop="description" content="el psy congroo.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Taccisum's blog üòâ">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/instantiationexception_on_mybatistest.html" class="post-title-link" itemprop="url">Âú®@MybatisTest‰∏≠‰ΩøÁî®ÈÄöÁî®MapperÂá∫Áé∞InstantiationExceptionÁöÑÈóÆÈ¢ò</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-11-15 11:42:36" itemprop="dateCreated datePublished" datetime="2017-11-15T11:42:36+08:00">2017-11-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-03-13 18:05:01" itemprop="dateModified" datetime="2020-03-13T18:05:01+08:00">2020-03-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index"><span itemprop="name">java</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/Ë∏©ÂùëÊó•ËÆ∞/" itemprop="url" rel="index"><span itemprop="name">Ë∏©ÂùëÊó•ËÆ∞</span></a>
                </span>
            </span>

          
            <span id="/instantiationexception_on_mybatistest.html" class="post-meta-item leancloud_visitors" data-flag-title="Âú®@MybatisTest‰∏≠‰ΩøÁî®ÈÄöÁî®MapperÂá∫Áé∞InstantiationExceptionÁöÑÈóÆÈ¢ò" title="Views">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/instantiationexception_on_mybatistest.html#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/instantiationexception_on_mybatistest.html" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="ÈóÆÈ¢òÊèèËø∞"><a href="#ÈóÆÈ¢òÊèèËø∞" class="headerlink" title="ÈóÆÈ¢òÊèèËø∞"></a>ÈóÆÈ¢òÊèèËø∞</h2><p>Âú®Spring BootÁéØÂ¢É‰∏≠‰ΩøÁî®<a href="http://www.mybatis.org/spring-boot-starter/mybatis-spring-boot-test-autoconfigure/" target="_blank" rel="noopener">@MybatisTest</a>Ê≥®Ëß£ÈíàÂØπMapperÂÜôÂçïÂÖÉÊµãËØïÁöÑÊó∂ÂÄôÔºåÁî±‰∫éÂêåÊó∂ÂºïÂÖ•‰∫Ü<a href="https://github.com/abel533/Mapper" target="_blank" rel="noopener">ÈÄöÁî®Mapper</a>ÔºåÂú®ÂçïÂÖÉÊµãËØï‰∏≠Ë∞ÉÁî®ÈÄöÁî®MapperÁöÑÊñπÊ≥ïËøõË°åCRUDÊó∂‰ºöÂá∫Áé∞<code>InstantiationException</code>ÂºÇÂ∏∏</p>
<pre class="line-numbers language-java"><code class="language-java">org<span class="token punctuation">.</span>mybatis<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>MyBatisSystemException<span class="token operator">:</span> nested exception is org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>builder<span class="token punctuation">.</span>BuilderException<span class="token operator">:</span> Error invoking SqlProvider <span class="token function">method</span> <span class="token punctuation">(</span>tk<span class="token punctuation">.</span>mybatis<span class="token punctuation">.</span>mapper<span class="token punctuation">.</span>provider<span class="token punctuation">.</span>base<span class="token punctuation">.</span>BaseSelectProvider<span class="token punctuation">.</span>dynamicSQL<span class="token punctuation">)</span><span class="token punctuation">.</span>  Cause<span class="token operator">:</span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>InstantiationException<span class="token operator">:</span> tk<span class="token punctuation">.</span>mybatis<span class="token punctuation">.</span>mapper<span class="token punctuation">.</span>provider<span class="token punctuation">.</span>base<span class="token punctuation">.</span>BaseSelectProvider

    at org<span class="token punctuation">.</span>mybatis<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>MyBatisExceptionTranslator<span class="token punctuation">.</span><span class="token function">translateExceptionIfPossible</span><span class="token punctuation">(</span>MyBatisExceptionTranslator<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">77</span><span class="token punctuation">)</span>
    at org<span class="token punctuation">.</span>mybatis<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>SqlSessionTemplate$SqlSessionInterceptor<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>SqlSessionTemplate<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">446</span><span class="token punctuation">)</span>
    at com<span class="token punctuation">.</span>sun<span class="token punctuation">.</span>proxy<span class="token punctuation">.</span>$Proxy89<span class="token punctuation">.</span><span class="token function">selectOne</span><span class="token punctuation">(</span>Unknown Source<span class="token punctuation">)</span>
    at org<span class="token punctuation">.</span>mybatis<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>SqlSessionTemplate<span class="token punctuation">.</span><span class="token function">selectOne</span><span class="token punctuation">(</span>SqlSessionTemplate<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">166</span><span class="token punctuation">)</span>
    at org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>binding<span class="token punctuation">.</span>MapperMethod<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>MapperMethod<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">82</span><span class="token punctuation">)</span>
    at org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>binding<span class="token punctuation">.</span>MapperProxy<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>MapperProxy<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">59</span><span class="token punctuation">)</span>
    at com<span class="token punctuation">.</span>sun<span class="token punctuation">.</span>proxy<span class="token punctuation">.</span>$Proxy91<span class="token punctuation">.</span><span class="token function">selectByPrimaryKey</span><span class="token punctuation">(</span>Unknown Source<span class="token punctuation">)</span>
    at com<span class="token punctuation">.</span>ikentop<span class="token punctuation">.</span>biz<span class="token punctuation">.</span>provider<span class="token punctuation">.</span>mapper<span class="token punctuation">.</span>hh<span class="token punctuation">.</span>ImageRecordMapperTest<span class="token punctuation">.</span><span class="token function">testSimply</span><span class="token punctuation">(</span>ImageRecordMapperTest<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">33</span><span class="token punctuation">)</span>
    at sun<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span>NativeMethodAccessorImpl<span class="token punctuation">.</span><span class="token function">invoke0</span><span class="token punctuation">(</span>Native Method<span class="token punctuation">)</span>
    at sun<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span>NativeMethodAccessorImpl<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>NativeMethodAccessorImpl<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">62</span><span class="token punctuation">)</span>
    at sun<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span>DelegatingMethodAccessorImpl<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>DelegatingMethodAccessorImpl<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">43</span><span class="token punctuation">)</span>
    at java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span>Method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>Method<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">498</span><span class="token punctuation">)</span>
    at org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>runners<span class="token punctuation">.</span>model<span class="token punctuation">.</span>FrameworkMethod$<span class="token number">1</span><span class="token punctuation">.</span><span class="token function">runReflectiveCall</span><span class="token punctuation">(</span>FrameworkMethod<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">50</span><span class="token punctuation">)</span>
    at org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>internal<span class="token punctuation">.</span>runners<span class="token punctuation">.</span>model<span class="token punctuation">.</span>ReflectiveCallable<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>ReflectiveCallable<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">12</span><span class="token punctuation">)</span>
    at org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>runners<span class="token punctuation">.</span>model<span class="token punctuation">.</span>FrameworkMethod<span class="token punctuation">.</span><span class="token function">invokeExplosively</span><span class="token punctuation">(</span>FrameworkMethod<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">47</span><span class="token punctuation">)</span>
    at org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>internal<span class="token punctuation">.</span>runners<span class="token punctuation">.</span>statements<span class="token punctuation">.</span>InvokeMethod<span class="token punctuation">.</span><span class="token function">evaluate</span><span class="token punctuation">(</span>InvokeMethod<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">17</span><span class="token punctuation">)</span>
    at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span>junit4<span class="token punctuation">.</span>statements<span class="token punctuation">.</span>RunBeforeTestMethodCallbacks<span class="token punctuation">.</span><span class="token function">evaluate</span><span class="token punctuation">(</span>RunBeforeTestMethodCallbacks<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">75</span><span class="token punctuation">)</span>
    at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span>junit4<span class="token punctuation">.</span>statements<span class="token punctuation">.</span>RunAfterTestMethodCallbacks<span class="token punctuation">.</span><span class="token function">evaluate</span><span class="token punctuation">(</span>RunAfterTestMethodCallbacks<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">86</span><span class="token punctuation">)</span>
    at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span>junit4<span class="token punctuation">.</span>statements<span class="token punctuation">.</span>SpringRepeat<span class="token punctuation">.</span><span class="token function">evaluate</span><span class="token punctuation">(</span>SpringRepeat<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">84</span><span class="token punctuation">)</span>
    at org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>runners<span class="token punctuation">.</span>ParentRunner<span class="token punctuation">.</span><span class="token function">runLeaf</span><span class="token punctuation">(</span>ParentRunner<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">325</span><span class="token punctuation">)</span>
    at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span>junit4<span class="token punctuation">.</span>SpringJUnit4ClassRunner<span class="token punctuation">.</span><span class="token function">runChild</span><span class="token punctuation">(</span>SpringJUnit4ClassRunner<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">252</span><span class="token punctuation">)</span>
    at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span>junit4<span class="token punctuation">.</span>SpringJUnit4ClassRunner<span class="token punctuation">.</span><span class="token function">runChild</span><span class="token punctuation">(</span>SpringJUnit4ClassRunner<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">94</span><span class="token punctuation">)</span>
    at org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>runners<span class="token punctuation">.</span>ParentRunner$<span class="token number">3</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>ParentRunner<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">290</span><span class="token punctuation">)</span>
    at org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>runners<span class="token punctuation">.</span>ParentRunner$<span class="token number">1</span><span class="token punctuation">.</span><span class="token function">schedule</span><span class="token punctuation">(</span>ParentRunner<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">71</span><span class="token punctuation">)</span>
    at org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>runners<span class="token punctuation">.</span>ParentRunner<span class="token punctuation">.</span><span class="token function">runChildren</span><span class="token punctuation">(</span>ParentRunner<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">288</span><span class="token punctuation">)</span>
    at org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>runners<span class="token punctuation">.</span>ParentRunner<span class="token punctuation">.</span>access$<span class="token function">000</span><span class="token punctuation">(</span>ParentRunner<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">58</span><span class="token punctuation">)</span>
    at org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>runners<span class="token punctuation">.</span>ParentRunner$<span class="token number">2</span><span class="token punctuation">.</span><span class="token function">evaluate</span><span class="token punctuation">(</span>ParentRunner<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">268</span><span class="token punctuation">)</span>
    at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span>junit4<span class="token punctuation">.</span>statements<span class="token punctuation">.</span>RunBeforeTestClassCallbacks<span class="token punctuation">.</span><span class="token function">evaluate</span><span class="token punctuation">(</span>RunBeforeTestClassCallbacks<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">61</span><span class="token punctuation">)</span>
    at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span>junit4<span class="token punctuation">.</span>statements<span class="token punctuation">.</span>RunAfterTestClassCallbacks<span class="token punctuation">.</span><span class="token function">evaluate</span><span class="token punctuation">(</span>RunAfterTestClassCallbacks<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">70</span><span class="token punctuation">)</span>
    at org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>runners<span class="token punctuation">.</span>ParentRunner<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>ParentRunner<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">363</span><span class="token punctuation">)</span>
    at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span>junit4<span class="token punctuation">.</span>SpringJUnit4ClassRunner<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>SpringJUnit4ClassRunner<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">191</span><span class="token punctuation">)</span>
    at org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>runner<span class="token punctuation">.</span>JUnitCore<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>JUnitCore<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">137</span><span class="token punctuation">)</span>
    at com<span class="token punctuation">.</span>intellij<span class="token punctuation">.</span>junit4<span class="token punctuation">.</span>JUnit4IdeaTestRunner<span class="token punctuation">.</span><span class="token function">startRunnerWithArgs</span><span class="token punctuation">(</span>JUnit4IdeaTestRunner<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">68</span><span class="token punctuation">)</span>
    at com<span class="token punctuation">.</span>intellij<span class="token punctuation">.</span>rt<span class="token punctuation">.</span>execution<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>IdeaTestRunner$Repeater<span class="token punctuation">.</span><span class="token function">startRunnerWithArgs</span><span class="token punctuation">(</span>IdeaTestRunner<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">51</span><span class="token punctuation">)</span>
    at com<span class="token punctuation">.</span>intellij<span class="token punctuation">.</span>rt<span class="token punctuation">.</span>execution<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>JUnitStarter<span class="token punctuation">.</span><span class="token function">prepareStreamsAndStart</span><span class="token punctuation">(</span>JUnitStarter<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">237</span><span class="token punctuation">)</span>
    at com<span class="token punctuation">.</span>intellij<span class="token punctuation">.</span>rt<span class="token punctuation">.</span>execution<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>JUnitStarter<span class="token punctuation">.</span><span class="token function">main</span><span class="token punctuation">(</span>JUnitStarter<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">70</span><span class="token punctuation">)</span>
Caused by<span class="token operator">:</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>builder<span class="token punctuation">.</span>BuilderException<span class="token operator">:</span> Error invoking SqlProvider <span class="token function">method</span> <span class="token punctuation">(</span>tk<span class="token punctuation">.</span>mybatis<span class="token punctuation">.</span>mapper<span class="token punctuation">.</span>provider<span class="token punctuation">.</span>base<span class="token punctuation">.</span>BaseSelectProvider<span class="token punctuation">.</span>dynamicSQL<span class="token punctuation">)</span><span class="token punctuation">.</span>  Cause<span class="token operator">:</span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>InstantiationException<span class="token operator">:</span> tk<span class="token punctuation">.</span>mybatis<span class="token punctuation">.</span>mapper<span class="token punctuation">.</span>provider<span class="token punctuation">.</span>base<span class="token punctuation">.</span>BaseSelectProvider
    at org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>builder<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>ProviderSqlSource<span class="token punctuation">.</span><span class="token function">createSqlSource</span><span class="token punctuation">(</span>ProviderSqlSource<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">103</span><span class="token punctuation">)</span>
    at org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>builder<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>ProviderSqlSource<span class="token punctuation">.</span><span class="token function">getBoundSql</span><span class="token punctuation">(</span>ProviderSqlSource<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">73</span><span class="token punctuation">)</span>
    at org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>mapping<span class="token punctuation">.</span>MappedStatement<span class="token punctuation">.</span><span class="token function">getBoundSql</span><span class="token punctuation">(</span>MappedStatement<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">292</span><span class="token punctuation">)</span>
    at org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>executor<span class="token punctuation">.</span>CachingExecutor<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>CachingExecutor<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">81</span><span class="token punctuation">)</span>
    at org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>session<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>DefaultSqlSession<span class="token punctuation">.</span><span class="token function">selectList</span><span class="token punctuation">(</span>DefaultSqlSession<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">148</span><span class="token punctuation">)</span>
    at org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>session<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>DefaultSqlSession<span class="token punctuation">.</span><span class="token function">selectList</span><span class="token punctuation">(</span>DefaultSqlSession<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">141</span><span class="token punctuation">)</span>
    at org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>session<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>DefaultSqlSession<span class="token punctuation">.</span><span class="token function">selectOne</span><span class="token punctuation">(</span>DefaultSqlSession<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">77</span><span class="token punctuation">)</span>
    at sun<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span>NativeMethodAccessorImpl<span class="token punctuation">.</span><span class="token function">invoke0</span><span class="token punctuation">(</span>Native Method<span class="token punctuation">)</span>
    at sun<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span>NativeMethodAccessorImpl<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>NativeMethodAccessorImpl<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">62</span><span class="token punctuation">)</span>
    at sun<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span>DelegatingMethodAccessorImpl<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>DelegatingMethodAccessorImpl<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">43</span><span class="token punctuation">)</span>
    at java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span>Method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>Method<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">498</span><span class="token punctuation">)</span>
    at org<span class="token punctuation">.</span>mybatis<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>SqlSessionTemplate$SqlSessionInterceptor<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>SqlSessionTemplate<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">433</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token number">34</span> more
Caused by<span class="token operator">:</span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>InstantiationException<span class="token operator">:</span> tk<span class="token punctuation">.</span>mybatis<span class="token punctuation">.</span>mapper<span class="token punctuation">.</span>provider<span class="token punctuation">.</span>base<span class="token punctuation">.</span>BaseSelectProvider
    at java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>Class<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span>Class<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">427</span><span class="token punctuation">)</span>
    at org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>builder<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>ProviderSqlSource<span class="token punctuation">.</span><span class="token function">createSqlSource</span><span class="token punctuation">(</span>ProviderSqlSource<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">85</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token number">45</span> more
Caused by<span class="token operator">:</span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>NoSuchMethodException<span class="token operator">:</span> tk<span class="token punctuation">.</span>mybatis<span class="token punctuation">.</span>mapper<span class="token punctuation">.</span>provider<span class="token punctuation">.</span>base<span class="token punctuation">.</span>BaseSelectProvider<span class="token punctuation">.</span>&lt;init<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    at java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>Class<span class="token punctuation">.</span><span class="token function">getConstructor0</span><span class="token punctuation">(</span>Class<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">3082</span><span class="token punctuation">)</span>
    at java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>Class<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span>Class<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">412</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token number">46</span> more
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>ÂçïÂÖÉÊµãËØï‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token annotation punctuation">@RunWith</span><span class="token punctuation">(</span>SpringRunner<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@MybatisTest</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ImageRecordMapperTest</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> ImageRecordMapper mapper<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSimply</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        ImageRecord record <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">selectByPrimaryKey</span><span class="token punctuation">(</span><span class="token string">"1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Assert<span class="token punctuation">.</span><span class="token function">assertNotNull</span><span class="token punctuation">(</span>record<span class="token punctuation">)</span><span class="token punctuation">;</span>
        Assert<span class="token punctuation">.</span><span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token string">"taccisum"</span><span class="token punctuation">,</span> record<span class="token punctuation">.</span><span class="token function">getBucket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Assert<span class="token punctuation">.</span><span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token string">"image1"</span><span class="token punctuation">,</span> record<span class="token punctuation">.</span><span class="token function">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Assert<span class="token punctuation">.</span><span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token string">"hash1"</span><span class="token punctuation">,</span> record<span class="token punctuation">.</span><span class="token function">getHash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="ÂàÜÊûêÂéüÂõ†"><a href="#ÂàÜÊûêÂéüÂõ†" class="headerlink" title="ÂàÜÊûêÂéüÂõ†"></a>ÂàÜÊûêÂéüÂõ†</h2><p>Âú®github‰∏ämapperÁöÑ<a href="https://github.com/abel533/MyBatis-Spring-Boot/issues/34" target="_blank" rel="noopener">issue</a>‰∏≠Êúâ‰∏ÄÊÆµ‰ΩúËÄÖÁöÑÂõûÂ§çÔºåËØ¥Ê≠§ÂºÇÂ∏∏ÊòØÁî±‰∫é<code>ÈÄöÁî®ÊñπÊ≥ïÊ≤°ÊúâË¢´Ê≠£Á°ÆÂàùÂßãÂåñ</code>ÂØºËá¥„ÄÇ<br>ÊàëËøôËæπÁöÑÊÉÖÂÜµËôΩÁÑ∂ÂíåËøô‰∏™issue‰∏çÂêåÔºå‰ΩÜÊ†πÊú¨ÂéüÂõ†ÊòØ‰∏ÄÊ†∑ÁöÑ„ÄÇ<br>Êü•ÈòÖ<code>Mybatis-Test</code>ÁöÑÊñáÊ°£ÂèØÁü•Ôºå<code>@MybatisTest</code>Ê≥®Ëß£‰∏çÂêå‰∫é<code>@SpringBootTest</code>ÔºåÂÆÉÂè™Âä†ËΩΩ‰øùËØÅMybatisÊ≠£Â∏∏ËøêË°åÊâÄÈúÄË¶ÅÁöÑconfiguration„ÄÇÊòæÁÑ∂ÈÄöÁî®Mapper‰Ωú‰∏∫MybatisÁ¨¨‰∏âÊñπÁöÑÊâ©Â±ïÔºåÂπ∂Ê≤°ÊúâË¢´Á∫≥ÂÖ•ÂÖ∂‰∏≠ÔºåÂõ†ËÄåÈªòËÆ§ÊÉÖÂÜµ‰∏ãÈÄöÁî®MapperÁöÑstarterÊòØ‰∏ç‰ºöË¢´Âä†ËΩΩÁöÑÔºå‰πüÂ∞±ÂØºËá¥ÈÄöÁî®ÊñπÊ≥ï‰∏ç‰ºöË¢´ÂàùÂßãÂåñ„ÄÇ</p>
<blockquote>
<p>The @MybatisTest can be used if you want to test MyBatis components(Mapper interface and SqlSession). By default it will configure MyBatis(MyBatis-Spring) components(SqlSessionFactory and SqlSessionTemplate), configure MyBatis mapper interfaces and configure an in-memory embedded database. MyBatis tests are transactional and rollback at the end of each test by default, for more details refer to the relevant section in the Spring Reference Documentation. Also regular @Component beans will not be loaded into the ApplicationContext.<br>‰ª•‰∏äÊòØÊù•Ëá™<a href="http://www.mybatis.org/spring-boot-starter/mybatis-spring-boot-test-autoconfigure/" target="_blank" rel="noopener">mybatis-spring-boot-test-autoconfigure</a>ÂÆòÊñπÊñáÊ°£ÁöÑÊèèËø∞</p>
</blockquote>
<h2 id="Ëß£ÂÜ≥ÊñπÊ°à"><a href="#Ëß£ÂÜ≥ÊñπÊ°à" class="headerlink" title="Ëß£ÂÜ≥ÊñπÊ°à"></a>Ëß£ÂÜ≥ÊñπÊ°à</h2><p>ÊòæÁÑ∂ÔºåÂè™Ë¶ÅËÆ©MapperÁöÑstarterÂú®MybatisTestÁöÑÂçïÂÖÉÊµãËØïÂêØÂä®Êó∂Âæó‰ª•Âä†ËΩΩÂç≥ÂèØËß£ÂÜ≥Êàë‰ª¨ÁöÑÈóÆÈ¢ò„ÄÇÈÇ£‰πàÂ¶Ç‰ΩïÂÅöÂë¢Ôºü<br>Spring BootÊèê‰æõ‰∫Ü‰∏Ä‰∏™<code>@ImportAutoConfiguration</code>ÁöÑÊ≥®Ëß£ÔºåÂõ†Ê≠§Âè™ÈúÄË¶ÅÂú®ÂçïÂÖÉÊµãËØïÁöÑÁõÆÊ†áÁ±ª‰∏ä‰ΩøÁî®ËØ•Ê≥®Ëß£Â∞ÜMapperAutoConfigurationÂØºÂÖ•Âç≥ÂèØ</p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token annotation punctuation">@RunWith</span><span class="token punctuation">(</span>SpringRunner<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ImportAutoConfiguration</span><span class="token punctuation">(</span>MapperAutoConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@MybatisTest</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ImageRecordMapperTest</span> <span class="token punctuation">{</span>
    ‚Ä¶‚Ä¶
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>ÂÖ∂‰∏≠<code>MapperAutoConfiguration</code>ÊòØÈÄöÁî®MapperÁöÑstarterÁöÑauto-configureÁ±ª„ÄÇ</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://taccisum.github.io/learn_gradle_5.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="taccisum">
      <meta itemprop="description" content="el psy congroo.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Taccisum's blog üòâ">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/learn_gradle_5.html" class="post-title-link" itemprop="url">GradleÂ≠¶‰π†Ôºà‰∫îÔºâ - ÊâìÂåÖÂèëÂ∏É</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-10-13 11:32:20" itemprop="dateCreated datePublished" datetime="2017-10-13T11:32:20+08:00">2017-10-13</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-03-13 18:05:01" itemprop="dateModified" datetime="2020-03-13T18:05:01+08:00">2020-03-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index"><span itemprop="name">java</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/gradle/" itemprop="url" rel="index"><span itemprop="name">gradle</span></a>
                </span>
            </span>

          
            <span id="/learn_gradle_5.html" class="post-meta-item leancloud_visitors" data-flag-title="GradleÂ≠¶‰π†Ôºà‰∫îÔºâ - ÊâìÂåÖÂèëÂ∏É" title="Views">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/learn_gradle_5.html#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/learn_gradle_5.html" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="ÂèëÂ∏ÉÂà∞Maven‰ªìÂ∫ì"><a href="#ÂèëÂ∏ÉÂà∞Maven‰ªìÂ∫ì" class="headerlink" title="ÂèëÂ∏ÉÂà∞Maven‰ªìÂ∫ì"></a>ÂèëÂ∏ÉÂà∞Maven‰ªìÂ∫ì</h2><h3 id="Maven-PublishÊèí‰ª∂"><a href="#Maven-PublishÊèí‰ª∂" class="headerlink" title="Maven-PublishÊèí‰ª∂"></a>Maven-PublishÊèí‰ª∂</h3><p>GradleÂ∞ÜÈ°πÁõÆÂèëÂ∏ÉÂà∞Maven‰ªìÂ∫ìÈúÄË¶ÅÂÄüÂä©Êèí‰ª∂Ôºå<code>Maven-Publish</code>‰æøÊòØÂÆòÊñπÊé®ËçêÁöÑ‰∏ÄÊ¨æÊèí‰ª∂„ÄÇ<br><a href="https://docs.gradle.org/current/userguide/publishing_maven.html" target="_blank" rel="noopener">Maven-Publish</a></p>
<h3 id="ÂèëÂ∏ÉÈ°πÁõÆ"><a href="#ÂèëÂ∏ÉÈ°πÁõÆ" class="headerlink" title="ÂèëÂ∏ÉÈ°πÁõÆ"></a>ÂèëÂ∏ÉÈ°πÁõÆ</h3><p>ÈÄöËøá<code>&#39;maven-publish&#39;</code>ÂºïÂÖ•Êèí‰ª∂<br><strong>build.gradle</strong></p>
<pre class="line-numbers language-groovy"><code class="language-groovy">apply plugin<span class="token punctuation">:</span> <span class="token string">'maven-publish'</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h4 id="ÂèëÂ∏ÉÂà∞Êú¨Âú∞"><a href="#ÂèëÂ∏ÉÂà∞Êú¨Âú∞" class="headerlink" title="ÂèëÂ∏ÉÂà∞Êú¨Âú∞"></a>ÂèëÂ∏ÉÂà∞Êú¨Âú∞</h4><p><strong>build.gradle</strong></p>
<pre class="line-numbers language-groovy"><code class="language-groovy">apply plugin<span class="token punctuation">:</span> <span class="token string">'java'</span>
apply plugin<span class="token punctuation">:</span> <span class="token string">'maven-publish'</span>

group <span class="token operator">=</span> <span class="token string">'cn.tac.test'</span>
version <span class="token operator">=</span> <span class="token string">'1.0'</span>

publishing <span class="token punctuation">{</span>
    publications <span class="token punctuation">{</span>
        <span class="token function">mavenJava</span><span class="token punctuation">(</span>MavenPublication<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            from components<span class="token operator">.</span>java
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
publishing <span class="token punctuation">{</span>
    repositories <span class="token punctuation">{</span>
        maven <span class="token punctuation">{</span>
            url <span class="token string">"$buildDir/repo"</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Âú®‰ª•‰∏äÈÖçÁΩÆ‰∏≠</p>
<ul>
<li><code>publishing{}</code>ÊòØÁî±Êèí‰ª∂‰∏∫È°πÁõÆÂàõÂª∫ÁöÑÊâ©Â±ïÔºàPublishingExtensionÁ±ªÂûãÔºâÔºåËøô‰∏™Êâ©Â±ïÊèê‰æõ‰∫Ü‰∏§‰∏™blockÔºö<code>publications{}</code>ÔºàMavenPublicationÁ±ªÂûãÔºâÂíå<code>repositories{}</code>ÔºàMavenArtifactRepository Á±ªÂûãÔºâÔºåÂàÜÂà´Áî®‰∫éÈÖçÁΩÆ<code>Ë¶ÅÂèëÂ∏ÉÁöÑÂÜÖÂÆπ</code>Âíå<code>ÁõÆÊ†á‰ªìÂ∫ì</code>ÔºàÂùáÂèØÈÖçÁΩÆÂ§ö‰∏™Ôºâ„ÄÇ</li>
<li><code>mavenJava{}</code>Ë¢´Áß∞‰∏∫ÂèëÂ∏ÉÁªÑ‰ª∂<code>Component</code>ÔºåÁî®‰∫éÈÖçÁΩÆ‰∏ÄÈ°πË¶ÅÂèëÂ∏ÉÁöÑÂÜÖÂÆπÔºåcomponents.javaË°®Á§∫Ëøô‰∏™ÁªÑ‰ª∂ÊòØÈÄöËøáJavaÊèí‰ª∂Ê∑ªÂä†ÁöÑ<code>java</code>ÁªÑ‰ª∂ÔºåÂèØ‰ª•ÁÆÄÂçïÂú∞ÁêÜËß£‰∏∫Â∞±ÊòØÂ∞ÜÂΩìÂâçjavaÈ°πÁõÆ‰Ωú‰∏∫ÂèëÂ∏ÉÂÜÖÂÆπ„ÄÇ</li>
<li><code>maven{}</code>ÊåáÂÆö‰∫Ü‰∏Ä‰∏™Ë¶ÅÂèëÂ∏ÉÁöÑÁõÆÊ†á‰ªìÂ∫ìÔºåÂΩìÂâçÊåáÂÆö‰∫ÜÂΩìÂâçÈ°πÁõÆÁöÑbuildÁõÆÂΩï‰∏ãÁöÑ<code>repo</code>ÁõÆÂΩïÔºåÂç≥ÂèëÂ∏ÉÂà∞Êú¨Âú∞</li>
</ul>
<p>ÊâßË°åpublishing -&gt; publishÔºåÂèØ‰ª•ÁúãÂà∞È°πÁõÆÊàêÂäüÂèëÂ∏ÉÂà∞‰∫Ü<code>build/repo</code>ÁõÆÂΩï‰∏≠„ÄÇ<br><img src="/images/gradle_learn/publishing/build_repo.png" alt="build/repo"></p>
<p><strong>tips</strong></p>
<ul>
<li>‰∏§‰∏™<code>publishing{}</code>ÂùóÁöÑÂÜÖÂÆπ‰πüÂèØ‰ª•ÂêàÂú®‰∏ÄËµ∑ÂÜô</li>
<li>mavenJavaÂè™ÊòØ‰∏Ä‰∏™ÂëΩÂêçÔºåÂπ∂Êó†ÁâπÊÆäÂê´‰πâÔºå‰Ω†‰πüÂèØ‰ª•Â∞ÜÂÖ∂Êõ¥Êç¢‰∏∫Âà´ÁöÑÂêçÁß∞Ôºå‰ΩÜ‰∏çËÉΩ‰∏éÂÖ∂ÂÆÉÂèëÂ∏ÉÁªÑ‰ª∂ÂêçÁß∞ÈáçÂ§ç</li>
<li>mavenJavaÂùó‰∏≠ËøòÂèØ‰ª•ÈÖçÁΩÆË¶ÅÂèëÂ∏ÉÁöÑartifactÁöÑ<code>group</code>„ÄÅ<code>id</code>Âèä<code>version</code>ÔºåÂ¶ÇÊûú‰∏çÊòæÂºèÊåáÂÆöÔºåÂàôÈªòËÆ§ÈááÁî®ÂΩìÂâçÈ°πÁõÆÁöÑÈÖçÁΩÆ</li>
</ul>
<h4 id="ÂèëÂ∏ÉÊ∫êÁ†Å"><a href="#ÂèëÂ∏ÉÊ∫êÁ†Å" class="headerlink" title="ÂèëÂ∏ÉÊ∫êÁ†Å"></a>ÂèëÂ∏ÉÊ∫êÁ†Å</h4><p>Âú®‰∏ä‰∏ÄÊ≠•ÁöÑÂü∫Á°Ä‰∏ä</p>
<ol>
<li>Êñ∞Â¢û‰∏Ä‰∏™Áî®‰∫éËé∑ÂèñÊ∫êÁ†ÅÁöÑtask</li>
<li>ÈÖçÁΩÆÂèëÂ∏ÉÁªÑ‰ª∂Ôºå‰ΩøÂÖ∂ÂèëÂ∏ÉÁöÑÂêåÊó∂È¢ùÂ§ñÂèëÂ∏É‰∏Ä‰∏™ÂåÖÂê´Ê∫êÁ†ÅÁöÑ<code>artifact</code></li>
</ol>
<p><strong>build.gradle</strong></p>
<pre class="line-numbers language-groovy"><code class="language-groovy">‚Ä¶‚Ä¶
<span class="token comment" spellcheck="true">//Ëøô‰∏™taskÂèØ‰ª•Ëé∑ÂèñÂà∞Ê∫êÁ†Å</span>
task <span class="token function">sourceJar</span><span class="token punctuation">(</span>type<span class="token punctuation">:</span> Jar<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    from sourceSets<span class="token operator">.</span>main<span class="token operator">.</span>allJava
<span class="token punctuation">}</span>

publishing <span class="token punctuation">{</span>
    publications <span class="token punctuation">{</span>
        <span class="token function">mavenJava</span><span class="token punctuation">(</span>MavenPublication<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            ‚Ä¶‚Ä¶
            <span class="token comment" spellcheck="true">//ÈÖçÁΩÆÈ¢ùÂ§ñÂèëÂ∏ÉÁöÑartifact</span>
            artifact sourceJar <span class="token punctuation">{</span>
                <span class="token comment" spellcheck="true">//Ëøô‰∏™Â≠óÁ¨¶‰∏≤‰ºö‰Ωú‰∏∫artifactÊñá‰ª∂ÁöÑÂêéÁºÄ</span>
                classifier <span class="token string">"sources"</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
‚Ä¶‚Ä¶
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>ÊâßË°åtask<br><img src="/images/gradle_learn/publishing/build_repo_with_sources.png" alt="sources"></p>
<h4 id="ÂèëÂ∏ÉÂà∞ËøúÁ®ã‰ªìÂ∫ì"><a href="#ÂèëÂ∏ÉÂà∞ËøúÁ®ã‰ªìÂ∫ì" class="headerlink" title="ÂèëÂ∏ÉÂà∞ËøúÁ®ã‰ªìÂ∫ì"></a>ÂèëÂ∏ÉÂà∞ËøúÁ®ã‰ªìÂ∫ì</h4><p>Âè™ÈúÄË¶Å‰øÆÊîπurlÊåáÂêëËøúÁ®ã‰ªìÂ∫ìÂç≥ÂèØ„ÄÇÂêåÊó∂Áî±‰∫éËøúÁ®ã‰ªìÂ∫ìÂ§ßÂ§öÈúÄË¶ÅËÆ§ËØÅÔºåÂõ†Ê≠§ÈÄöÂ∏∏ÈúÄË¶ÅÈÄöËøá<code>credentials{}</code>ÊåáÂÆöÁî®Êà∑ÂêçÂíåÂØÜÁ†Å</p>
<p><strong>build.gradle</strong></p>
<pre class="line-numbers language-groovy"><code class="language-groovy">‚Ä¶‚Ä¶
publishing <span class="token punctuation">{</span>
    repositories <span class="token punctuation">{</span>
        maven <span class="token punctuation">{</span>
            url <span class="token string">"http://172.10.10.66:8081/nexus/content/repositories/releases/"</span>
            credentials <span class="token punctuation">{</span>
                username <span class="token operator">=</span> <span class="token string">"admin"</span>
                password <span class="token operator">=</span> <span class="token string">"admin123"</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
‚Ä¶‚Ä¶
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="Êù°‰ª∂ÂèëÂ∏É"><a href="#Êù°‰ª∂ÂèëÂ∏É" class="headerlink" title="Êù°‰ª∂ÂèëÂ∏É"></a>Êù°‰ª∂ÂèëÂ∏É</h4><p>ËøôÁÇπÁõ∏‰ø°‰ºöÁÇπgroovyÁöÑÂêåÂ≠¶ÈÉΩ‰∏ç‰ºöËßâÂæóÈöæÔºåÁî®<code>if/else</code>Â∞±ÂèØ‰ª•ÂÆåÊàê„ÄÇ‰æãÂ¶Ç‰∏ãÈù¢ÁöÑÈÖçÁΩÆÂÆûÁé∞Ê†πÊçÆversionÂêéÁºÄÊù•ÂÜ≥ÂÆöÊòØÂèëÂ∏ÉÂà∞<code>snapshots</code>ËøòÊòØ<code>releases</code>‰ªìÂ∫ì‰∏≠</p>
<p><strong>build.gralde</strong></p>
<pre class="line-numbers language-groovy"><code class="language-groovy">‚Ä¶‚Ä¶
publishing <span class="token punctuation">{</span>
    repositories <span class="token punctuation">{</span>
        <span class="token keyword">def</span> NEXUS_URL <span class="token operator">=</span> <span class="token string">"http://172.10.10.66:8081/nexus/content/repositories/releases/"</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>project<span class="token operator">.</span>version<span class="token operator">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">"SNAPSHOT"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            NEXUS_URL <span class="token operator">=</span> <span class="token string">"http://172.10.10.66:8081/nexus/content/repositories/snapshots/"</span>
        <span class="token punctuation">}</span>
        maven <span class="token punctuation">{</span>
            url NEXUS_URL
            credentials <span class="token punctuation">{</span>
                username <span class="token operator">=</span> <span class="token string">"admin"</span>
                password <span class="token operator">=</span> <span class="token string">"admin123"</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
‚Ä¶‚Ä¶
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="ÂèëÂ∏ÉÂ§öÈ°πÁõÆ"><a href="#ÂèëÂ∏ÉÂ§öÈ°πÁõÆ" class="headerlink" title="ÂèëÂ∏ÉÂ§öÈ°πÁõÆ"></a>ÂèëÂ∏ÉÂ§öÈ°πÁõÆ</h4><p>Áà∂È°πÁõÆÁöÑtaskÊâßË°åÁöÑÂêåÊó∂‰ºöÊâßË°åÂÖ∂ÊâÄÊúâÂ≠êÈ°πÁõÆÁöÑÂêå‰∏ÄtaskÔºàÊúÄÂ∏∏ËßÅÁöÑÂ¶Çbuild‰ªªÂä°ÔºâÔºåÂõ†Ê≠§Â§öÈ°πÁõÆÂèëÂ∏ÉÂè™ÈúÄË¶ÅÈÖçÁΩÆÂ•ΩÊâÄÊúâÂ≠êÈ°πÁõÆÁöÑÂèëÂ∏ÉÈÖçÁΩÆÂç≥ÂèØ„ÄÇ</p>
<p><strong>build.gradle</strong></p>
<pre class="line-numbers language-groovy"><code class="language-groovy">subprojects <span class="token punctuation">{</span>
    apply plugin<span class="token punctuation">:</span> <span class="token string">'java'</span>
    apply plugin<span class="token punctuation">:</span> <span class="token string">'maven-publish'</span>

    group <span class="token string">"cn.tac.test"</span>
    version <span class="token string">"1.0-SNAPSHOT"</span>

    <span class="token comment" spellcheck="true">//Âõ†‰∏∫Áà∂È°πÁõÆ‰∏çÈúÄË¶ÅÂèëÂ∏ÉÔºåÊâÄ‰ª•Âè™ÈúÄË¶ÅÈÖçÁΩÆÂ≠êÈ°πÁõÆÁöÑÂèëÂ∏ÉÈÖçÁΩÆÂç≥ÂèØ</span>
    publishing <span class="token punctuation">{</span>
        publications <span class="token punctuation">{</span>
            <span class="token function">mavenJava</span><span class="token punctuation">(</span>MavenPublication<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                from components<span class="token operator">.</span>java
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    publishing <span class="token punctuation">{</span>
        repositories <span class="token punctuation">{</span>
            maven <span class="token punctuation">{</span>
                url <span class="token string">"$buildDir/repo"</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>ÊâßË°åtaskÔºåÂèØ‰ª•ÁúãÂà∞ÊØè‰∏™Â≠êÈ°πÁõÆÈÉΩÂèëÂ∏ÉÂà∞‰∫ÜÂÖ∂ÂØπÂ∫îÁöÑ<code>build/repo</code>‰∏≠„ÄÇ</p>
<p><strong>tips</strong></p>
<ul>
<li>Â¶ÇÊûúÂ≠êÊ®°Âùó‰πãÈó¥‰∫íÁõ∏Êúâ‰æùËµñÔºåGradleÂèëÂ∏ÉÊó∂‰ºöËá™Âä®Ëß£ÊûêÂêÑÊ®°ÂùóÁöÑÂÖàÂêéÂèëÂ∏ÉÈ°∫Â∫èÔºåÊó†ÈúÄÊàë‰ª¨Ëá™Â∑±ÈÖçÁΩÆ</li>
</ul>
<h3 id="Â∏∏ËßÅÈóÆÈ¢ò"><a href="#Â∏∏ËßÅÈóÆÈ¢ò" class="headerlink" title="Â∏∏ËßÅÈóÆÈ¢ò"></a>Â∏∏ËßÅÈóÆÈ¢ò</h3><h4 id="ÂèëÂ∏ÉÂêépom-xml‰∏≠È°πÁõÆÁöÑ‰æùËµñscope‰∏∫runtimeÁöÑÈóÆÈ¢ò"><a href="#ÂèëÂ∏ÉÂêépom-xml‰∏≠È°πÁõÆÁöÑ‰æùËµñscope‰∏∫runtimeÁöÑÈóÆÈ¢ò" class="headerlink" title="ÂèëÂ∏ÉÂêépom.xml‰∏≠È°πÁõÆÁöÑ‰æùËµñscope‰∏∫runtimeÁöÑÈóÆÈ¢ò"></a>ÂèëÂ∏ÉÂêépom.xml‰∏≠È°πÁõÆÁöÑ‰æùËµñscope‰∏∫runtimeÁöÑÈóÆÈ¢ò</h4><p>Âú®ÂèëÂ∏ÉÁöÑÊó∂ÂÄôÂèëÁé∞ÔºåÈ°πÁõÆ‰∏≠ÈÄöËøácomplie‰æùËµñÁöÑÁ¨¨‰∏âÊñπÂ∫ìÊàñÂÖ∂ÂÆÉÊ®°ÂùóÔºåÂú®ÂèëÂ∏ÉÂêéÁî±GradleÁîüÊàêÁöÑ<code>pom.xml</code>Êñá‰ª∂‰∏≠Ôºå‰æùËµñÁöÑscopeÈªòËÆ§ÂèòÊàê‰∫Ü<code>runtime</code>ÔºåËÄåÈùûÊàë‰ª¨ÊúüÊúõÁöÑ<code>compile</code></p>
<pre class="line-numbers language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span>
  ‚Ä¶‚Ä¶
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>cn.tac.test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>publishing<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>cn.tac.test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>module1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">></span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>‰∏∫‰∫ÜËææÂà∞ÊúüÊúõÁöÑÊïàÊûúÔºåÂè™ÈúÄË¶ÅÂú®ÂèëÂ∏ÉÈÖçÁΩÆ‰∏≠ÈÄöËøá<code>withXML</code>ÂØπpomËøõË°å‰øÆÊîπÂç≥ÂèØ<br><strong>build.gradle</strong></p>
<pre class="line-numbers language-groovy"><code class="language-groovy">publishing <span class="token punctuation">{</span>
    publications <span class="token punctuation">{</span>
        <span class="token function">mavenJava</span><span class="token punctuation">(</span>MavenPublication<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            from components<span class="token operator">.</span>java

            pom<span class="token operator">.</span>withXml <span class="token punctuation">{</span>
                <span class="token function">asNode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">.</span>dependencies<span class="token operator">.</span><span class="token string">'*'</span><span class="token operator">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    it<span class="token operator">.</span>scope<span class="token operator">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">'runtime'</span> <span class="token operator">&amp;&amp;</span> project<span class="token operator">.</span>configurations<span class="token operator">.</span>compile<span class="token operator">.</span>allDependencies<span class="token operator">.</span>find <span class="token punctuation">{</span> dep <span class="token operator">-></span>
                        dep<span class="token operator">.</span>name <span class="token operator">==</span> it<span class="token operator">.</span>artifactId<span class="token operator">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token operator">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    it<span class="token operator">.</span>scope<span class="token operator">*.</span>value <span class="token operator">=</span> <span class="token string">'compile'</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>ÂÜçÊ¨°ÂèëÂ∏É</p>
<pre class="line-numbers language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span>
  ‚Ä¶‚Ä¶
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>cn.tac.test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>publishing<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>cn.tac.test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>module1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">></span></span>compile<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>tips</strong></p>
<ul>
<li>ÂèÇËÄÉÈìæÊé• <a href="https://stackoverflow.com/questions/31069666/how-to-change-artifactory-runtime-scope-to-compile-scope" target="_blank" rel="noopener">How to change artifactory runtime scope to compile scope?</a></li>
<li><a href="https://docs.gradle.org/current/dsl/org.gradle.api.publish.maven.MavenPom.html#org.gradle.api.publish.maven.MavenPom:withXml(org.gradle.api.Action" target="_blank" rel="noopener">Êõ¥Â§öwithXMLÁöÑ‰ø°ÊÅØ</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://taccisum.github.io/know_crawler.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="taccisum">
      <meta itemprop="description" content="el psy congroo.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Taccisum's blog üòâ">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/know_crawler.html" class="post-title-link" itemprop="url">‰∫ÜËß£Áà¨Ëô´</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-10-01 23:08:55" itemprop="dateCreated datePublished" datetime="2017-10-01T23:08:55+08:00">2017-10-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-03-13 18:05:01" itemprop="dateModified" datetime="2020-03-13T18:05:01+08:00">2020-03-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/Áà¨Ëô´/" itemprop="url" rel="index"><span itemprop="name">Áà¨Ëô´</span></a>
                </span>
            </span>

          
            <span id="/know_crawler.html" class="post-meta-item leancloud_visitors" data-flag-title="‰∫ÜËß£Áà¨Ëô´" title="Views">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/know_crawler.html#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/know_crawler.html" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="‰ªÄ‰πàÊòØÁà¨Ëô´"><a href="#‰ªÄ‰πàÊòØÁà¨Ëô´" class="headerlink" title="‰ªÄ‰πàÊòØÁà¨Ëô´"></a>‰ªÄ‰πàÊòØÁà¨Ëô´</h2><h3 id="ÁÆÄ‰ªã"><a href="#ÁÆÄ‰ªã" class="headerlink" title="ÁÆÄ‰ªã"></a>ÁÆÄ‰ªã</h3><p>Áà¨Ëô´ÔºàWeb CrawlerÔºâÔºå‰πüÂè´<code>ÁΩëÁªúËúòËõõ</code>ÔºàSpliderÔºâÔºåÊòØ‰∏ÄÁßçÁî®Êù•Ëá™Âä®ÊµèËßà<code>wwwÁΩëÈ°µ</code>ÁöÑÁ®ãÂ∫è„ÄÇ<br>Áà¨Ëô´‰∏ÄËà¨‰ªé‰∏Ä‰∏™URLÂá∫ÂèëÔºåËÆøÈóÆÊâÄÊúâ<code>ÂÖ≥ËÅîÁöÑURL</code>ÔºåÂπ∂‰ªé‰∏≠ÊèêÂèñÂá∫ÊÑüÂÖ¥Ë∂£ÁöÑÂÜÖÂÆπ„ÄÇ<br>Áà¨Ëô´ËÆøÈóÆÁΩëÁ´ôÁöÑËøáÁ®ã‰ºö<code>Ê∂àËÄóÁõÆÊ†áÁ≥ªÁªüËµÑÊ∫ê</code>ÔºåÊâÄ‰ª•Êúâ‰∏çÂ∞ëÁΩëÁªúÁ≥ªÁªüÂπ∂‰∏çÈªòËÆ∏Áà¨Ëô´Â∑•‰Ωú„ÄÇÂõ†Ê≠§Áà¨Ëô´Ë¶ÅËÄÉËôëÂà∞<code>ËßÑÂàí</code>„ÄÅ<code>Ë¥üËΩΩ</code>ÔºåÂπ∂‰∏îË¶ÅËÆ≤„ÄéÁ§ºË≤å„ÄèÔºàÂèÇËÄÉ<a href="https://zh.wikipedia.org/wiki/Robots.txt" target="_blank" rel="noopener">robots.txt</a>Ôºâ„ÄÇ</p>
<p><a href="https://zh.wikipedia.org/wiki/%E7%B6%B2%E8%B7%AF%E7%88%AC%E8%9F%B2" target="_blank" rel="noopener">ÁΩëÁªúÁà¨Ëô´</a></p>
<h3 id="Â∫îÁî®Âú∫ÊôØ"><a href="#Â∫îÁî®Âú∫ÊôØ" class="headerlink" title="Â∫îÁî®Âú∫ÊôØ"></a>Â∫îÁî®Âú∫ÊôØ</h3><p>Áà¨Ëô´‰∏ªË¶ÅÊúâ‰ª•‰∏ãÂ∫îÁî®Âú∫ÊôØ</p>
<ul>
<li>ÁßëÂ≠¶Á†îÁ©∂<blockquote>
<p>Â¶ÇÊï∞ÊçÆÊåñÊéò„ÄÅÊú∫Âô®Â≠¶‰π†„ÄÅÂõæÁâáÂ§ÑÁêÜÁ≠â</p>
</blockquote>
</li>
<li>WebÂÆâÂÖ®<blockquote>
<p>Â¶Ç‰ΩøÁî®Áà¨Ëô´ÂØπÁΩëÁ´ôÊòØÂê¶Â≠òÂú®Êüê‰∏ÄÊºèÊ¥ûËøõË°åÊâπÈáèÈ™åËØÅ„ÄÅÂà©Áî®</p>
</blockquote>
</li>
<li>‰∫ßÂìÅÁ†îÂèë<blockquote>
<p>Â¶ÇÈááÈõÜÂêÑ‰∏™ÂïÜÂüéÁâ©ÂìÅ‰ª∑Ê†ºÔºå‰∏∫Áî®Êà∑Êèê‰æõÂ∏ÇÂú∫ÊúÄ‰Ωé‰ª∑</p>
</blockquote>
</li>
<li>ËàÜÊÉÖÁõëÊéß<blockquote>
<p>Â¶ÇÊäìÂèñ„ÄÅÂàÜÊûêÊüêÁ§æ‰∫§Âπ≥Âè∞ÁöÑÊï∞ÊçÆÔºå‰ªéËÄåËØÜÂà´Âá∫ÊüêÁî®Êà∑ÊòØÂê¶‰∏∫Ê∞¥ÂÜõ</p>
</blockquote>
</li>
<li>ÊêúÁ¥¢ÂºïÊìé<blockquote>
<p>Áà¨Ëô´ÊòØÊêúÁ¥¢ÂºïÊìéÁöÑÊ†∏ÂøÉÁªÑÊàêÈÉ®ÂàÜ</p>
</blockquote>
</li>
</ul>
<h3 id="Áà¨Ëô´Á≠ñÁï•"><a href="#Áà¨Ëô´Á≠ñÁï•" class="headerlink" title="Áà¨Ëô´Á≠ñÁï•"></a>Áà¨Ëô´Á≠ñÁï•</h3><p>‰∏Ä‰∏™Áà¨Ëô´ÁöÑÂÆûÁé∞‰∏ªË¶ÅÁî±ÂõõÂ§ßÁ≠ñÁï•ÁªÑÊàê</p>
<ul>
<li>ÈÄâÊã©Á≠ñÁï•<blockquote>
<p>ÊåáÂÆöÈ°µÈù¢‰∏ãËΩΩÁöÑÁ≠ñÁï•ÔºåÂèØÁªÜÂàÜ‰∏∫<br><code>ÈìæÊé•Ë∑üÈöèÈôêÂà∂</code>ÔºåÊåáÁöÑÊòØÁà¨Ëô´Âè™ÊêúÁ¥¢ÁâπÂÆöÁ±ªÂûãÔºàÂ¶ÇHTMLÔºâÁöÑËµÑÊ∫êÔºåÈÅøÂÖçÂèëÂá∫ËøáÂ§öÁöÑËØ∑Ê±Ç„ÄÇÊàñËÄÖÈÅøÂÖçËØ∑Ê±Ç‰∏Ä‰∫õÂ∏¶Êúâ‚Äù?‚ÄùÁöÑËµÑÊ∫êÔºåÈÅøÂÖç‰ªéÁΩëÁ´ô‰∏ãËΩΩÊó†ÈôêÈáèÁöÑURL<br><code>URLËßÑËåÉÂåñ</code>ÔºåÊåáÁöÑÊòØ‰ª•ÊüêÁßç‰∏ÄËá¥ÁöÑÊñπÂºè‰øÆÊîπÂíåÊ†áÂáÜÂåñURLÁöÑËøáÁ®ãÔºåÈÅøÂÖçËµÑÊ∫êÁöÑÈáçÂ§çÁà¨Âèñ<br><code>Ë∑ØÂæÑ‰∏äÁßªÁà¨Âèñ</code>ÔºåÊåáÁà¨ÂèñÊØè‰∏™URLÈáåÊèêÁ§∫ÁöÑÊØè‰∏™Ë∑ØÂæÑÔºå‰æãÂ¶ÇÂØπ‰∫é‚Äùhttp: //<a href="http://www.tac.cn/a/b/c.html&quot;ÔºåËøò‰ºöÁà¨Âèñ&quot;/a/b&quot;„ÄÅ&quot;/a&quot;Âíå&quot;/&quot;Ë∑ØÂæÑ„ÄÇ" target="_blank" rel="noopener">www.tac.cn/a/b/c.html&quot;ÔºåËøò‰ºöÁà¨Âèñ&quot;/a/b&quot;„ÄÅ&quot;/a&quot;Âíå&quot;/&quot;Ë∑ØÂæÑ„ÄÇ</a><br><code>‰∏ªÈ¢òÁà¨Âèñ</code>ÔºåÊåáÊúâÊù°‰ª∂Âú∞ËøõË°åÁà¨ÂèñÔºà‰æãÂ¶ÇÂè™Áà¨Âèñ‰∏épythonÁõ∏ÂÖ≥ÁöÑÈ°µÈù¢Ôºâ„ÄÇ</p>
</blockquote>
</li>
<li>ÈáçÊñ∞ËÆøÈóÆÁ≠ñÁï•<blockquote>
<p>ÁΩëÁ´ôÊòØÁªèÂ∏∏Âä®ÊÄÅÂèòÂåñÁöÑÔºåÈúÄË¶Å‰º∞ÁÆóURLÁöÑ<code>Êñ∞È≤úÂ∫¶</code>Âíå<code>ËøáÊó∂ÊÄß</code>Ôºå‰ª•Á°Æ‰øùÊòØÂê¶ÈúÄË¶ÅÈáçÊñ∞ËÆøÈóÆ„ÄÇ</p>
</blockquote>
</li>
<li>Âπ≥Ë°°Á§ºË≤åÁ≠ñÁï•<blockquote>
<p>‰ΩøÁî®Áà¨Ëô´ÂèØËÉΩÂØºËá¥‰∏Ä‰∏™<code>Á´ôÁÇπÁò´Áó™</code>ÔºåÂõ†Ê≠§Áà¨Ëô´ÈúÄË¶ÅÈÅµÂÆà‰∏Ä‰∫õÂçèËÆÆÊù•ÈÅøÂÖçËøô‰∏™ÈóÆÈ¢ò„ÄÇ</p>
</blockquote>
</li>
<li>Âπ∂Ë°åÁ≠ñÁï•<blockquote>
<p>Âπ∂Ë°åËøêË°å<code>Â§ö‰∏™ËøõÁ®ã</code>ÁöÑÁà¨Ëô´Êó∂Ôºå‰∏∫‰∫ÜÈÅøÂÖçÈáçÂ§ç‰∏ãËΩΩÈ°µÈù¢ÔºåÁà¨Ëô´Á≥ªÁªüÈúÄË¶ÅÁ≠ñÁï•Êù•Â§ÑÁêÜÁà¨Ëô´ËøêË°åÊó∂Êñ∞ÂèëÁé∞ÁöÑURL„ÄÇ</p>
</blockquote>
</li>
</ul>
<h3 id="ÁÆÄÂçïÊû∂ÊûÑ"><a href="#ÁÆÄÂçïÊû∂ÊûÑ" class="headerlink" title="ÁÆÄÂçïÊû∂ÊûÑ"></a>ÁÆÄÂçïÊû∂ÊûÑ</h3><p><img src="/images/crawler_learn/framework.jpg" alt="framework"></p>
<p>Â¶ÇÂõæÔºå‰∏Ä‰∏™ÊúÄÁÆÄÂçïÁöÑÁà¨Ëô´Êû∂ÊûÑËá≥Â∞ëÂåÖÊã¨<code>Áà¨Ëô´Ë∞ÉÂ∫¶Á´Ø</code>„ÄÅ<code>URLÁÆ°ÁêÜÂô®</code>„ÄÅ<code>ÁΩëÈ°µ‰∏ãËΩΩÂô®</code>„ÄÅ<code>ÁΩëÈ°µËß£ÊûêÂô®</code>„ÄÇËøôÂá†‰∏™Ê®°ÂùóÁõ∏‰∫í‰ΩúÁî®Ôºå‰ªéËÄåÊèêÂèñÂá∫<code>Êúâ‰ª∑ÂÄºÁöÑÊï∞ÊçÆ</code>„ÄÇÂÖ∂Êó∂Â∫èÂõæÂ¶Ç‰∏ã</p>
<p><img src="/images/crawler_learn/sequence_chart.jpg" alt="framework"></p>
<p>Áà¨Ëô´Ë∞ÉÂ∫¶Âô®‰ªéURLÁÆ°ÁêÜÂô®‰∏≠Ëé∑ÂèñÂæÖÁà¨ÂèñÁöÑURLÔºå‰∫§Áî±‰∏ãËΩΩÂô®ËøõË°å‰∏ãËΩΩ„ÄÇÁÑ∂ÂêéÂ∞Ü‰∏ãËΩΩÂô®Â∞Ü‰∏ãËΩΩÁöÑÈ°µÈù¢‰∫§Áî±Ëß£ÊûêÂô®ËøõË°åËß£ÊûêÔºåËß£ÊûêÂô®ÂèàÂèçËøáÊù•Â∞ÜËß£ÊûêÂà∞ÁöÑURLÂèçÈ¶àÁªôURLÁÆ°ÁêÜÂô®„ÄÇÂ¶ÇÊ≠§Âæ™ÁéØÂæÄÂ§çÔºåÁõ¥Âà∞Ê≤°ÊúâÂæÖÊäìÂèñÁöÑURLÔºåÂàôÁªìÊùüÁà¨Âèñ„ÄÇ</p>
<p>‚Äî‚Äî‰ª•‰∏äÂõæÁâáÊù•Ëá™ÊÖïËØæÁΩë<a href="http://www.imooc.com/learn/563" target="_blank" rel="noopener">PythonÂºÄÂèëÁÆÄÂçïÁà¨Ëô´</a></p>
<h3 id="URLÁÆ°ÁêÜÂô®"><a href="#URLÁÆ°ÁêÜÂô®" class="headerlink" title="URLÁÆ°ÁêÜÂô®"></a>URLÁÆ°ÁêÜÂô®</h3><p>ÁÆ°ÁêÜÂæÖÊäìÂèñÁöÑURLÈõÜÂêàÂíåÂ∑≤ÊäìÂèñÁöÑURLÈõÜÂêàÔºåÈò≤Ê≠¢<code>ÈáçÂ§çÊäìÂèñ</code>„ÄÅÈò≤Ê≠¢<code>Âæ™ÁéØÊäìÂèñ</code>„ÄÇ</p>
<p>ÂÆûÁé∞ÊñπÂºè</p>
<ul>
<li>ÂÜÖÂ≠ò</li>
<li>ÂÖ≥Á≥ªÊï∞ÊçÆÂ∫ì</li>
<li>NoSQL</li>
</ul>
<h3 id="ÁΩëÈ°µ‰∏ãËΩΩÂô®"><a href="#ÁΩëÈ°µ‰∏ãËΩΩÂô®" class="headerlink" title="ÁΩëÈ°µ‰∏ãËΩΩÂô®"></a>ÁΩëÈ°µ‰∏ãËΩΩÂô®</h3><ul>
<li>urllib2 pythonÂÆòÊñπ *</li>
</ul>
<ul>
<li>requests Á¨¨‰∏âÊñπ</li>
</ul>
<p>ÁΩëÈ°µ‰∏ãËΩΩÂàÜÂá†ÁßçÂú∫ÊôØ</p>
<ul>
<li>Áõ¥Êé•ÈÄöËøáurl‰∏ãËΩΩ</li>
<li>ÈúÄË¶ÅÊ∑ªÂä†ËØ∑Ê±ÇÂèÇÊï∞ÔºåËØ∑Ê±ÇÂ§¥Ôºà‰º™Ë£ÖÊµèËßàÂô®Ôºâ</li>
<li>ÈúÄË¶Å‰º™Ë£ÖÁâπÊÆäÊÉÖÊôØÔºåÂ¶Çcookie„ÄÅproxy„ÄÅhttps„ÄÅhttp redirect</li>
</ul>
<h3 id="È°µÈù¢Ëß£ÊûêÂô®"><a href="#È°µÈù¢Ëß£ÊûêÂô®" class="headerlink" title="È°µÈù¢Ëß£ÊûêÂô®"></a>È°µÈù¢Ëß£ÊûêÂô®</h3><p>‰ªéÁΩëÈ°µ‰∏≠ÊèêÂèñÊúâ‰ª∑ÂÄºÊï∞ÊçÆÁöÑÂ∑•ÂÖ∑</p>
<p>pythonÁöÑÁΩëÈ°µËß£ÊûêÂô®</p>
<ul>
<li>Ê≠£ÂàôË°®ËææÂºè</li>
<li>html.parser pythonÂÆòÊñπ</li>
<li>beautiful soup4 Á¨¨‰∏âÊñπ *</li>
<li>lxml </li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://taccisum.github.io/learn_gradle_4.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="taccisum">
      <meta itemprop="description" content="el psy congroo.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Taccisum's blog üòâ">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/learn_gradle_4.html" class="post-title-link" itemprop="url">GradleÂ≠¶‰π†ÔºàÂõõÔºâ - Ëá™ÂÆö‰πâ‰ªªÂä°</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-09-30 18:26:51" itemprop="dateCreated datePublished" datetime="2017-09-30T18:26:51+08:00">2017-09-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-03-13 18:05:01" itemprop="dateModified" datetime="2020-03-13T18:05:01+08:00">2020-03-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index"><span itemprop="name">java</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/gradle/" itemprop="url" rel="index"><span itemprop="name">gradle</span></a>
                </span>
            </span>

          
            <span id="/learn_gradle_4.html" class="post-meta-item leancloud_visitors" data-flag-title="GradleÂ≠¶‰π†ÔºàÂõõÔºâ - Ëá™ÂÆö‰πâ‰ªªÂä°" title="Views">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/learn_gradle_4.html#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/learn_gradle_4.html" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>ËçâÁ®ø</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://taccisum.github.io/learn_gradle_3.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="taccisum">
      <meta itemprop="description" content="el psy congroo.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Taccisum's blog üòâ">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/learn_gradle_3.html" class="post-title-link" itemprop="url">GradleÂ≠¶‰π†Ôºà‰∏âÔºâ - Â§öÈ°πÁõÆÊûÑÂª∫</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-09-30 10:17:25" itemprop="dateCreated datePublished" datetime="2017-09-30T10:17:25+08:00">2017-09-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-03-13 18:05:01" itemprop="dateModified" datetime="2020-03-13T18:05:01+08:00">2020-03-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index"><span itemprop="name">java</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/gradle/" itemprop="url" rel="index"><span itemprop="name">gradle</span></a>
                </span>
            </span>

          
            <span id="/learn_gradle_3.html" class="post-meta-item leancloud_visitors" data-flag-title="GradleÂ≠¶‰π†Ôºà‰∏âÔºâ - Â§öÈ°πÁõÆÊûÑÂª∫" title="Views">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/learn_gradle_3.html#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/learn_gradle_3.html" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="ÂâçË®Ä"><a href="#ÂâçË®Ä" class="headerlink" title="ÂâçË®Ä"></a>ÂâçË®Ä</h2><p>‰ªé<a href="/2017/09/26/GradleÂ≠¶‰π†Ôºà‰∏ÄÔºâ/">Á¨¨‰∏ÄÁØá</a>‰∏≠Êàë‰ª¨Áü•ÈÅì‰∫ÜÂ¶Ç‰ΩïÊûÑÂª∫‰∏Ä‰∏™ÂçïÈ°πÁõÆÔºå‰ΩÜ‰ªÖ‰ªÖËøôÊ†∑ÊòØ‰∏çÂ§üÁöÑ„ÄÇÂÆûÁé∞Â§öÈ°πÁõÆÁöÑÊûÑÂª∫ÊúâÂà©‰∫é<code>Ê®°ÂùóÂåñ</code>ÔºåÂ¶ÇÊ≠§‰∏ÄÊù•Êàë‰ª¨‰æøËÉΩÊõ¥Â•ΩÂú∞Âú®‰∏Ä‰∏™Â§ßÂûãÈ°πÁõÆ‰∏≠ÂàÜÁ¶ªÊàë‰ª¨ÁöÑÂÖ≥Ê≥®ÁÇπ„ÄÇ</p>
<h2 id="Getting-Started"><a href="#Getting-Started" class="headerlink" title="Getting Started"></a>Getting Started</h2><h3 id="ÂàõÂª∫Ê†πÈ°πÁõÆ"><a href="#ÂàõÂª∫Ê†πÈ°πÁõÆ" class="headerlink" title="ÂàõÂª∫Ê†πÈ°πÁõÆ"></a>ÂàõÂª∫Ê†πÈ°πÁõÆ</h3><p>Êñ∞Âª∫‰∏Ä‰∏™Êñá‰ª∂Â§π‰Ωú‰∏∫Ê†πÈ°πÁõÆÁõÆÂΩïÔºåÊâßË°ågradle init</p>
<pre class="line-numbers language-shell"><code class="language-shell">$ mkdir multi_project
$ gradle init
$ ls
build.gradle    gradle          gradlew         gradlew.bat     settings.gradle
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>ËøôÊ¨°Êàë‰ª¨Ë¶ÅÂÖ≥Ê≥®ÁöÑÈáçÁÇπÊúâ‰∏§‰∏™Êñá‰ª∂</p>
<ul>
<li>build.gradle<blockquote>
<p>ÈÖçÁΩÆ‰∏Ä‰∫õÂ∫îÁî®‰∫éÊâÄÊúâÂ≠êÈ°πÁõÆÁöÑÂÖ¨ÂÖ±ÈÖçÁΩÆ</p>
</blockquote>
</li>
<li>settings.gradle<blockquote>
<p>ÊèèËø∞ÂêÑÈ°πÁõÆ‰πãÈó¥ÁöÑÂÖ≥Á≥ª</p>
</blockquote>
</li>
</ul>
<h3 id="ÂàõÂª∫Â≠êÈ°πÁõÆ"><a href="#ÂàõÂª∫Â≠êÈ°πÁõÆ" class="headerlink" title="ÂàõÂª∫Â≠êÈ°πÁõÆ"></a>ÂàõÂª∫Â≠êÈ°πÁõÆ</h3><p>Âú®Ê†πÁõÆÂΩï‰∏ãÂàÜÂà´ÂàõÂª∫sub-project1Âíåsub-project2ÁõÆÂΩïÔºåÁÑ∂ÂêéÂàÜÂà´‰∏∫ÂÖ∂ÂàõÂª∫build.gradle</p>
<pre class="line-numbers language-shell"><code class="language-shell">$ mkdir sub-project1 sub-project2
$ touch sub-project1/build.gradle sub-project2/build.gradle
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>ÁÑ∂ÂêéÂú®Ê†πÈ°πÁõÆÁöÑsettings.gradle‰∏≠Ê∑ªÂä†‰∏ãÈù¢ÂÜÖÂÆπ‰ª•ÂÖ≥ËÅîÂ≠êÈ°πÁõÆ</p>
<pre class="line-numbers language-groovy"><code class="language-groovy">include <span class="token string">'sub-project1'</span>
include <span class="token string">'sub-project2'</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><strong>tips</strong></p>
<ul>
<li>‰∏ÄÂÆöË¶ÅÊ≥®ÊÑèÂ≠êÈ°πÁõÆÂè™ÈúÄ‰∏∫ÂÖ∂ÂàõÂª∫build.gradleÂç≥ÂèØÔºåËÄåÈùû‰ΩøÁî®gradle initÊåá‰ª§ÂàùÂßãÂåñÔºåËøôÁÇπÂæàÈáçË¶Å</li>
<li>Â≠êÈ°πÁõÆÁöÑbuild.gradleÂè™Áî®‰∫éÈÖçÁΩÆËØ•È°πÁõÆÁâπÊúâÁöÑ‰∏Ä‰∫õÈÖçÁΩÆÈ°πÔºåÂÖ¨ÂÖ±ÁöÑÈÖçÁΩÆÈÄöËøáÊ†πÈ°πÁõÆÁöÑbuild.gradleÈÖçÁΩÆ</li>
</ul>
<h3 id="ÂÖ¨ÂÖ±ÈÖçÁΩÆ"><a href="#ÂÖ¨ÂÖ±ÈÖçÁΩÆ" class="headerlink" title="ÂÖ¨ÂÖ±ÈÖçÁΩÆ"></a>ÂÖ¨ÂÖ±ÈÖçÁΩÆ</h3><p>Âú®Ê†πÈ°πÁõÆÁöÑbuild.gradle‰∏≠Âä†ÂÖ•‰ª•‰∏ãÂÜÖÂÆπ</p>
<pre class="line-numbers language-groovy"><code class="language-groovy">allprojects<span class="token punctuation">{</span>
    group <span class="token operator">=</span> <span class="token string">'cn.tac'</span>
    version <span class="token operator">=</span> <span class="token string">'0.1'</span>
    repositories<span class="token punctuation">{</span>
        maven <span class="token punctuation">{</span>
            url <span class="token string">'http://maven.aliyun.com/nexus/content/groups/public/'</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

subprojects <span class="token punctuation">{</span>
    apply plugin<span class="token punctuation">:</span> <span class="token string">'java'</span>
    sourceCompatibility <span class="token operator">=</span> <span class="token number">1.8</span>
    dependencies <span class="token punctuation">{</span>
        testCompile <span class="token string">'junit:junit:4.12'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li><code>allprojects{}</code> ‰∏∫ÊâÄÊúâÈ°πÁõÆÊ∑ªÂä†ÈÖçÁΩÆÈ°πÔºåÊâÄ‰ª•group„ÄÅversion„ÄÅrepositoriesÈÉΩÊîæÂú®‰∫ÜËøô‰∏™block‰∏ã</li>
<li><code>subprojects{}</code> ‰ªÖ‰ªÖ‰∏∫ÂΩìÂâçÈ°πÁõÆÁöÑÂ≠êÈ°πÁõÆÊ∑ªÂä†ÈÖçÁΩÆÈ°πÔºà‰∏çÂåÖÊã¨ÂΩìÂâçÈ°πÁõÆÊú¨Ë∫´ÔºâÔºåÊâÄ‰ª•Ê†πÈ°πÁõÆ‰∏çÈúÄË¶ÅÁöÑÂÜÖÂÆπÔºàÂ¶Ç‰æùËµñÔºâÊîæÂú®‰∫ÜËøô‰∏™block‰∏ã</li>
</ul>
<h3 id="ÁºñÂÜô‰ª£Á†Å"><a href="#ÁºñÂÜô‰ª£Á†Å" class="headerlink" title="ÁºñÂÜô‰ª£Á†Å"></a>ÁºñÂÜô‰ª£Á†Å</h3><p>ÂàÜÂà´‰∏∫Â≠êÈ°πÁõÆÂàõÂª∫srcÁõÆÂΩï</p>
<pre class="line-numbers language-shell"><code class="language-shell">$ mkdir -p sub-project1/src/test/java/cn/tac/gradle sub-project2/src/test/java/cn/tac/gradle
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>Âπ∂ÂàõÂª∫ÂçïÂÖÉÊµãËØï</p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">package</span> cn<span class="token punctuation">.</span>tac<span class="token punctuation">.</span>gradle<span class="token punctuation">;</span>

<span class="token keyword">import</span> org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>Assert<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>Test<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SubProject1Test</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSimply</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"hello, i'm sub project1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">package</span> cn<span class="token punctuation">.</span>tac<span class="token punctuation">.</span>gradle<span class="token punctuation">;</span>

<span class="token keyword">import</span> org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>Assert<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>Test<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SubProject2Test</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSimply</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"hello, i'm sub project2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="ÊâßË°åÊûÑÂª∫"><a href="#ÊâßË°åÊûÑÂª∫" class="headerlink" title="ÊâßË°åÊûÑÂª∫"></a>ÊâßË°åÊûÑÂª∫</h3><p>ÂÆåÊàê‰∫Ü‰∏äËø∞Ê≠•È™§‰πãÂêéÔºå‰∏çÂá∫ÊÑèÂ§ñÊ≠§Êó∂ÁöÑÁõÆÂΩïÁªìÊûÑÂ∫îËØ•Â¶Ç‰∏ã</p>
<pre class="line-numbers language-shell"><code class="language-shell">$ tree .
.
‚îú‚îÄ‚îÄ build.gradle
‚îú‚îÄ‚îÄ gradle
‚îÇ   ‚îî‚îÄ‚îÄ wrapper
‚îÇ       ‚îú‚îÄ‚îÄ gradle-wrapper.jar
‚îÇ       ‚îî‚îÄ‚îÄ gradle-wrapper.properties
‚îú‚îÄ‚îÄ gradlew
‚îú‚îÄ‚îÄ gradlew.bat
‚îú‚îÄ‚îÄ settings.gradle
‚îú‚îÄ‚îÄ sub-project1
‚îÇ   ‚îú‚îÄ‚îÄ build.gradle
‚îÇ   ‚îî‚îÄ‚îÄ src
‚îÇ       ‚îî‚îÄ‚îÄ test
‚îÇ           ‚îî‚îÄ‚îÄ java
‚îÇ               ‚îî‚îÄ‚îÄ cn
‚îÇ                   ‚îî‚îÄ‚îÄ tac
‚îÇ                       ‚îî‚îÄ‚îÄ gradle
‚îÇ                           ‚îî‚îÄ‚îÄ SubProject1Test.java
‚îî‚îÄ‚îÄ sub-project2
    ‚îú‚îÄ‚îÄ build.gradle
    ‚îî‚îÄ‚îÄ src
        ‚îî‚îÄ‚îÄ test
            ‚îî‚îÄ‚îÄ java
                ‚îî‚îÄ‚îÄ cn
                    ‚îî‚îÄ‚îÄ tac
                        ‚îî‚îÄ‚îÄ gradle
                            ‚îî‚îÄ‚îÄ SubProject2Test.java
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Êé•‰∏ãÊù•Êàë‰ª¨ÂàáÊç¢Âà∞Ê†πÁõÆÂΩï‰∏ãÔºåÊâßË°å</p>
<pre><code>$ sh gradlew build
</code></pre><p>ÂÜçÊü•ÁúãÂ≠êÈ°πÁõÆÁöÑÁõÆÂΩïÔºåÂèëÁé∞ÂàÜÂà´Â§ö‰∫Ü‰∏Ä‰∏™buildÁõÆÂΩïÔºåÂèØËßÅÂú®‰∏∫Ê†πÈ°πÁõÆÊâßË°åÊûÑÂª∫‰ªªÂä°Êó∂ÔºåÂÖ∂includeÁöÑÊâÄÊúâÂ≠êÈ°πÁõÆ‰πüÂàÜÂà´ËøõË°å‰∫ÜÊûÑÂª∫„ÄÇ‰ª•‰∏ãÂàÜÂà´ÊòØ‰∏§‰∏™Â≠êÈ°πÁõÆÁöÑbuild reports<br><img src="/images/gradle_learn/multi_project/subproject1test.png" alt="sub project 1"><br><img src="/images/gradle_learn/multi_project/subproject2test.png" alt="sub project 2"></p>
<h3 id="‰æùËµñÂÖ∂ÂÆÉÈ°πÁõÆ"><a href="#‰æùËµñÂÖ∂ÂÆÉÈ°πÁõÆ" class="headerlink" title="‰æùËµñÂÖ∂ÂÆÉÈ°πÁõÆ"></a>‰æùËµñÂÖ∂ÂÆÉÈ°πÁõÆ</h3><p>Âú®<code>dependencies{}</code>‰∏≠Ê∑ªÂä†‰æùËµñÂç≥ÂèØÔºå‰æãÂ¶Çsub-project2Ë¶Å‰æùËµñsub-project1ÔºåÂèØ‰ª•Âú®sub-project2ÁöÑbuild.gradle‰∏≠Ê∑ªÂä†</p>
<pre class="line-numbers language-groovy"><code class="language-groovy">dependencies <span class="token punctuation">{</span>
  compile <span class="token function">project</span><span class="token punctuation">(</span><span class="token string">':sub-project1'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://taccisum.github.io/learn_gradle_2.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="taccisum">
      <meta itemprop="description" content="el psy congroo.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Taccisum's blog üòâ">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/learn_gradle_2.html" class="post-title-link" itemprop="url">GradleÂ≠¶‰π†Ôºà‰∫åÔºâ - Â∏∏Áî®Êèí‰ª∂</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-09-26 17:56:40" itemprop="dateCreated datePublished" datetime="2017-09-26T17:56:40+08:00">2017-09-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-03-13 18:05:01" itemprop="dateModified" datetime="2020-03-13T18:05:01+08:00">2020-03-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index"><span itemprop="name">java</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/gradle/" itemprop="url" rel="index"><span itemprop="name">gradle</span></a>
                </span>
            </span>

          
            <span id="/learn_gradle_2.html" class="post-meta-item leancloud_visitors" data-flag-title="GradleÂ≠¶‰π†Ôºà‰∫åÔºâ - Â∏∏Áî®Êèí‰ª∂" title="Views">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/learn_gradle_2.html#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/learn_gradle_2.html" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="build-scanÔºàÊûÑÂª∫ÂÆ°ËßÜÔºâÊèí‰ª∂"><a href="#build-scanÔºàÊûÑÂª∫ÂÆ°ËßÜÔºâÊèí‰ª∂" class="headerlink" title="build-scanÔºàÊûÑÂª∫ÂÆ°ËßÜÔºâÊèí‰ª∂"></a>build-scanÔºàÊûÑÂª∫ÂÆ°ËßÜÔºâÊèí‰ª∂</h2><h3 id="‰ªãÁªç"><a href="#‰ªãÁªç" class="headerlink" title="‰ªãÁªç"></a>‰ªãÁªç</h3><blockquote>
<p>A build scan is a shareable and centralized record of a build that provides insights into what happened and why. By applying the build scan plugin to your project, you can create a build scan in the Gradle Cloud for free.<br><a href="https://guides.gradle.org/creating-build-scans/" target="_blank" rel="noopener">Creating Build Scans</a></p>
</blockquote>
<p>Â§ßÊ¶ÇÁöÑÊÑèÊÄùÊòØbuild scanËÉΩ‰∏∫‰Ω†Êèê‰æõÊûÑÂª∫ËøáÁ®ã‰∏≠ÂèëÁîüÁöÑwhat and why‰ø°ÊÅØÔºåÂú®‰Ω†ÊûÑÂª∫ÁöÑÊó∂ÂÄôÔºåÊèí‰ª∂‰ºöÊäìÂèñÊï∞ÊçÆÊèê‰∫§Âà∞<code>Gradle Cloud</code>ÔºåÂêåÊó∂ËøîÂõû‰∏Ä‰∏™ÂåÖÂê´ÊûÑÂª∫‰ø°ÊÅØÁöÑÈìæÊé•„ÄÇ</p>
<p><strong>Â∑•‰ΩúÊµÅÁ®ã</strong><br><img src="https://docs.gradle.com/build-scan-plugin/images/build-scan-service-overview.svg" alt="overview"></p>
<h3 id="ÈÖçÁΩÆ"><a href="#ÈÖçÁΩÆ" class="headerlink" title="ÈÖçÁΩÆ"></a>ÈÖçÁΩÆ</h3><p>ÈÖçÁΩÆÊñπÂºèÂæàÁÆÄÂçïÔºåÂè™ÈúÄË¶ÅÂú®build.gradle‰∏≠Âä†ÂÖ•</p>
<pre class="line-numbers language-groovy"><code class="language-groovy">plugins <span class="token punctuation">{</span>
    id <span class="token string">'com.gradle.build-scan'</span> version <span class="token string">'1.9'</span> 
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>Ê∑ªÂä†‰∫ÜÊèí‰ª∂ÂêéÔºåÂèØ‰ª•ÈÄöËøábuildScanÂùóÊù•ÈÖçÁΩÆÊèí‰ª∂ÔºåÂÖ∂‰∏≠Êúâ‰∏§‰∏™<code>license</code>Áõ∏ÂÖ≥ÁöÑÂ±ûÊÄßÊòØ<strong><em>ÂøÖÈúÄË¶ÅÈÖçÁΩÆ</em></strong>ÁöÑ</p>
<pre class="line-numbers language-groovy"><code class="language-groovy">buildScan <span class="token punctuation">{</span>
    licenseAgreementUrl <span class="token operator">=</span> <span class="token string">'https://gradle.com/terms-of-service'</span>
    licenseAgree <span class="token operator">=</span> <span class="token string">'yes'</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>import changesÔºàÂ¶ÇÊûúÊ≤°ÊúâÂãæÈÄâauto-importÔºâÔºåÂèØ‰ª•ÁúãÂà∞Gradle ProjectÈù¢Êùø‰∏äÂ§ö‰∫Ü‰∏™task<br><img src="/images/gradle_build_scan_task.png" alt=""></p>
<p><strong>tip</strong></p>
<ul>
<li>Â¶ÇÊûúÊ∑ªÂä†Êñ∞ÁöÑpluginÔºåÂ∫îËØ•Á°Æ‰øùbuild-scan<strong><em>ÊÄªÊòØÂú®Á¨¨‰∏Ä‰∏™‰ΩçÁΩÆ</em></strong>ÔºåÂê¶ÂàôÂÖ∂‰πãÂâçÁöÑÊèí‰ª∂ËôΩÁÑ∂‰ªçÁÑ∂Ê≠£Â∏∏Â∑•‰ΩúÔºå‰ΩÜÊòØÊó†Ê≥ïÂà∞ÊäìÂèñÁõ∏ÂÖ≥ÁöÑÊûÑÂª∫‰ø°ÊÅØ</li>
</ul>
<h3 id="‰ΩøÁî®"><a href="#‰ΩøÁî®" class="headerlink" title="‰ΩøÁî®"></a>‰ΩøÁî®</h3><p>ÂÖàÊâßË°åbuild -&gt; buildÔºåÂÜçÊâßË°åËøô‰∏™build scan -&gt; buildScanPublishPreviousÔºå‰∏çÂá∫ÊÑèÂ§ñÂèØ‰ª•ÁúãÂà∞terminal‰∏≠ËøîÂõû‰∫Ü‰∏Ä‰∏™ÈìæÊé•</p>
<pre class="line-numbers language-text"><code class="language-text">9:50:39 PM: Executing external task 'buildScanPublishPrevious'...
:buildScanPublishPrevious

Publishing build scan...
https://gradle.com/s/af72je4qbzhme

BUILD SUCCESSFUL

Total time: 1.283 secs
9:50:41 PM: External task execution finished 'buildScanPublishPrevious'.
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>ÊâìÂºÄÈìæÊé•ÂêéÂèØ‰ª•ÁúãÂà∞ËøôÊ†∑‰∏Ä‰∏™ÁïåÈù¢</p>
<p><img src="/images/gradle_build_scan_insight.png" alt="build scan"></p>
<p>Êé•‰∏ãÊù•Âú®‰ªª‰∏Ä‰∏™ÂçïÂÖÉÊµãËØïÂÜÖÂä†ÂÖ•‰∏ÄË°åËÆ©ÊûÑÂª∫Â§±Ë¥•</p>
<pre class="line-numbers language-java"><code class="language-java">        Assert<span class="token punctuation">.</span><span class="token function">fail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>ÂÜçÊâßË°å‰∏ÄÊ¨°ÊûÑÂª∫ÔºåÊâìÂºÄÈìæÊé•Êü•Áúã<br><img src="/images/gradle_build_scan_insight_failure.png" alt="failed build scan"></p>
<p>ÂèØ‰ª•ÁúãÂà∞Êúâ‰ª•‰∏ãÂá†Â§ß‰ºòÁÇπÔºö</p>
<ul>
<li>‰ø°ÊÅØÂ±ïÁ§∫ÈùûÂ∏∏ÂÖ®Èù¢‰∏∞ÂØå„ÄÅÁõ¥ËßÇ</li>
<li>ËâØÂ•ΩÁöÑÂàÜÁ±ª„ÄÅÊäòÂè†ÔºåËÆ©Áî®Êà∑Ëá™Â∑±ÈÄâÊã©Â±ïÂºÄÊÑüÂÖ¥Ë∂£ÁöÑÂÜÖÂÆπÔºåÈùûÂ∏∏ÂèãÂ•Ω</li>
<li>ÁΩëÈ°µÂΩ¢ÂºèÔºåÈùûÂ∏∏Êòì‰∫éÂàÜ‰∫´ÔºàËøô‰∏ÄÁÇπÊúâÁÇπÁ±ª‰ºº<code>AngularJS</code>ÁöÑÈîôËØØ‰ø°ÊÅØÔºå‰∏çËøáÊ≤°ËÄÉÂØüÊòØË∞ÅÂÄüÈâ¥Ë∞ÅÁöÑÔºåÊàñËÆ∏‰∏§ËÄÖÈÉΩ‰∏çÊòØÂéüÂàõÔºüÔºâ„ÄÇ</li>
</ul>
<p>Áõ∏ÊØî‰πã‰∏ãÔºåËøôÈáå‰∏çÂæó‰∏çÊèêÂà∞‰∏ÄÁõ¥Ë¢´‰∫∫ÂêêÊßΩÁöÑMavenÁöÑÊûÑÂª∫‰ø°ÊÅØÔºåÁúüÂøÉÊòØÈùûÂ∏∏‰∏çÂèãÂ•Ωüòí</p>
<p><strong>tip</strong></p>
<ul>
<li>Â¶ÇÊûúÊûÑÂª∫Êó∂Âá∫Áé∞‚ÄùThere is no previous build data available to publish.‚ÄùÔºåÂèØËÉΩÊòØÊ≤°ÊúâÂÖàÊâßË°å‰ªª‰∏Ätask„ÄÇ</li>
</ul>
<h2 id="ApplicationÊèí‰ª∂"><a href="#ApplicationÊèí‰ª∂" class="headerlink" title="ApplicationÊèí‰ª∂"></a>ApplicationÊèí‰ª∂</h2><h3 id="‰ªãÁªç-1"><a href="#‰ªãÁªç-1" class="headerlink" title="‰ªãÁªç"></a>‰ªãÁªç</h3><p>ApplicationÊèí‰ª∂ÂèØ‰ª•ËÆ©‰Ω†ËΩªÊùæÂú∞Âú®Êú¨Âú∞ÂºÄÂèëÁéØÂ¢É‰∏ã<code>ÊâßË°åJVMÂ∫îÁî®</code>ÔºåÂêåÊó∂ËøòÂèØ‰ª•Â∏ÆÂä©‰Ω†Â∞ÜÂ∫îÁî®ÊâìÂåÖÊàê‰∏Ä‰∏™ÂåÖÂê´‰∫ÜÂêÑÁ±ªÊìç‰ΩúÁ≥ªÁªüÂØπÂ∫î<code>ÂêØÂä®ËÑöÊú¨</code>ÁöÑtar and/or zipÊñá‰ª∂„ÄÇ</p>
<p><a href="https://docs.gradle.org/3.5/userguide/application_plugin.html" target="_blank" rel="noopener">The Application Plugin</a></p>
<h3 id="ÈÖçÁΩÆ-1"><a href="#ÈÖçÁΩÆ-1" class="headerlink" title="ÈÖçÁΩÆ"></a>ÈÖçÁΩÆ</h3><p><strong>build.gradle</strong></p>
<pre class="line-numbers language-groovy"><code class="language-groovy">apply plugin<span class="token punctuation">:</span> <span class="token string">'application'</span>
mainClassName <span class="token operator">=</span> <span class="token string">"cn.tac.test.gradle.Application"</span>    <span class="token comment" spellcheck="true">//ÊåáÂÆöÁ®ãÂ∫èÂÖ•Âè£Á±ª</span>
<span class="token comment" spellcheck="true">//applicationDefaultJvmArgs = ["-Dgreeting.language=en"]      //Â∫îÁî®Á®ãÂ∫èÂêØÂä®Êó∂ÁöÑjvmÂèÇÊï∞</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>Ê∑ªÂä†‰∫ÜApplicationÊèí‰ª∂ÂêéÔºåÈ°πÁõÆ‰ºöÂ§öÂá∫‰ª•‰∏ãÂá†‰∏™task</p>
<ul>
<li>run</li>
<li>startScripts</li>
<li>installDist</li>
<li>distZip</li>
<li>distTar</li>
</ul>
<p>ÂÖ∑‰ΩìÂèØ‰ª•ÈÄöËøátasks‰ªªÂä°Êü•Áúã</p>
<p><strong>tips</strong></p>
<ul>
<li>ÊåâÁÖßÂÆòÊñπÁöÑËØ¥Ê≥ïÔºåApplicationÊèí‰ª∂Â∑≤ÁªèÈöêÂºèÂú∞ÂåÖÊã¨‰∫Ü<code>Java</code>Êèí‰ª∂Âíå<code>Distribution</code>Êèí‰ª∂ÔºåÂõ†Ê≠§Â¶ÇÊûú‰Ω†ÂéüÊù•ÂºïÂÖ•‰∫ÜËøô‰∏§‰∏™Êèí‰ª∂ÔºåÁé∞Âú®ÂèØ‰ª•ÂéªÊéâ‰∫Ü</li>
</ul>
<h3 id="‰ΩøÁî®-1"><a href="#‰ΩøÁî®-1" class="headerlink" title="‰ΩøÁî®"></a>‰ΩøÁî®</h3><p>‰ª•ÊàëÁöÑmainÂáΩÊï∞‰∏∫‰æãÔºàÊ≥®ÊÑèË¶ÅË∑ü<code>mainClassName</code>Â±ûÊÄßÊåáÂÆöÁöÑÁ±ª‰∏ÄËá¥Ôºâ</p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">package</span> cn<span class="token punctuation">.</span>tac<span class="token punctuation">.</span>test<span class="token punctuation">.</span>gradle<span class="token punctuation">;</span>

<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Arrays<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Application</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>args<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
             System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"hello, it's you args: "</span> <span class="token operator">+</span> Arrays<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
             System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"hello, you do not input any args"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="ÊâßË°åÂ∫îÁî®"><a href="#ÊâßË°åÂ∫îÁî®" class="headerlink" title="ÊâßË°åÂ∫îÁî®"></a>ÊâßË°åÂ∫îÁî®</h4><pre class="line-numbers language-shell"><code class="language-shell">$ sh gradlew run

> Task :run
hello, you do not input any args
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>Â¶ÇÊûúË¶Å<code>‰º†ÂÖ•ÂèÇÊï∞</code>ÔºåÂèØ‰ª•ÈÖçÁΩÆ‰∏Ä‰∏ãrun‰ªªÂä°<br><strong>build.gradle</strong></p>
<pre class="line-numbers language-groovy"><code class="language-groovy">run <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>project<span class="token operator">.</span><span class="token function">hasProperty</span><span class="token punctuation">(</span><span class="token string">"myArgs"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      args myArgs
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>‰∏äÈù¢ÈÖçÁΩÆÁöÑÊÑèÊÄùÊòØÔºåÂ¶ÇÊûúÂΩìÂâçÈ°πÁõÆÁöÑprojectÂØπË±°ÂåÖÂê´ÊúâmyArgsÂ±ûÊÄßÔºåÈÇ£‰πàÂú®ÊâßË°åmainÂáΩÊï∞Êó∂Â∞±Â∞ÜËøô‰∏™Â±ûÊÄß‰Ωú‰∏∫ÂèÇÊï∞‰º†ÈÄíÔºå‰πãÂêéÊàë‰ª¨ÂèØ‰ª•ËøôÊ†∑ÊâßË°å</p>
<pre class="line-numbers language-shell"><code class="language-shell">$ sh gradlew run -PmyArgs="123","abc","qaz"

> Task :run
hello, it s you args: [123,abc,qaz]
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>ÂÖ∂‰∏≠-PmyArgsÂàÜ‰∏∫‰∏§ÈÉ®ÂàÜ</p>
<ul>
<li>-PÔºåÂëΩ‰ª§Ë°åoption„ÄÇ‰ΩúÁî®ÊòØÊåáÂÆö‰∏Ä‰∏™Â±ûÊÄßÁöÑÂÄºrunÔºå‰∏çËÉΩÁúÅÂéª</li>
<li>myArgsÔºåÊàë‰ª¨ÂàöÂàöÂú®run‰ªªÂä°‰∏≠Ëá™ÂÆö‰πâÁöÑÂ±ûÊÄßÔºåÈÄöËøá-PÊåáÂÆö</li>
</ul>
<h4 id="ÊâìÂåÖ"><a href="#ÊâìÂåÖ" class="headerlink" title="ÊâìÂåÖ"></a>ÊâìÂåÖ</h4><p>ÊâßË°å‰ª•‰∏ãËÑöÊú¨ÂèØ‰ª•ËøõË°åÊâìÂåÖ</p>
<pre class="line-numbers language-shell"><code class="language-shell">$ sh gradlew distTar distZip
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>ÊâìÂåÖÂ•ΩÁöÑÂÜÖÂÆπÂú®<code>/build/distributions</code>‰∏≠ÔºåÂàÜÂà´Â§ö‰∫Ü‰∏Ä‰∏™tarÊñá‰ª∂Âíå‰∏Ä‰∏™zipÊñá‰ª∂ÔºåËß£ÂéãÂêéÊü•ÁúãÁõÆÂΩïÁªìÊûÑÂ¶Ç‰∏ã</p>
<pre class="line-numbers language-shell"><code class="language-shell">$ tree .
.
‚îú‚îÄ‚îÄ bin
‚îÇ   ‚îú‚îÄ‚îÄ gradle_cli
‚îÇ   ‚îî‚îÄ‚îÄ gradle_cli.bat
‚îî‚îÄ‚îÄ lib
    ‚îî‚îÄ‚îÄ gradle_cli-1.0.jar
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>tips</strong></p>
<ul>
<li>ÂΩìÁÑ∂‰Ω†‰πüÂèØ‰ª•ÈÄöËøábuild‰ªªÂä°Êù•ÊâìÂåÖÔºåbuild‰ªªÂä°‰ºöËá™Âä®Â∞Ü<code>distTar</code>Âíå<code>distZip</code>‰ªªÂä°ÂåÖÊã¨ËøõÂéª</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://taccisum.github.io/learn_gradle_1.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="taccisum">
      <meta itemprop="description" content="el psy congroo.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Taccisum's blog üòâ">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/learn_gradle_1.html" class="post-title-link" itemprop="url">GradleÂ≠¶‰π†Ôºà‰∏ÄÔºâ - Getting Started</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-09-26 15:39:42" itemprop="dateCreated datePublished" datetime="2017-09-26T15:39:42+08:00">2017-09-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-03-13 18:05:01" itemprop="dateModified" datetime="2020-03-13T18:05:01+08:00">2020-03-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index"><span itemprop="name">java</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/gradle/" itemprop="url" rel="index"><span itemprop="name">gradle</span></a>
                </span>
            </span>

          
            <span id="/learn_gradle_1.html" class="post-meta-item leancloud_visitors" data-flag-title="GradleÂ≠¶‰π†Ôºà‰∏ÄÔºâ - Getting Started" title="Views">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/learn_gradle_1.html#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/learn_gradle_1.html" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="ÂâçË®Ä"><a href="#ÂâçË®Ä" class="headerlink" title="ÂâçË®Ä"></a>ÂâçË®Ä</h2><p>ËôΩÁÑ∂‰∏ÄÁõ¥‰ª•Êù•ÈÉΩÁî®Maven‰Ωú‰∏∫javaÈ°πÁõÆÁöÑÊûÑÂª∫Â∑•ÂÖ∑Ôºå‰ΩÜÊó©Â∞±Âê¨ËØ¥ËøáGradleÂ§ßÂêçÔºå‰∫éÊòØ‰ªäÂ§©Áªà‰∫éÊäΩÂá∫Êó∂Èó¥Êù•‰∫ÜËß£‰∏Ä‰∏ãËøôÊ¨æÂè∑Áß∞ÁªìÂêà‰∫ÜAntÂíåMaven‰ºòÁÇπÁöÑÊûÑÂª∫Â∑•ÂÖ∑„ÄÇ<br>ËôΩÁÑ∂GradleÊîØÊåÅÂ§öÁßçËØ≠Ë®ÄÔºå‰ΩÜËøô‰∏™Á≥ªÂàóÁöÑÊñáÁ´†‰∏ªË¶Å‰ª•JavaÈ°πÁõÆÊûÑÂª∫‰∏∫‰∏ª„ÄÇÁî±‰∫éÊú¨‰∫∫‰∏çÊòØÂÅöAndroidÂºÄÂèëÔºåÊâÄ‰ª•Ëøô‰∏™Á≥ªÂàóÁöÑÊñáÁ´†ÂèØËÉΩ‰ºöÊõ¥ÂÅèÂêë‰∫éJava WebÂºÄÂèëËßÜËßí„ÄÇ</p>
<h2 id="Â≠¶‰π†ËµÑÊ∫êÊé®Ëçê"><a href="#Â≠¶‰π†ËµÑÊ∫êÊé®Ëçê" class="headerlink" title="Â≠¶‰π†ËµÑÊ∫êÊé®Ëçê"></a>Â≠¶‰π†ËµÑÊ∫êÊé®Ëçê</h2><p><a href="https://gradle.org/docs/#getting-started" target="_blank" rel="noopener">ÂÆòÊñπDocumentation</a> ÂÜÖÂÆπÈùûÂ∏∏ÂÖ®Èù¢ÔºåÁº∫ÁÇπÊòØÂÖ®Ëã±ÊñáÔºàÂØπ‰∫éËã±ËØ≠Â∑ÆÁöÑÂêåÂ≠¶ÁÆÄÁõ¥ÊòØÂô©Ê¢¶Ôºâ<br><a href="https://pkaq.gitbooks.io/gradletraining/content/" target="_blank" rel="noopener">„ÄäË∑üÊàëÂ≠¶Gradle„Äã</a> Gralde‰∏≠ÊñáÁî®Êà∑ÁªÑÁºñÂÜôÁöÑ‰∏≠ÊñáÁ≥ªÂàóÊïôÁ®ãÔºåÁº∫ÁÇπÊòØËøò‰∏çÂ§üÂÆåÂñÑÔºåÊúâ‰∫õÁ´†ËäÇËøòÊ≤°ÊúâÂÜÖÂÆπ<br><a href="https://lippiouyang.gitbooks.io/gradle-in-action-cn/content/index.html" target="_blank" rel="noopener">„ÄäGradle In Action„Äã‰∏≠ËØëÁâà</a> ‰π¶ÊàëÊ≤°ÂÆåÊï¥ÁúãËøáÔºåÂè™ÊòØÊü•ËµÑÊñôÊó∂ËØªËøáÂá†‰∏™Á´†ËäÇÔºåÊÑüËßâÂÜÖÂÆπËøò‰∏çÈîô</p>
<h2 id="Ê¶ÇË≤å‰∫ÜËß£"><a href="#Ê¶ÇË≤å‰∫ÜËß£" class="headerlink" title="Ê¶ÇË≤å‰∫ÜËß£"></a>Ê¶ÇË≤å‰∫ÜËß£</h2><h3 id="ÂêåÁ±ªÂ∑•ÂÖ∑ÊØîÂØπ"><a href="#ÂêåÁ±ªÂ∑•ÂÖ∑ÊØîÂØπ" class="headerlink" title="ÂêåÁ±ªÂ∑•ÂÖ∑ÊØîÂØπ"></a>ÂêåÁ±ªÂ∑•ÂÖ∑ÊØîÂØπ</h3><p><strong>Ant</strong><br>AntÊòØÁ¨¨‰∏Ä‰∏™‚ÄúÁé∞‰ª£‚ÄùÊûÑÂª∫Â∑•ÂÖ∑Ôºå‰∫é2000Âπ¥ÂèëÂ∏ÉÂü∫‰∫éËøáÁ®ãÂºèÁºñÁ®ãÁöÑideaÔºåÂÖ∑Â§á<code>Êèí‰ª∂ÂäüËÉΩ</code>ÂèäÈÄöËøáÁΩëÁªúËøõË°å<code>‰æùËµñÁÆ°ÁêÜ</code>ÁöÑÂäüËÉΩÔºàÁªìÂêàApache IvyÔºâ„ÄÇ‰∏çË∂≥‰πãÂ§ÑÊòØÈááÁî®XML‰Ωú‰∏∫ËÑöÊú¨ÁºñÂÜôÊ†ºÂºèÔºå‰∏çÁ¨¶ÂêàËøáÁ®ãÂåñÁºñÁ®ãÁöÑÂàùË°∑„ÄÇ</p>
<p><strong>Maven</strong><br>MavenÂá∫Áé∞ÁöÑÁõÆÁöÑÊòØËß£ÂÜ≥AntÂ∏¶Êù•ÁöÑ‰∏Ä‰∫õÈóÆÈ¢òÔºåÂèëÂ∏É‰∫é2004Âπ¥„ÄÇMaven‰æùÈù†<code>Á∫¶ÂÆö</code>Âπ∂Êèê‰æõÁé∞ÊàêÁöÑÂèØË∞ÉÁî®ÁöÑÁõÆÊ†áÔºåÈ¶ñÂàõ‰∫Ü‰ªéÁΩëÁªú‰∏ãËΩΩ‰æùËµñÁöÑÂäüËÉΩ„ÄÇ‰æùÁÑ∂ÈááÁî®XML‰Ωú‰∏∫ÈÖçÁΩÆÊñá‰ª∂ÔºàÂõ†Ê≠§ÂêåÊ†∑ÊúâË∑üAnt‰∏ÄÊ†∑Èöæ‰ª•ÂÆöÂà∂ÂåñÊûÑÂª∫ËøáÁ®ãÁöÑÁº∫ÁÇπÔºâ„ÄÇÂè¶Â§ñMavenËôΩÁÑ∂ËÅöÁÑ¶‰∫é‰æùËµñÁÆ°ÁêÜÔºå‰ΩÜÂπ∂‰∏çËÉΩÂæàÂ•ΩÂú∞Â§ÑÁêÜÁõ∏ÂêåÂ∫ìÊñá‰ª∂‰∏çÂêåÁâàÊú¨‰πãÈó¥ÁöÑÂÜ≤Á™ÅÔºà‰∏çÂ¶ÇIvyÔºâ„ÄÇ</p>
<p><strong>Gradle</strong><br>GradleÁªìÂêà‰∫Ü‰∏§ËÄÖÁöÑ‰ºòÁÇπÔºåÂπ∂Âú®Ê≠§Âü∫Á°Ä‰∏äÂÅö‰∫ÜËÆ∏Â§öÊîπËøõ„ÄÇ<br>Gradle‰ΩøÁî®Âü∫‰∫éGroovyÁöÑ<code>DSL</code>ÁºñÂÜôÊûÑÂª∫ËÑöÊú¨ÔºåÂèØ‰ª•Êõ¥ÁªÜËá¥Âú∞ÊéßÂà∂ÁºñËØëÊâìÂåÖËøáÁ®ãÔºàËøô‰πüÊòØ‰∏∫‰ªÄ‰πàAndroid StudioÈªòËÆ§ÈááÁî®Gradle‰Ωú‰∏∫ÊûÑÂª∫Â∑•ÂÖ∑ÁöÑÂéüÂõ†Ôºâ„ÄÇ<br>GradleÂØπ<code>Â§öÊ®°Âùó</code>È°πÁõÆÊúâÂæàÂ•ΩÁöÑÊîØÊåÅ„ÄÇ<br>GradleÊîØÊåÅ<code>Â§öËØ≠Ë®Ä</code>ÔºåÂåÖÊã¨java„ÄÅgroovy„ÄÅscala„ÄÅc++Á≠â„ÄÇ<br>Gradle‰ΩøÁî®Apache IvyÂ§ÑÁêÜ‰æùËµñÔºåÂõ†Ê≠§‰æùËµñÁÆ°ÁêÜÊñπÈù¢‰ºò‰∫éMaven„ÄÇÂêåÊó∂GradleÂèØ‰ª•‰ΩøÁî®<code>Â§öÁßçÁ±ªÂûãÁöÑËøúÁ®ã‰ªìÂ∫ì</code>ÔºåÂ¶ÇMaven‰ªìÂ∫ì„ÄÅIvy‰ªìÂ∫ì„ÄÇ</p>
<h3 id="ÂÖ≥‰∫éDSL"><a href="#ÂÖ≥‰∫éDSL" class="headerlink" title="ÂÖ≥‰∫éDSL"></a>ÂÖ≥‰∫éDSL</h3><p>DSLÊòØ<code>Domain Specific Language</code>ÁöÑÁº©ÂÜôÔºåÂç≥È¢ÜÂüüÁâπÂÆöËØ≠Ë®Ä„ÄÇÂêåÂ≠óÈù¢‰∏äÁöÑÊÑèÊÄùÔºåÂ∞±ÊòØ‰∏ìÁî®‰∫éÂ§ÑÁêÜÊüê‰∏ÄÈ¢ÜÂüüÈóÆÈ¢òÁöÑÁâπÂÆöËØ≠Ë®ÄÔºå‰æãÂ¶ÇÁî®‰∫éwebÈ°µÈù¢ÂºÄÂèëÁöÑHTMLËØ≠Ë®Ä„ÄÅÁî®‰∫éGNU EmacsÁöÑEmacs LispÁ≠âÔºåÁîöËá≥Êúâ‰∏Ä‰∫õÁÆÄÂçïÁöÑDSLÂè™Áî®‰∫éÊüê‰∏™ÂçïÂ∫îÁî®Á®ãÂ∫èÔºà‰πüÁß∞‰∏∫Mini-LanguagesÔºâ„ÄÇ</p>
<p>Áî±Ê≠§ÂèØËßÅÔºåGradle‰ΩøÁî®ÁöÑDSLÂ∫îËØ•ÊòØ‰∏ÄÁßç‰∏ìÁî®‰∫éÈ°πÁõÆÊûÑÂª∫ÁöÑËØ≠Ë®Ä„ÄÇ</p>
<p><a href="https://en.wikipedia.org/wiki/Domain-specific_language" target="_blank" rel="noopener">Êõ¥Â§öÂÜÖÂÆπ</a></p>
<h2 id="Getting-Started-IntelliJ-IDEA"><a href="#Getting-Started-IntelliJ-IDEA" class="headerlink" title="Getting Started - IntelliJ IDEA"></a>Getting Started - IntelliJ IDEA</h2><p>ÂàùÊ¨°Êé•Ëß¶‰∏∫‰∫ÜËÉΩÂ§üÂø´ÈÄüÁúãÂà∞ÊïàÊûúÔºåÊâÄ‰ª•Áõ¥Êé•‰ΩøÁî®ideÊù•ÂÖ•Èó®„ÄÇ‰∏çËøá‰∏∫‰∫ÜÂØπGradleÊúâÊõ¥Ê∑±ÂÖ•ÁöÑ‰∫ÜËß£ÔºåÂæÄÂêéÁöÑÁªÉ‰π†È°πÁõÆÂ∞ÜÂÖ®ÈÉ®‰ΩøÁî®ÂëΩ‰ª§Ë°åÊûÑÂª∫„ÄÇ</p>
<h3 id="ÂàõÂª∫È°πÁõÆ"><a href="#ÂàõÂª∫È°πÁõÆ" class="headerlink" title="ÂàõÂª∫È°πÁõÆ"></a>ÂàõÂª∫È°πÁõÆ</h3><ol>
<li>New -&gt; Project -&gt; GradleÔºåÊñ∞Âª∫‰∏Ä‰∏™GradleÈ°πÁõÆÔºàÂ∞±ÂÉèMaven‰∏ÄÊ†∑ÔºåIDEAÂÜÖÁΩÆ‰∫ÜGradleÔºåÊâÄ‰ª•‰∏çÈúÄË¶ÅÊàë‰ª¨ÊâãÂä®ÂéªÂÆâË£Ö‰∫ÜÔºâ</li>
<li>Â°´ÂÜôGroupId„ÄÅArtifactId„ÄÅVersionÔºàËøô‰∫õË∑üMavenÊòØ‰∏ÄÊ†∑ÁöÑÔºâ</li>
<li>ËøôÈáåÂãæÈÄâ‰∏äCreate directories for empty content roots automaticallyÈÄâÈ°πÔºåËÆ©IDEAÂ∏ÆÊàë‰ª¨ÂàõÂª∫Â•ΩÁõÆÂΩïÁªìÊûÑ</li>
<li>FinishÔºåÂàùÊ¨°ÊûÑÂª∫ÂèØËÉΩ‰ºöËä±Ë¥πËæÉÈïøÁöÑÊó∂Èó¥ÔºàË∑üMaven‰∏ÄÊ†∑ÔºåË¶Å‰ªéÁΩëÁªú‰∏ãËΩΩ‰∏Ä‰∫õ‰∏úË•øÔºåÊØîÂ¶ÇÈ°πÁõÆÊ®°ÊùøÔºâÔºåÊûÑÂª∫Â•ΩÂêéÁöÑÁõÆÂΩïÁªìÊûÑÂ¶Ç‰∏ã<br><img src="/images/gradle_project_structure.png" alt="project structure"></li>
</ol>
<p>Êù•Áúã‰∏ãÂêÑfolder&amp;fileÁöÑÂê´‰πâÔºö</p>
<ul>
<li>.gradle<blockquote>
<p>GradleÁõ∏ÂÖ≥ÁöÑÊîØÊåÅÊñá‰ª∂Ôºå‰∏ÄËà¨‰∏çÁî®ÂÖ≥ÂøÉ</p>
</blockquote>
</li>
<li>gradle<ul>
<li>wrapper <blockquote>
<p>The wrapper is a small script and supporting jar and properties file that allows a user to execute Gradle tasks even if they don‚Äôt already have Gradle installed. Generating a wrapper also ensures that the user will use the same version of Gradle as the person who created the project.<br><a href="https://guides.gradle.org/creating-new-gradle-builds/" target="_blank" rel="noopener">Creating New Gradle Project</a></p>
</blockquote>
Â§ßÊÑè‰∏∫ÔºåwrapperÈáåÈù¢ÊòØ‰∏Ä‰∫õÁÆÄÂçïÁöÑ<code>ËÑöÊú¨</code>„ÄÅ‰ΩøÁî®Êà∑ËÉΩÂú®Ê≤°ÊúâÂÆâË£ÖGradleÁöÑÊÉÖÂÜµ‰∏ã‰πüËÉΩÊâßË°åGradle‰ªªÂä°ÁöÑsupporting <code>jar</code>Âèä<code>properties</code>Êñá‰ª∂Á≠âÔºåÂêåÊó∂wrapperËøòËÉΩÁ°Æ‰øùÁî®Êà∑ÊâßË°åGradle‰ªªÂä°Êó∂‰ΩøÁî®ÁöÑÁâàÊú¨‰∏éÈ°πÁõÆÂàõÂª∫ËÄÖ‰ΩøÁî®ÁöÑGradleÁâàÊú¨Áõ∏Âêå„ÄÇ<strong>ÊÄª‰πãÊòØ‰∏Ä‰∏™ÂºÄÂèë‰∫∫ÂëòÂü∫Êú¨‰∏çÈúÄË¶ÅÂÖ≥ÂøÉÁöÑÁõÆÂΩï„ÄÇ</strong></li>
</ul>
</li>
<li>src<blockquote>
<p>Ê∫êÁ†ÅÁõÆÂΩïÔºåÈááÁî®‰∫Ü‰∏éMavenÁõ∏ÂêåÁöÑÁªìÊûÑ</p>
</blockquote>
</li>
<li>build.gradle<blockquote>
<p>GradleÁöÑÊûÑÂª∫ÈÖçÁΩÆÊñá‰ª∂Ôºàbuild fileÔºâÔºå<strong><em>ÈúÄË¶ÅÊàë‰ª¨ÁºñÂÜôÂÜÖÂÆπ</em></strong>ÔºàÁ±ª‰ººMavenÁöÑpom.xmlÔºâ„ÄÇ<br>ÊåâÁÖßÂÆòÊñπÁöÑÊèèËø∞ÔºåÊØè‰∏™build.gradleÈÉΩÈÖçÁΩÆ‰∫Ü‰∏Ä‰∏™<code>org.gradle.api.Project</code>Á±ªÁöÑÂÆû‰æãÔºåÂπ∂‰∏îËøô‰∏™ÂÆû‰æã‰ºöÊúâËÆ∏Â§öÂÜÖÂª∫ÁöÑÊñπÊ≥ïÂíåÂ±ûÊÄßÔºàÁ®çÂêéCLIÈ°πÁõÆ‰∏≠ÂèØ‰ª•ÁúãÂà∞gradlew propertiesÂàóÂá∫‰∫Ü‰∏ÄÂ†ÜprojectÁöÑÂ±ûÊÄßÔºâ„ÄÇ<br><a href="https://docs.gradle.org/current/dsl/" target="_blank" rel="noopener">build.gradleÁöÑDSLÂèÇËÄÉ</a></p>
</blockquote>
</li>
<li>gradlew/gradlew.bat<blockquote>
<p>ÂàÜÂà´Áî®‰∫éÁ±ªunixÁ≥ªÁªüÂíåwindowsÁ≥ªÁªü‰∏ãÁöÑwrapperËÑöÊú¨Ôºå‰πãÂêéÂèØ‰ª•ÁúãÂà∞ÔºåÂàõÂª∫‰∫ÜwrapperÂêéÊàë‰ª¨ÊâÄÊúâÁöÑÊåá‰ª§ÈÉΩÈÄöËøáwrapperËÑöÊú¨Êù•ÊâßË°å</p>
</blockquote>
</li>
<li>settings.gradle<blockquote>
<p>‰∏éÂ§öÊ®°ÂùóÈ°πÁõÆÈÖçÁΩÆÊúâÂÖ≥ÁöÑÊñá‰ª∂ÔºåÁî®‰∫éÊèèËø∞È°πÁõÆÊ®°Âùó‰πãÈó¥ÁöÑÂÖ≥Á≥ª</p>
</blockquote>
</li>
</ul>
<h3 id="Hello-World"><a href="#Hello-World" class="headerlink" title="Hello World"></a>Hello World</h3><p>ÂàõÂª∫Â•ΩÈ°πÁõÆÂêéÂèØ‰ª•ÁúãÂà∞ÔºåÂ∑≤ÁªèÊúâËÆ∏Â§öÈÖçÁΩÆÂ•ΩÁöÑ‰∏úË•ø‰∫ÜÔºåÂ¶Çjunit‰æùËµñ„ÄÅGradle wrapperÁ≠âÔºåÊâÄ‰ª•Áé∞Âú®Â∑≤Êàë‰ª¨Áõ¥Êé•ÂèØ‰ª•Áõ¥Êé•ÂÜôÂçïÂÖÉÊµãËØï</p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GettingStarted</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSimply</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"hello gradle"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>ÊâßË°åÂèØ‰ª•ÁúãÂà∞ÊéßÂà∂Âè∞ËæìÂá∫</p>
<pre class="line-numbers language-text"><code class="language-text">hello gradle
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="Getting-Started-CLI"><a href="#Getting-Started-CLI" class="headerlink" title="Getting Started - CLI"></a>Getting Started - CLI</h2><p>‰ΩøÁî®ideÂÜô‰∏™GradleÁöÑHello WorldÁ°ÆÂÆûÈùûÂ∏∏ÁÆÄÂçïÔºå‰ΩÜ‰ΩøÁî®CLIÊù•Êê≠Âª∫È°πÁõÆÔºåËÉΩËÆ©Êàë‰ª¨ÂØπGradleÊúâÊõ¥Âä†Ê∑±ÂÖ•ÁöÑ‰∫ÜËß£„ÄÇ<br>Êé•‰∏ãÊù•Êàë‰ª¨Â∞ÜÂ∞ùËØïÁî®CLIÂÜô‰∏Ä‰∏™Hello World„ÄÇ</p>
<h3 id="ÂÆâË£ÖGradle"><a href="#ÂÆâË£ÖGradle" class="headerlink" title="ÂÆâË£ÖGradle"></a>ÂÆâË£ÖGradle</h3><p>Áî±‰∫éÊàë‰ª¨ËøôÊ¨°Áî®ÁöÑÊòØCLIÔºåÊâÄ‰ª•ÂøÖÈ°ªÊâãÂä®ÂÆâË£ÖGradle„ÄÇ<br>‰ª•ÊàëÁî®ÁöÑMacOS‰∏∫‰æãÔºåÊâìÂºÄterminalÔºårun</p>
<pre class="line-numbers language-shell"><code class="language-shell">$ brew install gradle
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>ÂÆâË£ÖÂâçÂøÖÈ°ªÁ°Æ‰øùÂÆâË£Ö‰∫Ü<code>jdk1.7</code>‰ª•‰∏äÁâàÊú¨ÔºàÊàëÁî®ÁöÑGradle 4.1ÁâàÊú¨ÁöÑË¶ÅÊ±ÇÔºâÔºåÂÖ∂ÂÆÉÁ≥ªÁªüÁî®Êà∑ÂèØ‰ª•ÂèÇËÄÉ<a href="https://gradle.org/install/" target="_blank" rel="noopener">Installation</a></p>
<p>ÁÑ∂ÂêérunÔºåËã•Â∑≤ÊàêÂäüÂÆâË£ÖÂèØ‰ª•ÁúãÂà∞</p>
<pre class="line-numbers language-shell"><code class="language-shell">$ gradle --version
------------------------------------------------------------
Gradle 4.1
------------------------------------------------------------

Build time:   2017-08-07 14:38:48 UTC
Revision:     941559e020f6c357ebb08d5c67acdb858a3defc2

Groovy:       2.4.11
Ant:          Apache Ant(TM) version 1.9.6 compiled on June 29 2015
JVM:          1.8.0_121 (Oracle Corporation 25.121-b13)
OS:           Mac OS X 10.12.4 x86_64
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="ÂàõÂª∫Â∑•Á®ã"><a href="#ÂàõÂª∫Â∑•Á®ã" class="headerlink" title="ÂàõÂª∫Â∑•Á®ã"></a>ÂàõÂª∫Â∑•Á®ã</h3><p>ÂàõÂª∫‰∏Ä‰∏™Á©∫Êñá‰ª∂Â§π‰Ωú‰∏∫Â∑•Á®ãÁõÆÂΩïÔºåÂêåÊó∂ÂàõÂª∫‰∏Ä‰∏™build.gradleÁ©∫Êñá‰ª∂</p>
<pre class="line-numbers language-shell"><code class="language-shell">$ mkdir gradle_cli
$ cd gradle_cli
$ touch build.gradle
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>ÁÑ∂ÂêéÊâßË°å‰ª•‰∏ãÂëΩ‰ª§ÁîüÊàêGradle Wrapper</p>
<pre class="line-numbers language-shell"><code class="language-shell">$ gradle wrapper
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>ÂèØ‰ª•ÁúãÂà∞ÂΩìÂâçÁõÆÂΩïÁöÑÂèòÂåñ</p>
<pre class="line-numbers language-shell"><code class="language-shell">$ tree .
.
‚îú‚îÄ‚îÄ build.gradle
‚îú‚îÄ‚îÄ gradle
‚îÇ   ‚îî‚îÄ‚îÄ wrapper
‚îÇ       ‚îú‚îÄ‚îÄ gradle-wrapper.jar
‚îÇ       ‚îî‚îÄ‚îÄ gradle-wrapper.properties
‚îú‚îÄ‚îÄ gradlew
‚îî‚îÄ‚îÄ gradlew.bat
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Áé∞Âú®ÂèØ‰ª•ÈÄöËøáwrapperËÑöÊú¨Êù•ÊâßË°åÂêÑÈ°π‰ªªÂä°ÔºåËøôÊ†∑ÂèØ‰ª•Á°Æ‰øùÂú®Êõ¥Êç¢‰∫ÜÁéØÂ¢ÉÂêé‰æùÁÑ∂ËÉΩ‰ΩøÁî®ÂàõÂª∫È°πÁõÆÊó∂‰ΩøÁî®ÁöÑGradleÁâàÊú¨ËøõË°åÊûÑÂª∫„ÄÇ</p>
<p>Êü•Áúãproperties‰ø°ÊÅØÔºà‰ª•‰∏ãËæìÂá∫ÂÅö‰∫ÜÂ§ßÈáèÂà†ÂáèÔºâ</p>
<pre class="line-numbers language-shell"><code class="language-shell">$ sh gradlew properties
> Task :properties

------------------------------------------------------------
Root project
------------------------------------------------------------

allprojects: [root project 'gradle_cli']
ant: org.gradle.api.internal.project.DefaultAntBuilder@70e298ee
‚Ä¶‚Ä¶
buildDir: /Users/tac/Documents/studyspace/src/java/gradle_cli/build
buildFile: /Users/tac/Documents/studyspace/src/java/gradle_cli/build.gradle
buildScriptSource: org.gradle.groovy.scripts.UriScriptSource@460e8e7a
‚Ä¶‚Ä¶
depth: 0
description: null
displayName: root project 'gradle_cli'
‚Ä¶‚Ä¶
gradle: build 'gradle_cli'
group:
‚Ä¶‚Ä¶
plugins: [org.gradle.api.plugins.HelpTasksPlugin@23fb712b]
‚Ä¶‚Ä¶
project: root project 'gradle_cli'
‚Ä¶‚Ä¶
projectDir: /Users/tac/Documents/studyspace/src/java/gradle_cli
‚Ä¶‚Ä¶
repositories: repository container
resources: org.gradle.api.internal.resources.DefaultResourceHandler@7cad9556
rootDir: /Users/tac/Documents/studyspace/src/java/gradle_cli
rootProject: root project 'gradle_cli'
‚Ä¶‚Ä¶
state: project state 'EXECUTED'
status: release
subprojects: []
tasks: task set
version: unspecified
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>ÂèØ‰ª•ÁúãÂà∞ÂÖ∂‰∏≠Â§ßÂ§öÊï∞Â±ûÊÄßÈÉΩÂ∑≤ÁªèÊúâ‰∫ÜÈªòËÆ§ÁöÑÂÄºÔºåËøô‰πüÊÅ∞Â•ΩÈ™åËØÅ‰∫ÜGradleÁ∫¶ÂÆö‰ºò‰∫éÈÖçÁΩÆÁöÑÂéüÂàô„ÄÇ<br>Â¶ÇÊûúÊàë‰ª¨ÈúÄË¶Å‰øÆÊîπ‰∏Ä‰∫õÂ±ûÊÄßÂÄºÔºåÂèØ‰ª•ÈÄöËøáÂÜôbuild.gradleÊñá‰ª∂Êù•ËøõË°åÈÖçÁΩÆ</p>
<pre class="line-numbers language-groovy"><code class="language-groovy">description <span class="token operator">=</span> <span class="token string">'A Gradle build project for CLI'</span>
version <span class="token operator">=</span> <span class="token string">'1.0'</span>
group <span class="token operator">=</span> <span class="token string">'cn.tac.test'</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>ÂÜçÊ¨°Êü•ÁúãpropertiesÂèØ‰ª•ÁúãÂà∞Â±ûÊÄßÂ∑≤ÁªèÊõ¥Êîπ‰∫Ü</p>
<pre class="line-numbers language-shell"><code class="language-shell">$ sh gradlew properties | grep -E "group|description|version"
description: A Gradle build project for CLI
group: cn.tac.test
version: 1.0
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>tip</strong></p>
<ul>
<li>‰Ω†‰πüÂèØ‰ª•ÂÖàÁîüÊàêWrapperÂÜçÂàõÂª∫build.gradleÔºåÂπ∂‰∏ç‰ºöÊúâÂΩ±Âìç</li>
<li>Èô§‰∫ÜÊâãÂä®ÂàõÂª∫‰πãÂ§ñÔºåËøòÂèØ‰ª•ÈÄöËøá<code>gradle init</code>Êåá‰ª§Êù•ÂàùÂßãÂåñÈ°πÁõÆ„ÄÇÂàùÂßãÂåñÁöÑÂÜÖÂÆπÂåÖÊã¨ÊâßË°ågradle wrapperÔºå‰ª•ÂèäËá™Âä®ÁîüÊàêbuild.gradleÂíåsettings.gradleÔºåÂπ∂‰∏îÁîüÊàêÁöÑÊñá‰ª∂ÈáåÈù¢Â∑≤ÁªèÊúâ‰∫Ü‰∏Ä‰∫õËá™Âä®ÁîüÊàêÁöÑÈÖçÁΩÆÔºàÈªòËÆ§ÊòØÊ≥®ÈáäÁä∂ÊÄÅÔºåÂç≥Êú™ÂêØÁî®Ôºâ„ÄÇ</li>
</ul>
<h3 id="ÈÖçÁΩÆÁéØÂ¢É"><a href="#ÈÖçÁΩÆÁéØÂ¢É" class="headerlink" title="ÈÖçÁΩÆÁéØÂ¢É"></a>ÈÖçÁΩÆÁéØÂ¢É</h3><p>Áî±‰∫éÊàë‰ª¨ÊòØÊâãÂä®ÂàõÂª∫ÁöÑÁ©∫build.gradleÔºåË¶ÅÊûÑÂª∫javaÈ°πÁõÆÔºåÊàë‰ª¨ËøòÈúÄË¶ÅÂÅö‰∏Ä‰∫õÁÆÄÂçïÁöÑÈÖçÁΩÆ„ÄÇ<br>Âú®build.gradleÂä†ÂÖ•ÁõÆÊ†áÂ∑•Á®ãËØ≠Ë®ÄÔºà‰∏äÈù¢ÊèêËøáÔºåGradleÊòØÊîØÊåÅÂ§öËØ≠Ë®ÄÁöÑÔºâÂèäÁâàÊú¨„ÄÅ‰æùËµñÂèä‰∏ãËΩΩ‰æùËµñÁöÑ‰ªìÂ∫ìÁöÑÈÖçÁΩÆ</p>
<pre class="line-numbers language-groovy"><code class="language-groovy">apply plugin<span class="token punctuation">:</span> <span class="token string">'java'</span>
sourceCompatibility <span class="token operator">=</span> <span class="token number">1.8</span>

repositories <span class="token punctuation">{</span>
    <span class="token function">mavenCentral</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

dependencies <span class="token punctuation">{</span>
    testCompile group<span class="token punctuation">:</span> <span class="token string">'junit'</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'junit'</span><span class="token punctuation">,</span> version<span class="token punctuation">:</span> <span class="token string">'4.12'</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>tips</strong></p>
<ul>
<li>ÂèØ‰ª•ÈÄöËøá<code>dependencies</code>‰ªªÂä°Êü•ÁúãÂΩìÂâçÈ°πÁõÆÁöÑ‰æùËµñ‰ø°ÊÅØ„ÄÇ</li>
</ul>
<h3 id="Hello-World-1"><a href="#Hello-World-1" class="headerlink" title="Hello World"></a>Hello World</h3><p>ÈÖçÁΩÆÂ•ΩÁéØÂ¢ÉÂêéÔºåÊàë‰ª¨ÂàõÂª∫Ê∫êÁ†ÅÁõÆÂΩïÂèäÂçïÂÖÉÊµãËØïÁ±ª</p>
<pre class="line-numbers language-shell"><code class="language-shell">$ mkdir -p src/main/java src/main/resources src/test/java src/test/resources
$ cd src/test/java
$ mkdir -p cn/tac/test
$ cd cn/tac/test
$ touch HelloWorld.java
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>ÁÑ∂ÂêéÊâßË°åÊûÑÂª∫ÔºåÂ¶ÇÊûú‰∏çÁü•ÈÅìÊúâÂì™‰∫õtasksÂèØ‰ª•ÊâßË°åÔºåÂèØ‰ª•ÈÄöËøá‰ª•‰∏ãÂëΩ‰ª§Êù•Êü•Áúã</p>
<pre class="line-numbers language-shell"><code class="language-shell">$ sh gradlew tasks

> Task :tasks

------------------------------------------------------------
All tasks runnable from root project - A Gradle build project for CLI
------------------------------------------------------------

Build tasks
-----------
assemble - Assembles the outputs of this project.
build - Assembles and tests this project.
‚Ä¶‚Ä¶
Build Setup tasks
-----------------
init - Initializes a new Gradle build.
wrapper - Generates Gradle wrapper files.
Documentation tasks
-------------------
javadoc - Generates Javadoc API documentation for the main source code.
Help tasks
----------
‚Ä¶‚Ä¶
Verification tasks
------------------
check - Runs all checks.
test - Runs the unit tests.

Rules
-----
‚Ä¶‚Ä¶
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-shell"><code class="language-shell">$ sh gradlew build
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>ÂÆå‰∫ÜÂèØ‰ª•ÁúãËßÅÈ°πÁõÆÊ†πÁõÆÂΩï‰∏ãÂ§ö‰∫Ü‰∏Ä‰∏™buildÁõÆÂΩïÔºåÈáåÈù¢ÁöÑÂÜÖÂÆπÂ∞±ÊòØÊâßË°åÊûÑÂª∫ÁöÑ‰∫ßÁâ©„ÄÇ‰∏éMaven‰∏çÂêåÁöÑÊòØÔºåÊúâ‰∏™reportsÁõÆÂΩïÊòØGradleÁîüÊàêÁöÑHTMLÊ†ºÂºèÁöÑÊûÑÂª∫Êä•ÂëäÔºåÂèØ‰ª•ÈÄöËøáÊµèËßàÂô®ÊâìÂºÄÊü•Áúã<br><img src="/images/gradle_build_reports.jpg" alt="build reports"></p>
<p><strong>tip</strong></p>
<ul>
<li>ÊúâÊ≤°ÊúâÂèëÁé∞sh gradlew tasksÂá∫Êù•ÁöÑÂàóË°®ÊúâÁÇπÂÉèIDEA Gradle ProjectÈù¢Êùø‰∏äÁöÑtasksËäÇÁÇπÔºüüòÉ</li>
<li>Âú®È°πÁõÆÊ†πÁõÆÂΩï‰∏ã‰ΩøÁî®gradleË∑ügradlewÊâßË°åtaskÁöÑÊïàÊûúÂü∫Êú¨ÊòØ‰∏ÄÊ†∑ÁöÑÔºåÂå∫Âà´Âú®‰∫égradle‰ºö‰ΩøÁî®Êú¨Âú∞ÂÆâË£ÖÁöÑGradleÁâàÊú¨ËøõË°åÊûÑÂª∫ÔºåËÄågradlew‰ºö‰ΩøÁî®ÂàõÂª∫È°πÁõÆÊó∂‰ΩøÁî®ÁöÑgradleÁâàÊú¨ËøõË°åÊûÑÂª∫ÔºåÂ¶ÇÊûúÊú¨Âú∞Ê≤°ÊúâÊêúÁ¥¢Âà∞Ëøô‰∏™ÁâàÊú¨ÔºåÂàô‰ºöËá™Âä®‰∏ãËΩΩ</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/4/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="taccisum"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">taccisum</p>
  <div class="site-description" itemprop="description">el psy congroo.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">32</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">27</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/taccisum" title="GitHub ‚Üí https://github.com/taccisum" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="/taccisum@gmail.com" title="G-Mail ‚Üí taccisum@gmail.com"><i class="fa fa-envelope fa-fw"></i>G-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">taccisum</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script>
<script src="/js/schemes/muse.js"></script>
<script src="/js/next-boot.js"></script>



  




  <script src="/js/local-search.js"></script>












  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : 'q1GTC85aQcIvQIf3p9tWLTvW-gzGzoHsz',
      appKey     : 'OjWCd5UV1xcOyCEfsSzu9w7z',
      placeholder: "Ê¨¢ËøéÁïÖÊâÄÊ¨≤Ë®Ä",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : true,
      lang       : '' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

</body>
</html>
