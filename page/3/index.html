<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2" />






<meta name="description" content="el psy congroo.">
<meta property="og:type" content="website">
<meta property="og:title" content="taccisum ğŸ˜‰">
<meta property="og:url" content="https://taccisum.github.io/page/3/index.html">
<meta property="og:site_name" content="taccisum ğŸ˜‰">
<meta property="og:description" content="el psy congroo.">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="taccisum ğŸ˜‰">
<meta name="twitter:description" content="el psy congroo.">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://taccisum.github.io/page/3/"/>





  <title>taccisum ğŸ˜‰</title>
  














<link rel="stylesheet" href="/css/prism-ghcolors.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">taccisum ğŸ˜‰</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            Search
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="Searching..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://taccisum.github.io/instantiationexception_on_mybatistest.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="taccisum">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/Avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="taccisum ğŸ˜‰">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/instantiationexception_on_mybatistest.html" itemprop="url">åœ¨@MybatisTestä¸­ä½¿ç”¨é€šç”¨Mapperå‡ºç°InstantiationExceptionçš„é—®é¢˜</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-11-15T11:42:36+08:00">
                2017-11-15
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/è¸©å‘æ—¥è®°/" itemprop="url" rel="index">
                    <span itemprop="name">è¸©å‘æ—¥è®°</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h2><p>åœ¨Spring Bootç¯å¢ƒä¸­ä½¿ç”¨<a href="http://www.mybatis.org/spring-boot-starter/mybatis-spring-boot-test-autoconfigure/" target="_blank" rel="noopener">@MybatisTest</a>æ³¨è§£é’ˆå¯¹Mapperå†™å•å…ƒæµ‹è¯•çš„æ—¶å€™ï¼Œç”±äºåŒæ—¶å¼•å…¥äº†<a href="https://github.com/abel533/Mapper" target="_blank" rel="noopener">é€šç”¨Mapper</a>ï¼Œåœ¨å•å…ƒæµ‹è¯•ä¸­è°ƒç”¨é€šç”¨Mapperçš„æ–¹æ³•è¿›è¡ŒCRUDæ—¶ä¼šå‡ºç°<code>InstantiationException</code>å¼‚å¸¸</p>
<pre class="line-numbers language-java"><code class="language-java">org<span class="token punctuation">.</span>mybatis<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>MyBatisSystemException<span class="token operator">:</span> nested exception is org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>builder<span class="token punctuation">.</span>BuilderException<span class="token operator">:</span> Error invoking SqlProvider <span class="token function">method</span> <span class="token punctuation">(</span>tk<span class="token punctuation">.</span>mybatis<span class="token punctuation">.</span>mapper<span class="token punctuation">.</span>provider<span class="token punctuation">.</span>base<span class="token punctuation">.</span>BaseSelectProvider<span class="token punctuation">.</span>dynamicSQL<span class="token punctuation">)</span><span class="token punctuation">.</span>  Cause<span class="token operator">:</span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>InstantiationException<span class="token operator">:</span> tk<span class="token punctuation">.</span>mybatis<span class="token punctuation">.</span>mapper<span class="token punctuation">.</span>provider<span class="token punctuation">.</span>base<span class="token punctuation">.</span>BaseSelectProvider

    at org<span class="token punctuation">.</span>mybatis<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>MyBatisExceptionTranslator<span class="token punctuation">.</span><span class="token function">translateExceptionIfPossible</span><span class="token punctuation">(</span>MyBatisExceptionTranslator<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">77</span><span class="token punctuation">)</span>
    at org<span class="token punctuation">.</span>mybatis<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>SqlSessionTemplate$SqlSessionInterceptor<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>SqlSessionTemplate<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">446</span><span class="token punctuation">)</span>
    at com<span class="token punctuation">.</span>sun<span class="token punctuation">.</span>proxy<span class="token punctuation">.</span>$Proxy89<span class="token punctuation">.</span><span class="token function">selectOne</span><span class="token punctuation">(</span>Unknown Source<span class="token punctuation">)</span>
    at org<span class="token punctuation">.</span>mybatis<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>SqlSessionTemplate<span class="token punctuation">.</span><span class="token function">selectOne</span><span class="token punctuation">(</span>SqlSessionTemplate<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">166</span><span class="token punctuation">)</span>
    at org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>binding<span class="token punctuation">.</span>MapperMethod<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>MapperMethod<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">82</span><span class="token punctuation">)</span>
    at org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>binding<span class="token punctuation">.</span>MapperProxy<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>MapperProxy<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">59</span><span class="token punctuation">)</span>
    at com<span class="token punctuation">.</span>sun<span class="token punctuation">.</span>proxy<span class="token punctuation">.</span>$Proxy91<span class="token punctuation">.</span><span class="token function">selectByPrimaryKey</span><span class="token punctuation">(</span>Unknown Source<span class="token punctuation">)</span>
    at com<span class="token punctuation">.</span>ikentop<span class="token punctuation">.</span>biz<span class="token punctuation">.</span>provider<span class="token punctuation">.</span>mapper<span class="token punctuation">.</span>hh<span class="token punctuation">.</span>ImageRecordMapperTest<span class="token punctuation">.</span><span class="token function">testSimply</span><span class="token punctuation">(</span>ImageRecordMapperTest<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">33</span><span class="token punctuation">)</span>
    at sun<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span>NativeMethodAccessorImpl<span class="token punctuation">.</span><span class="token function">invoke0</span><span class="token punctuation">(</span>Native Method<span class="token punctuation">)</span>
    at sun<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span>NativeMethodAccessorImpl<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>NativeMethodAccessorImpl<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">62</span><span class="token punctuation">)</span>
    at sun<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span>DelegatingMethodAccessorImpl<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>DelegatingMethodAccessorImpl<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">43</span><span class="token punctuation">)</span>
    at java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span>Method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>Method<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">498</span><span class="token punctuation">)</span>
    at org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>runners<span class="token punctuation">.</span>model<span class="token punctuation">.</span>FrameworkMethod$<span class="token number">1</span><span class="token punctuation">.</span><span class="token function">runReflectiveCall</span><span class="token punctuation">(</span>FrameworkMethod<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">50</span><span class="token punctuation">)</span>
    at org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>internal<span class="token punctuation">.</span>runners<span class="token punctuation">.</span>model<span class="token punctuation">.</span>ReflectiveCallable<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>ReflectiveCallable<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">12</span><span class="token punctuation">)</span>
    at org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>runners<span class="token punctuation">.</span>model<span class="token punctuation">.</span>FrameworkMethod<span class="token punctuation">.</span><span class="token function">invokeExplosively</span><span class="token punctuation">(</span>FrameworkMethod<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">47</span><span class="token punctuation">)</span>
    at org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>internal<span class="token punctuation">.</span>runners<span class="token punctuation">.</span>statements<span class="token punctuation">.</span>InvokeMethod<span class="token punctuation">.</span><span class="token function">evaluate</span><span class="token punctuation">(</span>InvokeMethod<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">17</span><span class="token punctuation">)</span>
    at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span>junit4<span class="token punctuation">.</span>statements<span class="token punctuation">.</span>RunBeforeTestMethodCallbacks<span class="token punctuation">.</span><span class="token function">evaluate</span><span class="token punctuation">(</span>RunBeforeTestMethodCallbacks<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">75</span><span class="token punctuation">)</span>
    at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span>junit4<span class="token punctuation">.</span>statements<span class="token punctuation">.</span>RunAfterTestMethodCallbacks<span class="token punctuation">.</span><span class="token function">evaluate</span><span class="token punctuation">(</span>RunAfterTestMethodCallbacks<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">86</span><span class="token punctuation">)</span>
    at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span>junit4<span class="token punctuation">.</span>statements<span class="token punctuation">.</span>SpringRepeat<span class="token punctuation">.</span><span class="token function">evaluate</span><span class="token punctuation">(</span>SpringRepeat<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">84</span><span class="token punctuation">)</span>
    at org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>runners<span class="token punctuation">.</span>ParentRunner<span class="token punctuation">.</span><span class="token function">runLeaf</span><span class="token punctuation">(</span>ParentRunner<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">325</span><span class="token punctuation">)</span>
    at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span>junit4<span class="token punctuation">.</span>SpringJUnit4ClassRunner<span class="token punctuation">.</span><span class="token function">runChild</span><span class="token punctuation">(</span>SpringJUnit4ClassRunner<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">252</span><span class="token punctuation">)</span>
    at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span>junit4<span class="token punctuation">.</span>SpringJUnit4ClassRunner<span class="token punctuation">.</span><span class="token function">runChild</span><span class="token punctuation">(</span>SpringJUnit4ClassRunner<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">94</span><span class="token punctuation">)</span>
    at org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>runners<span class="token punctuation">.</span>ParentRunner$<span class="token number">3</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>ParentRunner<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">290</span><span class="token punctuation">)</span>
    at org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>runners<span class="token punctuation">.</span>ParentRunner$<span class="token number">1</span><span class="token punctuation">.</span><span class="token function">schedule</span><span class="token punctuation">(</span>ParentRunner<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">71</span><span class="token punctuation">)</span>
    at org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>runners<span class="token punctuation">.</span>ParentRunner<span class="token punctuation">.</span><span class="token function">runChildren</span><span class="token punctuation">(</span>ParentRunner<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">288</span><span class="token punctuation">)</span>
    at org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>runners<span class="token punctuation">.</span>ParentRunner<span class="token punctuation">.</span>access$<span class="token function">000</span><span class="token punctuation">(</span>ParentRunner<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">58</span><span class="token punctuation">)</span>
    at org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>runners<span class="token punctuation">.</span>ParentRunner$<span class="token number">2</span><span class="token punctuation">.</span><span class="token function">evaluate</span><span class="token punctuation">(</span>ParentRunner<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">268</span><span class="token punctuation">)</span>
    at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span>junit4<span class="token punctuation">.</span>statements<span class="token punctuation">.</span>RunBeforeTestClassCallbacks<span class="token punctuation">.</span><span class="token function">evaluate</span><span class="token punctuation">(</span>RunBeforeTestClassCallbacks<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">61</span><span class="token punctuation">)</span>
    at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span>junit4<span class="token punctuation">.</span>statements<span class="token punctuation">.</span>RunAfterTestClassCallbacks<span class="token punctuation">.</span><span class="token function">evaluate</span><span class="token punctuation">(</span>RunAfterTestClassCallbacks<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">70</span><span class="token punctuation">)</span>
    at org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>runners<span class="token punctuation">.</span>ParentRunner<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>ParentRunner<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">363</span><span class="token punctuation">)</span>
    at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span>junit4<span class="token punctuation">.</span>SpringJUnit4ClassRunner<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>SpringJUnit4ClassRunner<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">191</span><span class="token punctuation">)</span>
    at org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>runner<span class="token punctuation">.</span>JUnitCore<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>JUnitCore<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">137</span><span class="token punctuation">)</span>
    at com<span class="token punctuation">.</span>intellij<span class="token punctuation">.</span>junit4<span class="token punctuation">.</span>JUnit4IdeaTestRunner<span class="token punctuation">.</span><span class="token function">startRunnerWithArgs</span><span class="token punctuation">(</span>JUnit4IdeaTestRunner<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">68</span><span class="token punctuation">)</span>
    at com<span class="token punctuation">.</span>intellij<span class="token punctuation">.</span>rt<span class="token punctuation">.</span>execution<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>IdeaTestRunner$Repeater<span class="token punctuation">.</span><span class="token function">startRunnerWithArgs</span><span class="token punctuation">(</span>IdeaTestRunner<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">51</span><span class="token punctuation">)</span>
    at com<span class="token punctuation">.</span>intellij<span class="token punctuation">.</span>rt<span class="token punctuation">.</span>execution<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>JUnitStarter<span class="token punctuation">.</span><span class="token function">prepareStreamsAndStart</span><span class="token punctuation">(</span>JUnitStarter<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">237</span><span class="token punctuation">)</span>
    at com<span class="token punctuation">.</span>intellij<span class="token punctuation">.</span>rt<span class="token punctuation">.</span>execution<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>JUnitStarter<span class="token punctuation">.</span><span class="token function">main</span><span class="token punctuation">(</span>JUnitStarter<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">70</span><span class="token punctuation">)</span>
Caused by<span class="token operator">:</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>builder<span class="token punctuation">.</span>BuilderException<span class="token operator">:</span> Error invoking SqlProvider <span class="token function">method</span> <span class="token punctuation">(</span>tk<span class="token punctuation">.</span>mybatis<span class="token punctuation">.</span>mapper<span class="token punctuation">.</span>provider<span class="token punctuation">.</span>base<span class="token punctuation">.</span>BaseSelectProvider<span class="token punctuation">.</span>dynamicSQL<span class="token punctuation">)</span><span class="token punctuation">.</span>  Cause<span class="token operator">:</span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>InstantiationException<span class="token operator">:</span> tk<span class="token punctuation">.</span>mybatis<span class="token punctuation">.</span>mapper<span class="token punctuation">.</span>provider<span class="token punctuation">.</span>base<span class="token punctuation">.</span>BaseSelectProvider
    at org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>builder<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>ProviderSqlSource<span class="token punctuation">.</span><span class="token function">createSqlSource</span><span class="token punctuation">(</span>ProviderSqlSource<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">103</span><span class="token punctuation">)</span>
    at org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>builder<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>ProviderSqlSource<span class="token punctuation">.</span><span class="token function">getBoundSql</span><span class="token punctuation">(</span>ProviderSqlSource<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">73</span><span class="token punctuation">)</span>
    at org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>mapping<span class="token punctuation">.</span>MappedStatement<span class="token punctuation">.</span><span class="token function">getBoundSql</span><span class="token punctuation">(</span>MappedStatement<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">292</span><span class="token punctuation">)</span>
    at org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>executor<span class="token punctuation">.</span>CachingExecutor<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>CachingExecutor<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">81</span><span class="token punctuation">)</span>
    at org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>session<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>DefaultSqlSession<span class="token punctuation">.</span><span class="token function">selectList</span><span class="token punctuation">(</span>DefaultSqlSession<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">148</span><span class="token punctuation">)</span>
    at org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>session<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>DefaultSqlSession<span class="token punctuation">.</span><span class="token function">selectList</span><span class="token punctuation">(</span>DefaultSqlSession<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">141</span><span class="token punctuation">)</span>
    at org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>session<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>DefaultSqlSession<span class="token punctuation">.</span><span class="token function">selectOne</span><span class="token punctuation">(</span>DefaultSqlSession<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">77</span><span class="token punctuation">)</span>
    at sun<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span>NativeMethodAccessorImpl<span class="token punctuation">.</span><span class="token function">invoke0</span><span class="token punctuation">(</span>Native Method<span class="token punctuation">)</span>
    at sun<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span>NativeMethodAccessorImpl<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>NativeMethodAccessorImpl<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">62</span><span class="token punctuation">)</span>
    at sun<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span>DelegatingMethodAccessorImpl<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>DelegatingMethodAccessorImpl<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">43</span><span class="token punctuation">)</span>
    at java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span>Method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>Method<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">498</span><span class="token punctuation">)</span>
    at org<span class="token punctuation">.</span>mybatis<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>SqlSessionTemplate$SqlSessionInterceptor<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>SqlSessionTemplate<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">433</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token number">34</span> more
Caused by<span class="token operator">:</span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>InstantiationException<span class="token operator">:</span> tk<span class="token punctuation">.</span>mybatis<span class="token punctuation">.</span>mapper<span class="token punctuation">.</span>provider<span class="token punctuation">.</span>base<span class="token punctuation">.</span>BaseSelectProvider
    at java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>Class<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span>Class<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">427</span><span class="token punctuation">)</span>
    at org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>builder<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>ProviderSqlSource<span class="token punctuation">.</span><span class="token function">createSqlSource</span><span class="token punctuation">(</span>ProviderSqlSource<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">85</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token number">45</span> more
Caused by<span class="token operator">:</span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>NoSuchMethodException<span class="token operator">:</span> tk<span class="token punctuation">.</span>mybatis<span class="token punctuation">.</span>mapper<span class="token punctuation">.</span>provider<span class="token punctuation">.</span>base<span class="token punctuation">.</span>BaseSelectProvider<span class="token punctuation">.</span>&lt;init<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    at java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>Class<span class="token punctuation">.</span><span class="token function">getConstructor0</span><span class="token punctuation">(</span>Class<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">3082</span><span class="token punctuation">)</span>
    at java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>Class<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span>Class<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">412</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token number">46</span> more
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>å•å…ƒæµ‹è¯•ä»£ç å¦‚ä¸‹ï¼š</p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token annotation punctuation">@RunWith</span><span class="token punctuation">(</span>SpringRunner<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@MybatisTest</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ImageRecordMapperTest</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> ImageRecordMapper mapper<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSimply</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        ImageRecord record <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">selectByPrimaryKey</span><span class="token punctuation">(</span><span class="token string">"1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Assert<span class="token punctuation">.</span><span class="token function">assertNotNull</span><span class="token punctuation">(</span>record<span class="token punctuation">)</span><span class="token punctuation">;</span>
        Assert<span class="token punctuation">.</span><span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token string">"taccisum"</span><span class="token punctuation">,</span> record<span class="token punctuation">.</span><span class="token function">getBucket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Assert<span class="token punctuation">.</span><span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token string">"image1"</span><span class="token punctuation">,</span> record<span class="token punctuation">.</span><span class="token function">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Assert<span class="token punctuation">.</span><span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token string">"hash1"</span><span class="token punctuation">,</span> record<span class="token punctuation">.</span><span class="token function">getHash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="åˆ†æåŸå› "><a href="#åˆ†æåŸå› " class="headerlink" title="åˆ†æåŸå› "></a>åˆ†æåŸå› </h2><p>åœ¨githubä¸Šmapperçš„<a href="https://github.com/abel533/MyBatis-Spring-Boot/issues/34" target="_blank" rel="noopener">issue</a>ä¸­æœ‰ä¸€æ®µä½œè€…çš„å›å¤ï¼Œè¯´æ­¤å¼‚å¸¸æ˜¯ç”±äº<code>é€šç”¨æ–¹æ³•æ²¡æœ‰è¢«æ­£ç¡®åˆå§‹åŒ–</code>å¯¼è‡´ã€‚<br>æˆ‘è¿™è¾¹çš„æƒ…å†µè™½ç„¶å’Œè¿™ä¸ªissueä¸åŒï¼Œä½†æ ¹æœ¬åŸå› æ˜¯ä¸€æ ·çš„ã€‚<br>æŸ¥é˜…<code>Mybatis-Test</code>çš„æ–‡æ¡£å¯çŸ¥ï¼Œ<code>@MybatisTest</code>æ³¨è§£ä¸åŒäº<code>@SpringBootTest</code>ï¼Œå®ƒåªåŠ è½½ä¿è¯Mybatisæ­£å¸¸è¿è¡Œæ‰€éœ€è¦çš„configurationã€‚æ˜¾ç„¶é€šç”¨Mapperä½œä¸ºMybatisç¬¬ä¸‰æ–¹çš„æ‰©å±•ï¼Œå¹¶æ²¡æœ‰è¢«çº³å…¥å…¶ä¸­ï¼Œå› è€Œé»˜è®¤æƒ…å†µä¸‹é€šç”¨Mapperçš„starteræ˜¯ä¸ä¼šè¢«åŠ è½½çš„ï¼Œä¹Ÿå°±å¯¼è‡´é€šç”¨æ–¹æ³•ä¸ä¼šè¢«åˆå§‹åŒ–ã€‚</p>
<blockquote>
<p>The @MybatisTest can be used if you want to test MyBatis components(Mapper interface and SqlSession). By default it will configure MyBatis(MyBatis-Spring) components(SqlSessionFactory and SqlSessionTemplate), configure MyBatis mapper interfaces and configure an in-memory embedded database. MyBatis tests are transactional and rollback at the end of each test by default, for more details refer to the relevant section in the Spring Reference Documentation. Also regular @Component beans will not be loaded into the ApplicationContext.<br>ä»¥ä¸Šæ˜¯æ¥è‡ª<a href="http://www.mybatis.org/spring-boot-starter/mybatis-spring-boot-test-autoconfigure/" target="_blank" rel="noopener">mybatis-spring-boot-test-autoconfigure</a>å®˜æ–¹æ–‡æ¡£çš„æè¿°</p>
</blockquote>
<h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><p>æ˜¾ç„¶ï¼Œåªè¦è®©Mapperçš„starteråœ¨MybatisTestçš„å•å…ƒæµ‹è¯•å¯åŠ¨æ—¶å¾—ä»¥åŠ è½½å³å¯è§£å†³æˆ‘ä»¬çš„é—®é¢˜ã€‚é‚£ä¹ˆå¦‚ä½•åšå‘¢ï¼Ÿ<br>Spring Bootæä¾›äº†ä¸€ä¸ª<code>@ImportAutoConfiguration</code>çš„æ³¨è§£ï¼Œå› æ­¤åªéœ€è¦åœ¨å•å…ƒæµ‹è¯•çš„ç›®æ ‡ç±»ä¸Šä½¿ç”¨è¯¥æ³¨è§£å°†MapperAutoConfigurationå¯¼å…¥å³å¯</p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token annotation punctuation">@RunWith</span><span class="token punctuation">(</span>SpringRunner<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ImportAutoConfiguration</span><span class="token punctuation">(</span>MapperAutoConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@MybatisTest</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ImageRecordMapperTest</span> <span class="token punctuation">{</span>
    â€¦â€¦
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>å…¶ä¸­<code>MapperAutoConfiguration</code>æ˜¯é€šç”¨Mapperçš„starterçš„auto-configureç±»ã€‚</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://taccisum.github.io/learn_gradle_5.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="taccisum">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/Avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="taccisum ğŸ˜‰">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/learn_gradle_5.html" itemprop="url">Gradleå­¦ä¹ ï¼ˆäº”ï¼‰ - æ‰“åŒ…å‘å¸ƒ</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-10-13T11:32:20+08:00">
                2017-10-13
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/gradle/" itemprop="url" rel="index">
                    <span itemprop="name">gradle</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="å‘å¸ƒåˆ°Mavenä»“åº“"><a href="#å‘å¸ƒåˆ°Mavenä»“åº“" class="headerlink" title="å‘å¸ƒåˆ°Mavenä»“åº“"></a>å‘å¸ƒåˆ°Mavenä»“åº“</h2><h3 id="Maven-Publishæ’ä»¶"><a href="#Maven-Publishæ’ä»¶" class="headerlink" title="Maven-Publishæ’ä»¶"></a>Maven-Publishæ’ä»¶</h3><p>Gradleå°†é¡¹ç›®å‘å¸ƒåˆ°Mavenä»“åº“éœ€è¦å€ŸåŠ©æ’ä»¶ï¼Œ<code>Maven-Publish</code>ä¾¿æ˜¯å®˜æ–¹æ¨èçš„ä¸€æ¬¾æ’ä»¶ã€‚<br><a href="https://docs.gradle.org/current/userguide/publishing_maven.html" target="_blank" rel="noopener">Maven-Publish</a></p>
<h3 id="å‘å¸ƒé¡¹ç›®"><a href="#å‘å¸ƒé¡¹ç›®" class="headerlink" title="å‘å¸ƒé¡¹ç›®"></a>å‘å¸ƒé¡¹ç›®</h3><p>é€šè¿‡<code>&#39;maven-publish&#39;</code>å¼•å…¥æ’ä»¶<br><strong>build.gradle</strong></p>
<pre class="line-numbers language-groovy"><code class="language-groovy">apply plugin<span class="token punctuation">:</span> <span class="token string">'maven-publish'</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h4 id="å‘å¸ƒåˆ°æœ¬åœ°"><a href="#å‘å¸ƒåˆ°æœ¬åœ°" class="headerlink" title="å‘å¸ƒåˆ°æœ¬åœ°"></a>å‘å¸ƒåˆ°æœ¬åœ°</h4><p><strong>build.gradle</strong></p>
<pre class="line-numbers language-groovy"><code class="language-groovy">apply plugin<span class="token punctuation">:</span> <span class="token string">'java'</span>
apply plugin<span class="token punctuation">:</span> <span class="token string">'maven-publish'</span>

group <span class="token operator">=</span> <span class="token string">'cn.tac.test'</span>
version <span class="token operator">=</span> <span class="token string">'1.0'</span>

publishing <span class="token punctuation">{</span>
    publications <span class="token punctuation">{</span>
        <span class="token function">mavenJava</span><span class="token punctuation">(</span>MavenPublication<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            from components<span class="token operator">.</span>java
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
publishing <span class="token punctuation">{</span>
    repositories <span class="token punctuation">{</span>
        maven <span class="token punctuation">{</span>
            url <span class="token string">"$buildDir/repo"</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>åœ¨ä»¥ä¸Šé…ç½®ä¸­</p>
<ul>
<li><code>publishing{}</code>æ˜¯ç”±æ’ä»¶ä¸ºé¡¹ç›®åˆ›å»ºçš„æ‰©å±•ï¼ˆPublishingExtensionç±»å‹ï¼‰ï¼Œè¿™ä¸ªæ‰©å±•æä¾›äº†ä¸¤ä¸ªblockï¼š<code>publications{}</code>ï¼ˆMavenPublicationç±»å‹ï¼‰å’Œ<code>repositories{}</code>ï¼ˆMavenArtifactRepository ç±»å‹ï¼‰ï¼Œåˆ†åˆ«ç”¨äºé…ç½®<code>è¦å‘å¸ƒçš„å†…å®¹</code>å’Œ<code>ç›®æ ‡ä»“åº“</code>ï¼ˆå‡å¯é…ç½®å¤šä¸ªï¼‰ã€‚</li>
<li><code>mavenJava{}</code>è¢«ç§°ä¸ºå‘å¸ƒç»„ä»¶<code>Component</code>ï¼Œç”¨äºé…ç½®ä¸€é¡¹è¦å‘å¸ƒçš„å†…å®¹ï¼Œcomponents.javaè¡¨ç¤ºè¿™ä¸ªç»„ä»¶æ˜¯é€šè¿‡Javaæ’ä»¶æ·»åŠ çš„<code>java</code>ç»„ä»¶ï¼Œå¯ä»¥ç®€å•åœ°ç†è§£ä¸ºå°±æ˜¯å°†å½“å‰javaé¡¹ç›®ä½œä¸ºå‘å¸ƒå†…å®¹ã€‚</li>
<li><code>maven{}</code>æŒ‡å®šäº†ä¸€ä¸ªè¦å‘å¸ƒçš„ç›®æ ‡ä»“åº“ï¼Œå½“å‰æŒ‡å®šäº†å½“å‰é¡¹ç›®çš„buildç›®å½•ä¸‹çš„<code>repo</code>ç›®å½•ï¼Œå³å‘å¸ƒåˆ°æœ¬åœ°</li>
</ul>
<p>æ‰§è¡Œpublishing -&gt; publishï¼Œå¯ä»¥çœ‹åˆ°é¡¹ç›®æˆåŠŸå‘å¸ƒåˆ°äº†<code>build/repo</code>ç›®å½•ä¸­ã€‚<br><img src="/images/gradle_learn/publishing/build_repo.png" alt="build/repo"></p>
<p><strong>tips</strong></p>
<ul>
<li>ä¸¤ä¸ª<code>publishing{}</code>å—çš„å†…å®¹ä¹Ÿå¯ä»¥åˆåœ¨ä¸€èµ·å†™</li>
<li>mavenJavaåªæ˜¯ä¸€ä¸ªå‘½åï¼Œå¹¶æ— ç‰¹æ®Šå«ä¹‰ï¼Œä½ ä¹Ÿå¯ä»¥å°†å…¶æ›´æ¢ä¸ºåˆ«çš„åç§°ï¼Œä½†ä¸èƒ½ä¸å…¶å®ƒå‘å¸ƒç»„ä»¶åç§°é‡å¤</li>
<li>mavenJavaå—ä¸­è¿˜å¯ä»¥é…ç½®è¦å‘å¸ƒçš„artifactçš„<code>group</code>ã€<code>id</code>åŠ<code>version</code>ï¼Œå¦‚æœä¸æ˜¾å¼æŒ‡å®šï¼Œåˆ™é»˜è®¤é‡‡ç”¨å½“å‰é¡¹ç›®çš„é…ç½®</li>
</ul>
<h4 id="å‘å¸ƒæºç "><a href="#å‘å¸ƒæºç " class="headerlink" title="å‘å¸ƒæºç "></a>å‘å¸ƒæºç </h4><p>åœ¨ä¸Šä¸€æ­¥çš„åŸºç¡€ä¸Š</p>
<ol>
<li>æ–°å¢ä¸€ä¸ªç”¨äºè·å–æºç çš„task</li>
<li>é…ç½®å‘å¸ƒç»„ä»¶ï¼Œä½¿å…¶å‘å¸ƒçš„åŒæ—¶é¢å¤–å‘å¸ƒä¸€ä¸ªåŒ…å«æºç çš„<code>artifact</code></li>
</ol>
<p><strong>build.gradle</strong></p>
<pre class="line-numbers language-groovy"><code class="language-groovy">â€¦â€¦
<span class="token comment" spellcheck="true">//è¿™ä¸ªtaskå¯ä»¥è·å–åˆ°æºç </span>
task <span class="token function">sourceJar</span><span class="token punctuation">(</span>type<span class="token punctuation">:</span> Jar<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    from sourceSets<span class="token operator">.</span>main<span class="token operator">.</span>allJava
<span class="token punctuation">}</span>

publishing <span class="token punctuation">{</span>
    publications <span class="token punctuation">{</span>
        <span class="token function">mavenJava</span><span class="token punctuation">(</span>MavenPublication<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            â€¦â€¦
            <span class="token comment" spellcheck="true">//é…ç½®é¢å¤–å‘å¸ƒçš„artifact</span>
            artifact sourceJar <span class="token punctuation">{</span>
                <span class="token comment" spellcheck="true">//è¿™ä¸ªå­—ç¬¦ä¸²ä¼šä½œä¸ºartifactæ–‡ä»¶çš„åç¼€</span>
                classifier <span class="token string">"sources"</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
â€¦â€¦
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>æ‰§è¡Œtask<br><img src="/images/gradle_learn/publishing/build_repo_with_sources.png" alt="sources"></p>
<h4 id="å‘å¸ƒåˆ°è¿œç¨‹ä»“åº“"><a href="#å‘å¸ƒåˆ°è¿œç¨‹ä»“åº“" class="headerlink" title="å‘å¸ƒåˆ°è¿œç¨‹ä»“åº“"></a>å‘å¸ƒåˆ°è¿œç¨‹ä»“åº“</h4><p>åªéœ€è¦ä¿®æ”¹urlæŒ‡å‘è¿œç¨‹ä»“åº“å³å¯ã€‚åŒæ—¶ç”±äºè¿œç¨‹ä»“åº“å¤§å¤šéœ€è¦è®¤è¯ï¼Œå› æ­¤é€šå¸¸éœ€è¦é€šè¿‡<code>credentials{}</code>æŒ‡å®šç”¨æˆ·åå’Œå¯†ç </p>
<p><strong>build.gradle</strong></p>
<pre class="line-numbers language-groovy"><code class="language-groovy">â€¦â€¦
publishing <span class="token punctuation">{</span>
    repositories <span class="token punctuation">{</span>
        maven <span class="token punctuation">{</span>
            url <span class="token string">"http://172.10.10.66:8081/nexus/content/repositories/releases/"</span>
            credentials <span class="token punctuation">{</span>
                username <span class="token operator">=</span> <span class="token string">"admin"</span>
                password <span class="token operator">=</span> <span class="token string">"admin123"</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
â€¦â€¦
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="æ¡ä»¶å‘å¸ƒ"><a href="#æ¡ä»¶å‘å¸ƒ" class="headerlink" title="æ¡ä»¶å‘å¸ƒ"></a>æ¡ä»¶å‘å¸ƒ</h4><p>è¿™ç‚¹ç›¸ä¿¡ä¼šç‚¹groovyçš„åŒå­¦éƒ½ä¸ä¼šè§‰å¾—éš¾ï¼Œç”¨<code>if/else</code>å°±å¯ä»¥å®Œæˆã€‚ä¾‹å¦‚ä¸‹é¢çš„é…ç½®å®ç°æ ¹æ®versionåç¼€æ¥å†³å®šæ˜¯å‘å¸ƒåˆ°<code>snapshots</code>è¿˜æ˜¯<code>releases</code>ä»“åº“ä¸­</p>
<p><strong>build.gralde</strong></p>
<pre class="line-numbers language-groovy"><code class="language-groovy">â€¦â€¦
publishing <span class="token punctuation">{</span>
    repositories <span class="token punctuation">{</span>
        <span class="token keyword">def</span> NEXUS_URL <span class="token operator">=</span> <span class="token string">"http://172.10.10.66:8081/nexus/content/repositories/releases/"</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>project<span class="token operator">.</span>version<span class="token operator">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">"SNAPSHOT"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            NEXUS_URL <span class="token operator">=</span> <span class="token string">"http://172.10.10.66:8081/nexus/content/repositories/snapshots/"</span>
        <span class="token punctuation">}</span>
        maven <span class="token punctuation">{</span>
            url NEXUS_URL
            credentials <span class="token punctuation">{</span>
                username <span class="token operator">=</span> <span class="token string">"admin"</span>
                password <span class="token operator">=</span> <span class="token string">"admin123"</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
â€¦â€¦
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="å‘å¸ƒå¤šé¡¹ç›®"><a href="#å‘å¸ƒå¤šé¡¹ç›®" class="headerlink" title="å‘å¸ƒå¤šé¡¹ç›®"></a>å‘å¸ƒå¤šé¡¹ç›®</h4><p>çˆ¶é¡¹ç›®çš„taskæ‰§è¡Œçš„åŒæ—¶ä¼šæ‰§è¡Œå…¶æ‰€æœ‰å­é¡¹ç›®çš„åŒä¸€taskï¼ˆæœ€å¸¸è§çš„å¦‚buildä»»åŠ¡ï¼‰ï¼Œå› æ­¤å¤šé¡¹ç›®å‘å¸ƒåªéœ€è¦é…ç½®å¥½æ‰€æœ‰å­é¡¹ç›®çš„å‘å¸ƒé…ç½®å³å¯ã€‚</p>
<p><strong>build.gradle</strong></p>
<pre class="line-numbers language-groovy"><code class="language-groovy">subprojects <span class="token punctuation">{</span>
    apply plugin<span class="token punctuation">:</span> <span class="token string">'java'</span>
    apply plugin<span class="token punctuation">:</span> <span class="token string">'maven-publish'</span>

    group <span class="token string">"cn.tac.test"</span>
    version <span class="token string">"1.0-SNAPSHOT"</span>

    <span class="token comment" spellcheck="true">//å› ä¸ºçˆ¶é¡¹ç›®ä¸éœ€è¦å‘å¸ƒï¼Œæ‰€ä»¥åªéœ€è¦é…ç½®å­é¡¹ç›®çš„å‘å¸ƒé…ç½®å³å¯</span>
    publishing <span class="token punctuation">{</span>
        publications <span class="token punctuation">{</span>
            <span class="token function">mavenJava</span><span class="token punctuation">(</span>MavenPublication<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                from components<span class="token operator">.</span>java
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    publishing <span class="token punctuation">{</span>
        repositories <span class="token punctuation">{</span>
            maven <span class="token punctuation">{</span>
                url <span class="token string">"$buildDir/repo"</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>æ‰§è¡Œtaskï¼Œå¯ä»¥çœ‹åˆ°æ¯ä¸ªå­é¡¹ç›®éƒ½å‘å¸ƒåˆ°äº†å…¶å¯¹åº”çš„<code>build/repo</code>ä¸­ã€‚</p>
<p><strong>tips</strong></p>
<ul>
<li>å¦‚æœå­æ¨¡å—ä¹‹é—´äº’ç›¸æœ‰ä¾èµ–ï¼ŒGradleå‘å¸ƒæ—¶ä¼šè‡ªåŠ¨è§£æå„æ¨¡å—çš„å…ˆåå‘å¸ƒé¡ºåºï¼Œæ— éœ€æˆ‘ä»¬è‡ªå·±é…ç½®</li>
</ul>
<h3 id="å¸¸è§é—®é¢˜"><a href="#å¸¸è§é—®é¢˜" class="headerlink" title="å¸¸è§é—®é¢˜"></a>å¸¸è§é—®é¢˜</h3><h4 id="å‘å¸ƒåpom-xmlä¸­é¡¹ç›®çš„ä¾èµ–scopeä¸ºruntimeçš„é—®é¢˜"><a href="#å‘å¸ƒåpom-xmlä¸­é¡¹ç›®çš„ä¾èµ–scopeä¸ºruntimeçš„é—®é¢˜" class="headerlink" title="å‘å¸ƒåpom.xmlä¸­é¡¹ç›®çš„ä¾èµ–scopeä¸ºruntimeçš„é—®é¢˜"></a>å‘å¸ƒåpom.xmlä¸­é¡¹ç›®çš„ä¾èµ–scopeä¸ºruntimeçš„é—®é¢˜</h4><p>åœ¨å‘å¸ƒçš„æ—¶å€™å‘ç°ï¼Œé¡¹ç›®ä¸­é€šè¿‡complieä¾èµ–çš„ç¬¬ä¸‰æ–¹åº“æˆ–å…¶å®ƒæ¨¡å—ï¼Œåœ¨å‘å¸ƒåç”±Gradleç”Ÿæˆçš„<code>pom.xml</code>æ–‡ä»¶ä¸­ï¼Œä¾èµ–çš„scopeé»˜è®¤å˜æˆäº†<code>runtime</code>ï¼Œè€Œéæˆ‘ä»¬æœŸæœ›çš„<code>compile</code></p>
<pre class="line-numbers language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span>
  â€¦â€¦
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>cn.tac.test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>publishing<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>cn.tac.test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>module1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">></span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>ä¸ºäº†è¾¾åˆ°æœŸæœ›çš„æ•ˆæœï¼Œåªéœ€è¦åœ¨å‘å¸ƒé…ç½®ä¸­é€šè¿‡<code>withXML</code>å¯¹pomè¿›è¡Œä¿®æ”¹å³å¯<br><strong>build.gradle</strong></p>
<pre class="line-numbers language-groovy"><code class="language-groovy">publishing <span class="token punctuation">{</span>
    publications <span class="token punctuation">{</span>
        <span class="token function">mavenJava</span><span class="token punctuation">(</span>MavenPublication<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            from components<span class="token operator">.</span>java

            pom<span class="token operator">.</span>withXml <span class="token punctuation">{</span>
                <span class="token function">asNode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">.</span>dependencies<span class="token operator">.</span><span class="token string">'*'</span><span class="token operator">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    it<span class="token operator">.</span>scope<span class="token operator">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">'runtime'</span> <span class="token operator">&amp;&amp;</span> project<span class="token operator">.</span>configurations<span class="token operator">.</span>compile<span class="token operator">.</span>allDependencies<span class="token operator">.</span>find <span class="token punctuation">{</span> dep <span class="token operator">-></span>
                        dep<span class="token operator">.</span>name <span class="token operator">==</span> it<span class="token operator">.</span>artifactId<span class="token operator">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token operator">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    it<span class="token operator">.</span>scope<span class="token operator">*.</span>value <span class="token operator">=</span> <span class="token string">'compile'</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>å†æ¬¡å‘å¸ƒ</p>
<pre class="line-numbers language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span>
  â€¦â€¦
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>cn.tac.test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>publishing<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>cn.tac.test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>module1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">></span></span>compile<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>tips</strong></p>
<ul>
<li>å‚è€ƒé“¾æ¥ <a href="https://stackoverflow.com/questions/31069666/how-to-change-artifactory-runtime-scope-to-compile-scope" target="_blank" rel="noopener">How to change artifactory runtime scope to compile scope?</a></li>
<li><a href="https://docs.gradle.org/current/dsl/org.gradle.api.publish.maven.MavenPom.html#org.gradle.api.publish.maven.MavenPom:withXml(org.gradle.api.Action" target="_blank" rel="noopener">æ›´å¤šwithXMLçš„ä¿¡æ¯</a></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://taccisum.github.io/know_crawler.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="taccisum">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/Avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="taccisum ğŸ˜‰">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/know_crawler.html" itemprop="url">äº†è§£çˆ¬è™«</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-10-01T23:08:55+08:00">
                2017-10-01
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index">
                    <span itemprop="name">python</span>
                  </a>
                </span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/çˆ¬è™«/" itemprop="url" rel="index">
                    <span itemprop="name">çˆ¬è™«</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="ä»€ä¹ˆæ˜¯çˆ¬è™«"><a href="#ä»€ä¹ˆæ˜¯çˆ¬è™«" class="headerlink" title="ä»€ä¹ˆæ˜¯çˆ¬è™«"></a>ä»€ä¹ˆæ˜¯çˆ¬è™«</h2><h3 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h3><p>çˆ¬è™«ï¼ˆWeb Crawlerï¼‰ï¼Œä¹Ÿå«<code>ç½‘ç»œèœ˜è››</code>ï¼ˆSpliderï¼‰ï¼Œæ˜¯ä¸€ç§ç”¨æ¥è‡ªåŠ¨æµè§ˆ<code>wwwç½‘é¡µ</code>çš„ç¨‹åºã€‚<br>çˆ¬è™«ä¸€èˆ¬ä»ä¸€ä¸ªURLå‡ºå‘ï¼Œè®¿é—®æ‰€æœ‰<code>å…³è”çš„URL</code>ï¼Œå¹¶ä»ä¸­æå–å‡ºæ„Ÿå…´è¶£çš„å†…å®¹ã€‚<br>çˆ¬è™«è®¿é—®ç½‘ç«™çš„è¿‡ç¨‹ä¼š<code>æ¶ˆè€—ç›®æ ‡ç³»ç»Ÿèµ„æº</code>ï¼Œæ‰€ä»¥æœ‰ä¸å°‘ç½‘ç»œç³»ç»Ÿå¹¶ä¸é»˜è®¸çˆ¬è™«å·¥ä½œã€‚å› æ­¤çˆ¬è™«è¦è€ƒè™‘åˆ°<code>è§„åˆ’</code>ã€<code>è´Ÿè½½</code>ï¼Œå¹¶ä¸”è¦è®²ã€ç¤¼è²Œã€ï¼ˆå‚è€ƒ<a href="https://zh.wikipedia.org/wiki/Robots.txt" target="_blank" rel="noopener">robots.txt</a>ï¼‰ã€‚</p>
<p><a href="https://zh.wikipedia.org/wiki/%E7%B6%B2%E8%B7%AF%E7%88%AC%E8%9F%B2" target="_blank" rel="noopener">ç½‘ç»œçˆ¬è™«</a></p>
<h3 id="åº”ç”¨åœºæ™¯"><a href="#åº”ç”¨åœºæ™¯" class="headerlink" title="åº”ç”¨åœºæ™¯"></a>åº”ç”¨åœºæ™¯</h3><p>çˆ¬è™«ä¸»è¦æœ‰ä»¥ä¸‹åº”ç”¨åœºæ™¯</p>
<ul>
<li>ç§‘å­¦ç ”ç©¶<blockquote>
<p>å¦‚æ•°æ®æŒ–æ˜ã€æœºå™¨å­¦ä¹ ã€å›¾ç‰‡å¤„ç†ç­‰</p>
</blockquote>
</li>
<li>Webå®‰å…¨<blockquote>
<p>å¦‚ä½¿ç”¨çˆ¬è™«å¯¹ç½‘ç«™æ˜¯å¦å­˜åœ¨æŸä¸€æ¼æ´è¿›è¡Œæ‰¹é‡éªŒè¯ã€åˆ©ç”¨</p>
</blockquote>
</li>
<li>äº§å“ç ”å‘<blockquote>
<p>å¦‚é‡‡é›†å„ä¸ªå•†åŸç‰©å“ä»·æ ¼ï¼Œä¸ºç”¨æˆ·æä¾›å¸‚åœºæœ€ä½ä»·</p>
</blockquote>
</li>
<li>èˆ†æƒ…ç›‘æ§<blockquote>
<p>å¦‚æŠ“å–ã€åˆ†ææŸç¤¾äº¤å¹³å°çš„æ•°æ®ï¼Œä»è€Œè¯†åˆ«å‡ºæŸç”¨æˆ·æ˜¯å¦ä¸ºæ°´å†›</p>
</blockquote>
</li>
<li>æœç´¢å¼•æ“<blockquote>
<p>çˆ¬è™«æ˜¯æœç´¢å¼•æ“çš„æ ¸å¿ƒç»„æˆéƒ¨åˆ†</p>
</blockquote>
</li>
</ul>
<h3 id="çˆ¬è™«ç­–ç•¥"><a href="#çˆ¬è™«ç­–ç•¥" class="headerlink" title="çˆ¬è™«ç­–ç•¥"></a>çˆ¬è™«ç­–ç•¥</h3><p>ä¸€ä¸ªçˆ¬è™«çš„å®ç°ä¸»è¦ç”±å››å¤§ç­–ç•¥ç»„æˆ</p>
<ul>
<li>é€‰æ‹©ç­–ç•¥<blockquote>
<p>æŒ‡å®šé¡µé¢ä¸‹è½½çš„ç­–ç•¥ï¼Œå¯ç»†åˆ†ä¸º<br><code>é“¾æ¥è·Ÿéšé™åˆ¶</code>ï¼ŒæŒ‡çš„æ˜¯çˆ¬è™«åªæœç´¢ç‰¹å®šç±»å‹ï¼ˆå¦‚HTMLï¼‰çš„èµ„æºï¼Œé¿å…å‘å‡ºè¿‡å¤šçš„è¯·æ±‚ã€‚æˆ–è€…é¿å…è¯·æ±‚ä¸€äº›å¸¦æœ‰â€?â€çš„èµ„æºï¼Œé¿å…ä»ç½‘ç«™ä¸‹è½½æ— é™é‡çš„URL<br><code>URLè§„èŒƒåŒ–</code>ï¼ŒæŒ‡çš„æ˜¯ä»¥æŸç§ä¸€è‡´çš„æ–¹å¼ä¿®æ”¹å’Œæ ‡å‡†åŒ–URLçš„è¿‡ç¨‹ï¼Œé¿å…èµ„æºçš„é‡å¤çˆ¬å–<br><code>è·¯å¾„ä¸Šç§»çˆ¬å–</code>ï¼ŒæŒ‡çˆ¬å–æ¯ä¸ªURLé‡Œæç¤ºçš„æ¯ä¸ªè·¯å¾„ï¼Œä¾‹å¦‚å¯¹äºâ€http: //<a href="http://www.tac.cn/a/b/c.html&quot;ï¼Œè¿˜ä¼šçˆ¬å–&quot;/a/b&quot;ã€&quot;/a&quot;å’Œ&quot;/&quot;è·¯å¾„ã€‚" target="_blank" rel="noopener">www.tac.cn/a/b/c.html&quot;ï¼Œè¿˜ä¼šçˆ¬å–&quot;/a/b&quot;ã€&quot;/a&quot;å’Œ&quot;/&quot;è·¯å¾„ã€‚</a><br><code>ä¸»é¢˜çˆ¬å–</code>ï¼ŒæŒ‡æœ‰æ¡ä»¶åœ°è¿›è¡Œçˆ¬å–ï¼ˆä¾‹å¦‚åªçˆ¬å–ä¸pythonç›¸å…³çš„é¡µé¢ï¼‰ã€‚</p>
</blockquote>
</li>
<li>é‡æ–°è®¿é—®ç­–ç•¥<blockquote>
<p>ç½‘ç«™æ˜¯ç»å¸¸åŠ¨æ€å˜åŒ–çš„ï¼Œéœ€è¦ä¼°ç®—URLçš„<code>æ–°é²œåº¦</code>å’Œ<code>è¿‡æ—¶æ€§</code>ï¼Œä»¥ç¡®ä¿æ˜¯å¦éœ€è¦é‡æ–°è®¿é—®ã€‚</p>
</blockquote>
</li>
<li>å¹³è¡¡ç¤¼è²Œç­–ç•¥<blockquote>
<p>ä½¿ç”¨çˆ¬è™«å¯èƒ½å¯¼è‡´ä¸€ä¸ª<code>ç«™ç‚¹ç˜«ç—ª</code>ï¼Œå› æ­¤çˆ¬è™«éœ€è¦éµå®ˆä¸€äº›åè®®æ¥é¿å…è¿™ä¸ªé—®é¢˜ã€‚</p>
</blockquote>
</li>
<li>å¹¶è¡Œç­–ç•¥<blockquote>
<p>å¹¶è¡Œè¿è¡Œ<code>å¤šä¸ªè¿›ç¨‹</code>çš„çˆ¬è™«æ—¶ï¼Œä¸ºäº†é¿å…é‡å¤ä¸‹è½½é¡µé¢ï¼Œçˆ¬è™«ç³»ç»Ÿéœ€è¦ç­–ç•¥æ¥å¤„ç†çˆ¬è™«è¿è¡Œæ—¶æ–°å‘ç°çš„URLã€‚</p>
</blockquote>
</li>
</ul>
<h3 id="ç®€å•æ¶æ„"><a href="#ç®€å•æ¶æ„" class="headerlink" title="ç®€å•æ¶æ„"></a>ç®€å•æ¶æ„</h3><p><img src="/images/crawler_learn/framework.jpg" alt="framework"></p>
<p>å¦‚å›¾ï¼Œä¸€ä¸ªæœ€ç®€å•çš„çˆ¬è™«æ¶æ„è‡³å°‘åŒ…æ‹¬<code>çˆ¬è™«è°ƒåº¦ç«¯</code>ã€<code>URLç®¡ç†å™¨</code>ã€<code>ç½‘é¡µä¸‹è½½å™¨</code>ã€<code>ç½‘é¡µè§£æå™¨</code>ã€‚è¿™å‡ ä¸ªæ¨¡å—ç›¸äº’ä½œç”¨ï¼Œä»è€Œæå–å‡º<code>æœ‰ä»·å€¼çš„æ•°æ®</code>ã€‚å…¶æ—¶åºå›¾å¦‚ä¸‹</p>
<p><img src="/images/crawler_learn/sequence_chart.jpg" alt="framework"></p>
<p>çˆ¬è™«è°ƒåº¦å™¨ä»URLç®¡ç†å™¨ä¸­è·å–å¾…çˆ¬å–çš„URLï¼Œäº¤ç”±ä¸‹è½½å™¨è¿›è¡Œä¸‹è½½ã€‚ç„¶åå°†ä¸‹è½½å™¨å°†ä¸‹è½½çš„é¡µé¢äº¤ç”±è§£æå™¨è¿›è¡Œè§£æï¼Œè§£æå™¨åˆåè¿‡æ¥å°†è§£æåˆ°çš„URLåé¦ˆç»™URLç®¡ç†å™¨ã€‚å¦‚æ­¤å¾ªç¯å¾€å¤ï¼Œç›´åˆ°æ²¡æœ‰å¾…æŠ“å–çš„URLï¼Œåˆ™ç»“æŸçˆ¬å–ã€‚</p>
<p>â€”â€”ä»¥ä¸Šå›¾ç‰‡æ¥è‡ªæ…•è¯¾ç½‘<a href="http://www.imooc.com/learn/563" target="_blank" rel="noopener">Pythonå¼€å‘ç®€å•çˆ¬è™«</a></p>
<h3 id="URLç®¡ç†å™¨"><a href="#URLç®¡ç†å™¨" class="headerlink" title="URLç®¡ç†å™¨"></a>URLç®¡ç†å™¨</h3><p>ç®¡ç†å¾…æŠ“å–çš„URLé›†åˆå’Œå·²æŠ“å–çš„URLé›†åˆï¼Œé˜²æ­¢<code>é‡å¤æŠ“å–</code>ã€é˜²æ­¢<code>å¾ªç¯æŠ“å–</code>ã€‚</p>
<p>å®ç°æ–¹å¼</p>
<ul>
<li>å†…å­˜</li>
<li>å…³ç³»æ•°æ®åº“</li>
<li>NoSQL</li>
</ul>
<h3 id="ç½‘é¡µä¸‹è½½å™¨"><a href="#ç½‘é¡µä¸‹è½½å™¨" class="headerlink" title="ç½‘é¡µä¸‹è½½å™¨"></a>ç½‘é¡µä¸‹è½½å™¨</h3><ul>
<li>urllib2 pythonå®˜æ–¹ *</li>
</ul>
<ul>
<li>requests ç¬¬ä¸‰æ–¹</li>
</ul>
<p>ç½‘é¡µä¸‹è½½åˆ†å‡ ç§åœºæ™¯</p>
<ul>
<li>ç›´æ¥é€šè¿‡urlä¸‹è½½</li>
<li>éœ€è¦æ·»åŠ è¯·æ±‚å‚æ•°ï¼Œè¯·æ±‚å¤´ï¼ˆä¼ªè£…æµè§ˆå™¨ï¼‰</li>
<li>éœ€è¦ä¼ªè£…ç‰¹æ®Šæƒ…æ™¯ï¼Œå¦‚cookieã€proxyã€httpsã€http redirect</li>
</ul>
<h3 id="é¡µé¢è§£æå™¨"><a href="#é¡µé¢è§£æå™¨" class="headerlink" title="é¡µé¢è§£æå™¨"></a>é¡µé¢è§£æå™¨</h3><p>ä»ç½‘é¡µä¸­æå–æœ‰ä»·å€¼æ•°æ®çš„å·¥å…·</p>
<p>pythonçš„ç½‘é¡µè§£æå™¨</p>
<ul>
<li>æ­£åˆ™è¡¨è¾¾å¼</li>
<li>html.parser pythonå®˜æ–¹</li>
<li>beautiful soup4 ç¬¬ä¸‰æ–¹ *</li>
<li>lxml </li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://taccisum.github.io/learn_gradle_4.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="taccisum">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/Avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="taccisum ğŸ˜‰">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/learn_gradle_4.html" itemprop="url">Gradleå­¦ä¹ ï¼ˆå››ï¼‰ - è‡ªå®šä¹‰ä»»åŠ¡</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-09-30T18:26:51+08:00">
                2017-09-30
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/gradle/" itemprop="url" rel="index">
                    <span itemprop="name">gradle</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>è‰ç¨¿</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://taccisum.github.io/learn_gradle_3.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="taccisum">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/Avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="taccisum ğŸ˜‰">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/learn_gradle_3.html" itemprop="url">Gradleå­¦ä¹ ï¼ˆä¸‰ï¼‰ - å¤šé¡¹ç›®æ„å»º</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-09-30T10:17:25+08:00">
                2017-09-30
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/gradle/" itemprop="url" rel="index">
                    <span itemprop="name">gradle</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ä»<a href="/2017/09/26/Gradleå­¦ä¹ ï¼ˆä¸€ï¼‰/">ç¬¬ä¸€ç¯‡</a>ä¸­æˆ‘ä»¬çŸ¥é“äº†å¦‚ä½•æ„å»ºä¸€ä¸ªå•é¡¹ç›®ï¼Œä½†ä»…ä»…è¿™æ ·æ˜¯ä¸å¤Ÿçš„ã€‚å®ç°å¤šé¡¹ç›®çš„æ„å»ºæœ‰åˆ©äº<code>æ¨¡å—åŒ–</code>ï¼Œå¦‚æ­¤ä¸€æ¥æˆ‘ä»¬ä¾¿èƒ½æ›´å¥½åœ°åœ¨ä¸€ä¸ªå¤§å‹é¡¹ç›®ä¸­åˆ†ç¦»æˆ‘ä»¬çš„å…³æ³¨ç‚¹ã€‚</p>
<h2 id="Getting-Started"><a href="#Getting-Started" class="headerlink" title="Getting Started"></a>Getting Started</h2><h3 id="åˆ›å»ºæ ¹é¡¹ç›®"><a href="#åˆ›å»ºæ ¹é¡¹ç›®" class="headerlink" title="åˆ›å»ºæ ¹é¡¹ç›®"></a>åˆ›å»ºæ ¹é¡¹ç›®</h3><p>æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ä½œä¸ºæ ¹é¡¹ç›®ç›®å½•ï¼Œæ‰§è¡Œgradle init</p>
<pre class="line-numbers language-shell"><code class="language-shell">$ mkdir multi_project
$ gradle init
$ ls
build.gradle    gradle          gradlew         gradlew.bat     settings.gradle
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>è¿™æ¬¡æˆ‘ä»¬è¦å…³æ³¨çš„é‡ç‚¹æœ‰ä¸¤ä¸ªæ–‡ä»¶</p>
<ul>
<li>build.gradle<blockquote>
<p>é…ç½®ä¸€äº›åº”ç”¨äºæ‰€æœ‰å­é¡¹ç›®çš„å…¬å…±é…ç½®</p>
</blockquote>
</li>
<li>settings.gradle<blockquote>
<p>æè¿°å„é¡¹ç›®ä¹‹é—´çš„å…³ç³»</p>
</blockquote>
</li>
</ul>
<h3 id="åˆ›å»ºå­é¡¹ç›®"><a href="#åˆ›å»ºå­é¡¹ç›®" class="headerlink" title="åˆ›å»ºå­é¡¹ç›®"></a>åˆ›å»ºå­é¡¹ç›®</h3><p>åœ¨æ ¹ç›®å½•ä¸‹åˆ†åˆ«åˆ›å»ºsub-project1å’Œsub-project2ç›®å½•ï¼Œç„¶ååˆ†åˆ«ä¸ºå…¶åˆ›å»ºbuild.gradle</p>
<pre class="line-numbers language-shell"><code class="language-shell">$ mkdir sub-project1 sub-project2
$ touch sub-project1/build.gradle sub-project2/build.gradle
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>ç„¶ååœ¨æ ¹é¡¹ç›®çš„settings.gradleä¸­æ·»åŠ ä¸‹é¢å†…å®¹ä»¥å…³è”å­é¡¹ç›®</p>
<pre class="line-numbers language-groovy"><code class="language-groovy">include <span class="token string">'sub-project1'</span>
include <span class="token string">'sub-project2'</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><strong>tips</strong></p>
<ul>
<li>ä¸€å®šè¦æ³¨æ„å­é¡¹ç›®åªéœ€ä¸ºå…¶åˆ›å»ºbuild.gradleå³å¯ï¼Œè€Œéä½¿ç”¨gradle initæŒ‡ä»¤åˆå§‹åŒ–ï¼Œè¿™ç‚¹å¾ˆé‡è¦</li>
<li>å­é¡¹ç›®çš„build.gradleåªç”¨äºé…ç½®è¯¥é¡¹ç›®ç‰¹æœ‰çš„ä¸€äº›é…ç½®é¡¹ï¼Œå…¬å…±çš„é…ç½®é€šè¿‡æ ¹é¡¹ç›®çš„build.gradleé…ç½®</li>
</ul>
<h3 id="å…¬å…±é…ç½®"><a href="#å…¬å…±é…ç½®" class="headerlink" title="å…¬å…±é…ç½®"></a>å…¬å…±é…ç½®</h3><p>åœ¨æ ¹é¡¹ç›®çš„build.gradleä¸­åŠ å…¥ä»¥ä¸‹å†…å®¹</p>
<pre class="line-numbers language-groovy"><code class="language-groovy">allprojects<span class="token punctuation">{</span>
    group <span class="token operator">=</span> <span class="token string">'cn.tac'</span>
    version <span class="token operator">=</span> <span class="token string">'0.1'</span>
    repositories<span class="token punctuation">{</span>
        maven <span class="token punctuation">{</span>
            url <span class="token string">'http://maven.aliyun.com/nexus/content/groups/public/'</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

subprojects <span class="token punctuation">{</span>
    apply plugin<span class="token punctuation">:</span> <span class="token string">'java'</span>
    sourceCompatibility <span class="token operator">=</span> <span class="token number">1.8</span>
    dependencies <span class="token punctuation">{</span>
        testCompile <span class="token string">'junit:junit:4.12'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li><code>allprojects{}</code> ä¸ºæ‰€æœ‰é¡¹ç›®æ·»åŠ é…ç½®é¡¹ï¼Œæ‰€ä»¥groupã€versionã€repositorieséƒ½æ”¾åœ¨äº†è¿™ä¸ªblockä¸‹</li>
<li><code>subprojects{}</code> ä»…ä»…ä¸ºå½“å‰é¡¹ç›®çš„å­é¡¹ç›®æ·»åŠ é…ç½®é¡¹ï¼ˆä¸åŒ…æ‹¬å½“å‰é¡¹ç›®æœ¬èº«ï¼‰ï¼Œæ‰€ä»¥æ ¹é¡¹ç›®ä¸éœ€è¦çš„å†…å®¹ï¼ˆå¦‚ä¾èµ–ï¼‰æ”¾åœ¨äº†è¿™ä¸ªblockä¸‹</li>
</ul>
<h3 id="ç¼–å†™ä»£ç "><a href="#ç¼–å†™ä»£ç " class="headerlink" title="ç¼–å†™ä»£ç "></a>ç¼–å†™ä»£ç </h3><p>åˆ†åˆ«ä¸ºå­é¡¹ç›®åˆ›å»ºsrcç›®å½•</p>
<pre class="line-numbers language-shell"><code class="language-shell">$ mkdir -p sub-project1/src/test/java/cn/tac/gradle sub-project2/src/test/java/cn/tac/gradle
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>å¹¶åˆ›å»ºå•å…ƒæµ‹è¯•</p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">package</span> cn<span class="token punctuation">.</span>tac<span class="token punctuation">.</span>gradle<span class="token punctuation">;</span>

<span class="token keyword">import</span> org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>Assert<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>Test<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SubProject1Test</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSimply</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"hello, i'm sub project1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">package</span> cn<span class="token punctuation">.</span>tac<span class="token punctuation">.</span>gradle<span class="token punctuation">;</span>

<span class="token keyword">import</span> org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>Assert<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>Test<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SubProject2Test</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSimply</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"hello, i'm sub project2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="æ‰§è¡Œæ„å»º"><a href="#æ‰§è¡Œæ„å»º" class="headerlink" title="æ‰§è¡Œæ„å»º"></a>æ‰§è¡Œæ„å»º</h3><p>å®Œæˆäº†ä¸Šè¿°æ­¥éª¤ä¹‹åï¼Œä¸å‡ºæ„å¤–æ­¤æ—¶çš„ç›®å½•ç»“æ„åº”è¯¥å¦‚ä¸‹</p>
<pre class="line-numbers language-shell"><code class="language-shell">$ tree .
.
â”œâ”€â”€ build.gradle
â”œâ”€â”€ gradle
â”‚   â””â”€â”€ wrapper
â”‚       â”œâ”€â”€ gradle-wrapper.jar
â”‚       â””â”€â”€ gradle-wrapper.properties
â”œâ”€â”€ gradlew
â”œâ”€â”€ gradlew.bat
â”œâ”€â”€ settings.gradle
â”œâ”€â”€ sub-project1
â”‚   â”œâ”€â”€ build.gradle
â”‚   â””â”€â”€ src
â”‚       â””â”€â”€ test
â”‚           â””â”€â”€ java
â”‚               â””â”€â”€ cn
â”‚                   â””â”€â”€ tac
â”‚                       â””â”€â”€ gradle
â”‚                           â””â”€â”€ SubProject1Test.java
â””â”€â”€ sub-project2
    â”œâ”€â”€ build.gradle
    â””â”€â”€ src
        â””â”€â”€ test
            â””â”€â”€ java
                â””â”€â”€ cn
                    â””â”€â”€ tac
                        â””â”€â”€ gradle
                            â””â”€â”€ SubProject2Test.java
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬åˆ‡æ¢åˆ°æ ¹ç›®å½•ä¸‹ï¼Œæ‰§è¡Œ</p>
<pre><code>$ sh gradlew build
</code></pre><p>å†æŸ¥çœ‹å­é¡¹ç›®çš„ç›®å½•ï¼Œå‘ç°åˆ†åˆ«å¤šäº†ä¸€ä¸ªbuildç›®å½•ï¼Œå¯è§åœ¨ä¸ºæ ¹é¡¹ç›®æ‰§è¡Œæ„å»ºä»»åŠ¡æ—¶ï¼Œå…¶includeçš„æ‰€æœ‰å­é¡¹ç›®ä¹Ÿåˆ†åˆ«è¿›è¡Œäº†æ„å»ºã€‚ä»¥ä¸‹åˆ†åˆ«æ˜¯ä¸¤ä¸ªå­é¡¹ç›®çš„build reports<br><img src="/images/gradle_learn/multi_project/subproject1test.png" alt="sub project 1"><br><img src="/images/gradle_learn/multi_project/subproject2test.png" alt="sub project 2"></p>
<h3 id="ä¾èµ–å…¶å®ƒé¡¹ç›®"><a href="#ä¾èµ–å…¶å®ƒé¡¹ç›®" class="headerlink" title="ä¾èµ–å…¶å®ƒé¡¹ç›®"></a>ä¾èµ–å…¶å®ƒé¡¹ç›®</h3><p>åœ¨<code>dependencies{}</code>ä¸­æ·»åŠ ä¾èµ–å³å¯ï¼Œä¾‹å¦‚sub-project2è¦ä¾èµ–sub-project1ï¼Œå¯ä»¥åœ¨sub-project2çš„build.gradleä¸­æ·»åŠ </p>
<pre class="line-numbers language-groovy"><code class="language-groovy">dependencies <span class="token punctuation">{</span>
  compile <span class="token function">project</span><span class="token punctuation">(</span><span class="token string">':sub-project1'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://taccisum.github.io/learn_gradle_2.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="taccisum">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/Avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="taccisum ğŸ˜‰">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/learn_gradle_2.html" itemprop="url">Gradleå­¦ä¹ ï¼ˆäºŒï¼‰ - å¸¸ç”¨æ’ä»¶</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-09-26T17:56:40+08:00">
                2017-09-26
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/gradle/" itemprop="url" rel="index">
                    <span itemprop="name">gradle</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="build-scanï¼ˆæ„å»ºå®¡è§†ï¼‰æ’ä»¶"><a href="#build-scanï¼ˆæ„å»ºå®¡è§†ï¼‰æ’ä»¶" class="headerlink" title="build-scanï¼ˆæ„å»ºå®¡è§†ï¼‰æ’ä»¶"></a>build-scanï¼ˆæ„å»ºå®¡è§†ï¼‰æ’ä»¶</h2><h3 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h3><blockquote>
<p>A build scan is a shareable and centralized record of a build that provides insights into what happened and why. By applying the build scan plugin to your project, you can create a build scan in the Gradle Cloud for free.<br><a href="https://guides.gradle.org/creating-build-scans/" target="_blank" rel="noopener">Creating Build Scans</a></p>
</blockquote>
<p>å¤§æ¦‚çš„æ„æ€æ˜¯build scanèƒ½ä¸ºä½ æä¾›æ„å»ºè¿‡ç¨‹ä¸­å‘ç”Ÿçš„what and whyä¿¡æ¯ï¼Œåœ¨ä½ æ„å»ºçš„æ—¶å€™ï¼Œæ’ä»¶ä¼šæŠ“å–æ•°æ®æäº¤åˆ°<code>Gradle Cloud</code>ï¼ŒåŒæ—¶è¿”å›ä¸€ä¸ªåŒ…å«æ„å»ºä¿¡æ¯çš„é“¾æ¥ã€‚</p>
<p><strong>å·¥ä½œæµç¨‹</strong><br><img src="https://docs.gradle.com/build-scan-plugin/images/build-scan-service-overview.svg" alt="overview"></p>
<h3 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><p>é…ç½®æ–¹å¼å¾ˆç®€å•ï¼Œåªéœ€è¦åœ¨build.gradleä¸­åŠ å…¥</p>
<pre class="line-numbers language-groovy"><code class="language-groovy">plugins <span class="token punctuation">{</span>
    id <span class="token string">'com.gradle.build-scan'</span> version <span class="token string">'1.9'</span> 
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>æ·»åŠ äº†æ’ä»¶åï¼Œå¯ä»¥é€šè¿‡buildScanå—æ¥é…ç½®æ’ä»¶ï¼Œå…¶ä¸­æœ‰ä¸¤ä¸ª<code>license</code>ç›¸å…³çš„å±æ€§æ˜¯<strong><em>å¿…éœ€è¦é…ç½®</em></strong>çš„</p>
<pre class="line-numbers language-groovy"><code class="language-groovy">buildScan <span class="token punctuation">{</span>
    licenseAgreementUrl <span class="token operator">=</span> <span class="token string">'https://gradle.com/terms-of-service'</span>
    licenseAgree <span class="token operator">=</span> <span class="token string">'yes'</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>import changesï¼ˆå¦‚æœæ²¡æœ‰å‹¾é€‰auto-importï¼‰ï¼Œå¯ä»¥çœ‹åˆ°Gradle Projecté¢æ¿ä¸Šå¤šäº†ä¸ªtask<br><img src="/images/gradle_build_scan_task.png" alt=""></p>
<p><strong>tip</strong></p>
<ul>
<li>å¦‚æœæ·»åŠ æ–°çš„pluginï¼Œåº”è¯¥ç¡®ä¿build-scan<strong><em>æ€»æ˜¯åœ¨ç¬¬ä¸€ä¸ªä½ç½®</em></strong>ï¼Œå¦åˆ™å…¶ä¹‹å‰çš„æ’ä»¶è™½ç„¶ä»ç„¶æ­£å¸¸å·¥ä½œï¼Œä½†æ˜¯æ— æ³•åˆ°æŠ“å–ç›¸å…³çš„æ„å»ºä¿¡æ¯</li>
</ul>
<h3 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h3><p>å…ˆæ‰§è¡Œbuild -&gt; buildï¼Œå†æ‰§è¡Œè¿™ä¸ªbuild scan -&gt; buildScanPublishPreviousï¼Œä¸å‡ºæ„å¤–å¯ä»¥çœ‹åˆ°terminalä¸­è¿”å›äº†ä¸€ä¸ªé“¾æ¥</p>
<pre class="line-numbers language-text"><code class="language-text">9:50:39 PM: Executing external task 'buildScanPublishPrevious'...
:buildScanPublishPrevious

Publishing build scan...
https://gradle.com/s/af72je4qbzhme

BUILD SUCCESSFUL

Total time: 1.283 secs
9:50:41 PM: External task execution finished 'buildScanPublishPrevious'.
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>æ‰“å¼€é“¾æ¥åå¯ä»¥çœ‹åˆ°è¿™æ ·ä¸€ä¸ªç•Œé¢</p>
<p><img src="/images/gradle_build_scan_insight.png" alt="build scan"></p>
<p>æ¥ä¸‹æ¥åœ¨ä»»ä¸€ä¸ªå•å…ƒæµ‹è¯•å†…åŠ å…¥ä¸€è¡Œè®©æ„å»ºå¤±è´¥</p>
<pre class="line-numbers language-java"><code class="language-java">        Assert<span class="token punctuation">.</span><span class="token function">fail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>å†æ‰§è¡Œä¸€æ¬¡æ„å»ºï¼Œæ‰“å¼€é“¾æ¥æŸ¥çœ‹<br><img src="/images/gradle_build_scan_insight_failure.png" alt="failed build scan"></p>
<p>å¯ä»¥çœ‹åˆ°æœ‰ä»¥ä¸‹å‡ å¤§ä¼˜ç‚¹ï¼š</p>
<ul>
<li>ä¿¡æ¯å±•ç¤ºéå¸¸å…¨é¢ä¸°å¯Œã€ç›´è§‚</li>
<li>è‰¯å¥½çš„åˆ†ç±»ã€æŠ˜å ï¼Œè®©ç”¨æˆ·è‡ªå·±é€‰æ‹©å±•å¼€æ„Ÿå…´è¶£çš„å†…å®¹ï¼Œéå¸¸å‹å¥½</li>
<li>ç½‘é¡µå½¢å¼ï¼Œéå¸¸æ˜“äºåˆ†äº«ï¼ˆè¿™ä¸€ç‚¹æœ‰ç‚¹ç±»ä¼¼<code>AngularJS</code>çš„é”™è¯¯ä¿¡æ¯ï¼Œä¸è¿‡æ²¡è€ƒå¯Ÿæ˜¯è°å€Ÿé‰´è°çš„ï¼Œæˆ–è®¸ä¸¤è€…éƒ½ä¸æ˜¯åŸåˆ›ï¼Ÿï¼‰ã€‚</li>
</ul>
<p>ç›¸æ¯”ä¹‹ä¸‹ï¼Œè¿™é‡Œä¸å¾—ä¸æåˆ°ä¸€ç›´è¢«äººåæ§½çš„Mavençš„æ„å»ºä¿¡æ¯ï¼ŒçœŸå¿ƒæ˜¯éå¸¸ä¸å‹å¥½ğŸ˜’</p>
<p><strong>tip</strong></p>
<ul>
<li>å¦‚æœæ„å»ºæ—¶å‡ºç°â€There is no previous build data available to publish.â€ï¼Œå¯èƒ½æ˜¯æ²¡æœ‰å…ˆæ‰§è¡Œä»»ä¸€taskã€‚</li>
</ul>
<h2 id="Applicationæ’ä»¶"><a href="#Applicationæ’ä»¶" class="headerlink" title="Applicationæ’ä»¶"></a>Applicationæ’ä»¶</h2><h3 id="ä»‹ç»-1"><a href="#ä»‹ç»-1" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h3><p>Applicationæ’ä»¶å¯ä»¥è®©ä½ è½»æ¾åœ°åœ¨æœ¬åœ°å¼€å‘ç¯å¢ƒä¸‹<code>æ‰§è¡ŒJVMåº”ç”¨</code>ï¼ŒåŒæ—¶è¿˜å¯ä»¥å¸®åŠ©ä½ å°†åº”ç”¨æ‰“åŒ…æˆä¸€ä¸ªåŒ…å«äº†å„ç±»æ“ä½œç³»ç»Ÿå¯¹åº”<code>å¯åŠ¨è„šæœ¬</code>çš„tar and/or zipæ–‡ä»¶ã€‚</p>
<p><a href="https://docs.gradle.org/3.5/userguide/application_plugin.html" target="_blank" rel="noopener">The Application Plugin</a></p>
<h3 id="é…ç½®-1"><a href="#é…ç½®-1" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><p><strong>build.gradle</strong></p>
<pre class="line-numbers language-groovy"><code class="language-groovy">apply plugin<span class="token punctuation">:</span> <span class="token string">'application'</span>
mainClassName <span class="token operator">=</span> <span class="token string">"cn.tac.test.gradle.Application"</span>    <span class="token comment" spellcheck="true">//æŒ‡å®šç¨‹åºå…¥å£ç±»</span>
<span class="token comment" spellcheck="true">//applicationDefaultJvmArgs = ["-Dgreeting.language=en"]      //åº”ç”¨ç¨‹åºå¯åŠ¨æ—¶çš„jvmå‚æ•°</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>æ·»åŠ äº†Applicationæ’ä»¶åï¼Œé¡¹ç›®ä¼šå¤šå‡ºä»¥ä¸‹å‡ ä¸ªtask</p>
<ul>
<li>run</li>
<li>startScripts</li>
<li>installDist</li>
<li>distZip</li>
<li>distTar</li>
</ul>
<p>å…·ä½“å¯ä»¥é€šè¿‡tasksä»»åŠ¡æŸ¥çœ‹</p>
<p><strong>tips</strong></p>
<ul>
<li>æŒ‰ç…§å®˜æ–¹çš„è¯´æ³•ï¼ŒApplicationæ’ä»¶å·²ç»éšå¼åœ°åŒ…æ‹¬äº†<code>Java</code>æ’ä»¶å’Œ<code>Distribution</code>æ’ä»¶ï¼Œå› æ­¤å¦‚æœä½ åŸæ¥å¼•å…¥äº†è¿™ä¸¤ä¸ªæ’ä»¶ï¼Œç°åœ¨å¯ä»¥å»æ‰äº†</li>
</ul>
<h3 id="ä½¿ç”¨-1"><a href="#ä½¿ç”¨-1" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h3><p>ä»¥æˆ‘çš„mainå‡½æ•°ä¸ºä¾‹ï¼ˆæ³¨æ„è¦è·Ÿ<code>mainClassName</code>å±æ€§æŒ‡å®šçš„ç±»ä¸€è‡´ï¼‰</p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">package</span> cn<span class="token punctuation">.</span>tac<span class="token punctuation">.</span>test<span class="token punctuation">.</span>gradle<span class="token punctuation">;</span>

<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Arrays<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Application</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>args<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
             System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"hello, it's you args: "</span> <span class="token operator">+</span> Arrays<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
             System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"hello, you do not input any args"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="æ‰§è¡Œåº”ç”¨"><a href="#æ‰§è¡Œåº”ç”¨" class="headerlink" title="æ‰§è¡Œåº”ç”¨"></a>æ‰§è¡Œåº”ç”¨</h4><pre class="line-numbers language-shell"><code class="language-shell">$ sh gradlew run

> Task :run
hello, you do not input any args
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>å¦‚æœè¦<code>ä¼ å…¥å‚æ•°</code>ï¼Œå¯ä»¥é…ç½®ä¸€ä¸‹runä»»åŠ¡<br><strong>build.gradle</strong></p>
<pre class="line-numbers language-groovy"><code class="language-groovy">run <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>project<span class="token operator">.</span><span class="token function">hasProperty</span><span class="token punctuation">(</span><span class="token string">"myArgs"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      args myArgs
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>ä¸Šé¢é…ç½®çš„æ„æ€æ˜¯ï¼Œå¦‚æœå½“å‰é¡¹ç›®çš„projectå¯¹è±¡åŒ…å«æœ‰myArgså±æ€§ï¼Œé‚£ä¹ˆåœ¨æ‰§è¡Œmainå‡½æ•°æ—¶å°±å°†è¿™ä¸ªå±æ€§ä½œä¸ºå‚æ•°ä¼ é€’ï¼Œä¹‹åæˆ‘ä»¬å¯ä»¥è¿™æ ·æ‰§è¡Œ</p>
<pre class="line-numbers language-shell"><code class="language-shell">$ sh gradlew run -PmyArgs="123","abc","qaz"

> Task :run
hello, it s you args: [123,abc,qaz]
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>å…¶ä¸­-PmyArgsåˆ†ä¸ºä¸¤éƒ¨åˆ†</p>
<ul>
<li>-Pï¼Œå‘½ä»¤è¡Œoptionã€‚ä½œç”¨æ˜¯æŒ‡å®šä¸€ä¸ªå±æ€§çš„å€¼runï¼Œä¸èƒ½çœå»</li>
<li>myArgsï¼Œæˆ‘ä»¬åˆšåˆšåœ¨runä»»åŠ¡ä¸­è‡ªå®šä¹‰çš„å±æ€§ï¼Œé€šè¿‡-PæŒ‡å®š</li>
</ul>
<h4 id="æ‰“åŒ…"><a href="#æ‰“åŒ…" class="headerlink" title="æ‰“åŒ…"></a>æ‰“åŒ…</h4><p>æ‰§è¡Œä»¥ä¸‹è„šæœ¬å¯ä»¥è¿›è¡Œæ‰“åŒ…</p>
<pre class="line-numbers language-shell"><code class="language-shell">$ sh gradlew distTar distZip
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>æ‰“åŒ…å¥½çš„å†…å®¹åœ¨<code>/build/distributions</code>ä¸­ï¼Œåˆ†åˆ«å¤šäº†ä¸€ä¸ªtaræ–‡ä»¶å’Œä¸€ä¸ªzipæ–‡ä»¶ï¼Œè§£å‹åæŸ¥çœ‹ç›®å½•ç»“æ„å¦‚ä¸‹</p>
<pre class="line-numbers language-shell"><code class="language-shell">$ tree .
.
â”œâ”€â”€ bin
â”‚   â”œâ”€â”€ gradle_cli
â”‚   â””â”€â”€ gradle_cli.bat
â””â”€â”€ lib
    â””â”€â”€ gradle_cli-1.0.jar
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>tips</strong></p>
<ul>
<li>å½“ç„¶ä½ ä¹Ÿå¯ä»¥é€šè¿‡buildä»»åŠ¡æ¥æ‰“åŒ…ï¼Œbuildä»»åŠ¡ä¼šè‡ªåŠ¨å°†<code>distTar</code>å’Œ<code>distZip</code>ä»»åŠ¡åŒ…æ‹¬è¿›å»</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://taccisum.github.io/learn_gradle_1.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="taccisum">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/Avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="taccisum ğŸ˜‰">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/learn_gradle_1.html" itemprop="url">Gradleå­¦ä¹ ï¼ˆä¸€ï¼‰ - Getting Started</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-09-26T15:39:42+08:00">
                2017-09-26
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/gradle/" itemprop="url" rel="index">
                    <span itemprop="name">gradle</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>è™½ç„¶ä¸€ç›´ä»¥æ¥éƒ½ç”¨Mavenä½œä¸ºjavaé¡¹ç›®çš„æ„å»ºå·¥å…·ï¼Œä½†æ—©å°±å¬è¯´è¿‡Gradleå¤§åï¼Œäºæ˜¯ä»Šå¤©ç»ˆäºæŠ½å‡ºæ—¶é—´æ¥äº†è§£ä¸€ä¸‹è¿™æ¬¾å·ç§°ç»“åˆäº†Antå’ŒMavenä¼˜ç‚¹çš„æ„å»ºå·¥å…·ã€‚<br>è™½ç„¶Gradleæ”¯æŒå¤šç§è¯­è¨€ï¼Œä½†è¿™ä¸ªç³»åˆ—çš„æ–‡ç« ä¸»è¦ä»¥Javaé¡¹ç›®æ„å»ºä¸ºä¸»ã€‚ç”±äºæœ¬äººä¸æ˜¯åšAndroidå¼€å‘ï¼Œæ‰€ä»¥è¿™ä¸ªç³»åˆ—çš„æ–‡ç« å¯èƒ½ä¼šæ›´åå‘äºJava Webå¼€å‘è§†è§’ã€‚</p>
<h2 id="å­¦ä¹ èµ„æºæ¨è"><a href="#å­¦ä¹ èµ„æºæ¨è" class="headerlink" title="å­¦ä¹ èµ„æºæ¨è"></a>å­¦ä¹ èµ„æºæ¨è</h2><p><a href="https://gradle.org/docs/#getting-started" target="_blank" rel="noopener">å®˜æ–¹Documentation</a> å†…å®¹éå¸¸å…¨é¢ï¼Œç¼ºç‚¹æ˜¯å…¨è‹±æ–‡ï¼ˆå¯¹äºè‹±è¯­å·®çš„åŒå­¦ç®€ç›´æ˜¯å™©æ¢¦ï¼‰<br><a href="https://pkaq.gitbooks.io/gradletraining/content/" target="_blank" rel="noopener">ã€Šè·Ÿæˆ‘å­¦Gradleã€‹</a> Graldeä¸­æ–‡ç”¨æˆ·ç»„ç¼–å†™çš„ä¸­æ–‡ç³»åˆ—æ•™ç¨‹ï¼Œç¼ºç‚¹æ˜¯è¿˜ä¸å¤Ÿå®Œå–„ï¼Œæœ‰äº›ç« èŠ‚è¿˜æ²¡æœ‰å†…å®¹<br><a href="https://lippiouyang.gitbooks.io/gradle-in-action-cn/content/index.html" target="_blank" rel="noopener">ã€ŠGradle In Actionã€‹ä¸­è¯‘ç‰ˆ</a> ä¹¦æˆ‘æ²¡å®Œæ•´çœ‹è¿‡ï¼Œåªæ˜¯æŸ¥èµ„æ–™æ—¶è¯»è¿‡å‡ ä¸ªç« èŠ‚ï¼Œæ„Ÿè§‰å†…å®¹è¿˜ä¸é”™</p>
<h2 id="æ¦‚è²Œäº†è§£"><a href="#æ¦‚è²Œäº†è§£" class="headerlink" title="æ¦‚è²Œäº†è§£"></a>æ¦‚è²Œäº†è§£</h2><h3 id="åŒç±»å·¥å…·æ¯”å¯¹"><a href="#åŒç±»å·¥å…·æ¯”å¯¹" class="headerlink" title="åŒç±»å·¥å…·æ¯”å¯¹"></a>åŒç±»å·¥å…·æ¯”å¯¹</h3><p><strong>Ant</strong><br>Antæ˜¯ç¬¬ä¸€ä¸ªâ€œç°ä»£â€æ„å»ºå·¥å…·ï¼Œäº2000å¹´å‘å¸ƒåŸºäºè¿‡ç¨‹å¼ç¼–ç¨‹çš„ideaï¼Œå…·å¤‡<code>æ’ä»¶åŠŸèƒ½</code>åŠé€šè¿‡ç½‘ç»œè¿›è¡Œ<code>ä¾èµ–ç®¡ç†</code>çš„åŠŸèƒ½ï¼ˆç»“åˆApache Ivyï¼‰ã€‚ä¸è¶³ä¹‹å¤„æ˜¯é‡‡ç”¨XMLä½œä¸ºè„šæœ¬ç¼–å†™æ ¼å¼ï¼Œä¸ç¬¦åˆè¿‡ç¨‹åŒ–ç¼–ç¨‹çš„åˆè¡·ã€‚</p>
<p><strong>Maven</strong><br>Mavenå‡ºç°çš„ç›®çš„æ˜¯è§£å†³Antå¸¦æ¥çš„ä¸€äº›é—®é¢˜ï¼Œå‘å¸ƒäº2004å¹´ã€‚Mavenä¾é <code>çº¦å®š</code>å¹¶æä¾›ç°æˆçš„å¯è°ƒç”¨çš„ç›®æ ‡ï¼Œé¦–åˆ›äº†ä»ç½‘ç»œä¸‹è½½ä¾èµ–çš„åŠŸèƒ½ã€‚ä¾ç„¶é‡‡ç”¨XMLä½œä¸ºé…ç½®æ–‡ä»¶ï¼ˆå› æ­¤åŒæ ·æœ‰è·ŸAntä¸€æ ·éš¾ä»¥å®šåˆ¶åŒ–æ„å»ºè¿‡ç¨‹çš„ç¼ºç‚¹ï¼‰ã€‚å¦å¤–Mavenè™½ç„¶èšç„¦äºä¾èµ–ç®¡ç†ï¼Œä½†å¹¶ä¸èƒ½å¾ˆå¥½åœ°å¤„ç†ç›¸åŒåº“æ–‡ä»¶ä¸åŒç‰ˆæœ¬ä¹‹é—´çš„å†²çªï¼ˆä¸å¦‚Ivyï¼‰ã€‚</p>
<p><strong>Gradle</strong><br>Gradleç»“åˆäº†ä¸¤è€…çš„ä¼˜ç‚¹ï¼Œå¹¶åœ¨æ­¤åŸºç¡€ä¸Šåšäº†è®¸å¤šæ”¹è¿›ã€‚<br>Gradleä½¿ç”¨åŸºäºGroovyçš„<code>DSL</code>ç¼–å†™æ„å»ºè„šæœ¬ï¼Œå¯ä»¥æ›´ç»†è‡´åœ°æ§åˆ¶ç¼–è¯‘æ‰“åŒ…è¿‡ç¨‹ï¼ˆè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆAndroid Studioé»˜è®¤é‡‡ç”¨Gradleä½œä¸ºæ„å»ºå·¥å…·çš„åŸå› ï¼‰ã€‚<br>Gradleå¯¹<code>å¤šæ¨¡å—</code>é¡¹ç›®æœ‰å¾ˆå¥½çš„æ”¯æŒã€‚<br>Gradleæ”¯æŒ<code>å¤šè¯­è¨€</code>ï¼ŒåŒ…æ‹¬javaã€groovyã€scalaã€c++ç­‰ã€‚<br>Gradleä½¿ç”¨Apache Ivyå¤„ç†ä¾èµ–ï¼Œå› æ­¤ä¾èµ–ç®¡ç†æ–¹é¢ä¼˜äºMavenã€‚åŒæ—¶Gradleå¯ä»¥ä½¿ç”¨<code>å¤šç§ç±»å‹çš„è¿œç¨‹ä»“åº“</code>ï¼Œå¦‚Mavenä»“åº“ã€Ivyä»“åº“ã€‚</p>
<h3 id="å…³äºDSL"><a href="#å…³äºDSL" class="headerlink" title="å…³äºDSL"></a>å…³äºDSL</h3><p>DSLæ˜¯<code>Domain Specific Language</code>çš„ç¼©å†™ï¼Œå³é¢†åŸŸç‰¹å®šè¯­è¨€ã€‚åŒå­—é¢ä¸Šçš„æ„æ€ï¼Œå°±æ˜¯ä¸“ç”¨äºå¤„ç†æŸä¸€é¢†åŸŸé—®é¢˜çš„ç‰¹å®šè¯­è¨€ï¼Œä¾‹å¦‚ç”¨äºwebé¡µé¢å¼€å‘çš„HTMLè¯­è¨€ã€ç”¨äºGNU Emacsçš„Emacs Lispç­‰ï¼Œç”šè‡³æœ‰ä¸€äº›ç®€å•çš„DSLåªç”¨äºæŸä¸ªå•åº”ç”¨ç¨‹åºï¼ˆä¹Ÿç§°ä¸ºMini-Languagesï¼‰ã€‚</p>
<p>ç”±æ­¤å¯è§ï¼ŒGradleä½¿ç”¨çš„DSLåº”è¯¥æ˜¯ä¸€ç§ä¸“ç”¨äºé¡¹ç›®æ„å»ºçš„è¯­è¨€ã€‚</p>
<p><a href="https://en.wikipedia.org/wiki/Domain-specific_language" target="_blank" rel="noopener">æ›´å¤šå†…å®¹</a></p>
<h2 id="Getting-Started-IntelliJ-IDEA"><a href="#Getting-Started-IntelliJ-IDEA" class="headerlink" title="Getting Started - IntelliJ IDEA"></a>Getting Started - IntelliJ IDEA</h2><p>åˆæ¬¡æ¥è§¦ä¸ºäº†èƒ½å¤Ÿå¿«é€Ÿçœ‹åˆ°æ•ˆæœï¼Œæ‰€ä»¥ç›´æ¥ä½¿ç”¨ideæ¥å…¥é—¨ã€‚ä¸è¿‡ä¸ºäº†å¯¹Gradleæœ‰æ›´æ·±å…¥çš„äº†è§£ï¼Œå¾€åçš„ç»ƒä¹ é¡¹ç›®å°†å…¨éƒ¨ä½¿ç”¨å‘½ä»¤è¡Œæ„å»ºã€‚</p>
<h3 id="åˆ›å»ºé¡¹ç›®"><a href="#åˆ›å»ºé¡¹ç›®" class="headerlink" title="åˆ›å»ºé¡¹ç›®"></a>åˆ›å»ºé¡¹ç›®</h3><ol>
<li>New -&gt; Project -&gt; Gradleï¼Œæ–°å»ºä¸€ä¸ªGradleé¡¹ç›®ï¼ˆå°±åƒMavenä¸€æ ·ï¼ŒIDEAå†…ç½®äº†Gradleï¼Œæ‰€ä»¥ä¸éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨å»å®‰è£…äº†ï¼‰</li>
<li>å¡«å†™GroupIdã€ArtifactIdã€Versionï¼ˆè¿™äº›è·ŸMavenæ˜¯ä¸€æ ·çš„ï¼‰</li>
<li>è¿™é‡Œå‹¾é€‰ä¸ŠCreate directories for empty content roots automaticallyé€‰é¡¹ï¼Œè®©IDEAå¸®æˆ‘ä»¬åˆ›å»ºå¥½ç›®å½•ç»“æ„</li>
<li>Finishï¼Œåˆæ¬¡æ„å»ºå¯èƒ½ä¼šèŠ±è´¹è¾ƒé•¿çš„æ—¶é—´ï¼ˆè·ŸMavenä¸€æ ·ï¼Œè¦ä»ç½‘ç»œä¸‹è½½ä¸€äº›ä¸œè¥¿ï¼Œæ¯”å¦‚é¡¹ç›®æ¨¡æ¿ï¼‰ï¼Œæ„å»ºå¥½åçš„ç›®å½•ç»“æ„å¦‚ä¸‹<br><img src="/images/gradle_project_structure.png" alt="project structure"></li>
</ol>
<p>æ¥çœ‹ä¸‹å„folder&amp;fileçš„å«ä¹‰ï¼š</p>
<ul>
<li>.gradle<blockquote>
<p>Gradleç›¸å…³çš„æ”¯æŒæ–‡ä»¶ï¼Œä¸€èˆ¬ä¸ç”¨å…³å¿ƒ</p>
</blockquote>
</li>
<li>gradle<ul>
<li>wrapper <blockquote>
<p>The wrapper is a small script and supporting jar and properties file that allows a user to execute Gradle tasks even if they donâ€™t already have Gradle installed. Generating a wrapper also ensures that the user will use the same version of Gradle as the person who created the project.<br><a href="https://guides.gradle.org/creating-new-gradle-builds/" target="_blank" rel="noopener">Creating New Gradle Project</a></p>
</blockquote>
å¤§æ„ä¸ºï¼Œwrapperé‡Œé¢æ˜¯ä¸€äº›ç®€å•çš„<code>è„šæœ¬</code>ã€ä½¿ç”¨æˆ·èƒ½åœ¨æ²¡æœ‰å®‰è£…Gradleçš„æƒ…å†µä¸‹ä¹Ÿèƒ½æ‰§è¡ŒGradleä»»åŠ¡çš„supporting <code>jar</code>åŠ<code>properties</code>æ–‡ä»¶ç­‰ï¼ŒåŒæ—¶wrapperè¿˜èƒ½ç¡®ä¿ç”¨æˆ·æ‰§è¡ŒGradleä»»åŠ¡æ—¶ä½¿ç”¨çš„ç‰ˆæœ¬ä¸é¡¹ç›®åˆ›å»ºè€…ä½¿ç”¨çš„Gradleç‰ˆæœ¬ç›¸åŒã€‚<strong>æ€»ä¹‹æ˜¯ä¸€ä¸ªå¼€å‘äººå‘˜åŸºæœ¬ä¸éœ€è¦å…³å¿ƒçš„ç›®å½•ã€‚</strong></li>
</ul>
</li>
<li>src<blockquote>
<p>æºç ç›®å½•ï¼Œé‡‡ç”¨äº†ä¸Mavenç›¸åŒçš„ç»“æ„</p>
</blockquote>
</li>
<li>build.gradle<blockquote>
<p>Gradleçš„æ„å»ºé…ç½®æ–‡ä»¶ï¼ˆbuild fileï¼‰ï¼Œ<strong><em>éœ€è¦æˆ‘ä»¬ç¼–å†™å†…å®¹</em></strong>ï¼ˆç±»ä¼¼Mavençš„pom.xmlï¼‰ã€‚<br>æŒ‰ç…§å®˜æ–¹çš„æè¿°ï¼Œæ¯ä¸ªbuild.gradleéƒ½é…ç½®äº†ä¸€ä¸ª<code>org.gradle.api.Project</code>ç±»çš„å®ä¾‹ï¼Œå¹¶ä¸”è¿™ä¸ªå®ä¾‹ä¼šæœ‰è®¸å¤šå†…å»ºçš„æ–¹æ³•å’Œå±æ€§ï¼ˆç¨åCLIé¡¹ç›®ä¸­å¯ä»¥çœ‹åˆ°gradlew propertiesåˆ—å‡ºäº†ä¸€å †projectçš„å±æ€§ï¼‰ã€‚<br><a href="https://docs.gradle.org/current/dsl/" target="_blank" rel="noopener">build.gradleçš„DSLå‚è€ƒ</a></p>
</blockquote>
</li>
<li>gradlew/gradlew.bat<blockquote>
<p>åˆ†åˆ«ç”¨äºç±»unixç³»ç»Ÿå’Œwindowsç³»ç»Ÿä¸‹çš„wrapperè„šæœ¬ï¼Œä¹‹åå¯ä»¥çœ‹åˆ°ï¼Œåˆ›å»ºäº†wrapperåæˆ‘ä»¬æ‰€æœ‰çš„æŒ‡ä»¤éƒ½é€šè¿‡wrapperè„šæœ¬æ¥æ‰§è¡Œ</p>
</blockquote>
</li>
<li>settings.gradle<blockquote>
<p>ä¸å¤šæ¨¡å—é¡¹ç›®é…ç½®æœ‰å…³çš„æ–‡ä»¶ï¼Œç”¨äºæè¿°é¡¹ç›®æ¨¡å—ä¹‹é—´çš„å…³ç³»</p>
</blockquote>
</li>
</ul>
<h3 id="Hello-World"><a href="#Hello-World" class="headerlink" title="Hello World"></a>Hello World</h3><p>åˆ›å»ºå¥½é¡¹ç›®åå¯ä»¥çœ‹åˆ°ï¼Œå·²ç»æœ‰è®¸å¤šé…ç½®å¥½çš„ä¸œè¥¿äº†ï¼Œå¦‚junitä¾èµ–ã€Gradle wrapperç­‰ï¼Œæ‰€ä»¥ç°åœ¨å·²æˆ‘ä»¬ç›´æ¥å¯ä»¥ç›´æ¥å†™å•å…ƒæµ‹è¯•</p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GettingStarted</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSimply</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"hello gradle"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>æ‰§è¡Œå¯ä»¥çœ‹åˆ°æ§åˆ¶å°è¾“å‡º</p>
<pre class="line-numbers language-text"><code class="language-text">hello gradle
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="Getting-Started-CLI"><a href="#Getting-Started-CLI" class="headerlink" title="Getting Started - CLI"></a>Getting Started - CLI</h2><p>ä½¿ç”¨ideå†™ä¸ªGradleçš„Hello Worldç¡®å®éå¸¸ç®€å•ï¼Œä½†ä½¿ç”¨CLIæ¥æ­å»ºé¡¹ç›®ï¼Œèƒ½è®©æˆ‘ä»¬å¯¹Gradleæœ‰æ›´åŠ æ·±å…¥çš„äº†è§£ã€‚<br>æ¥ä¸‹æ¥æˆ‘ä»¬å°†å°è¯•ç”¨CLIå†™ä¸€ä¸ªHello Worldã€‚</p>
<h3 id="å®‰è£…Gradle"><a href="#å®‰è£…Gradle" class="headerlink" title="å®‰è£…Gradle"></a>å®‰è£…Gradle</h3><p>ç”±äºæˆ‘ä»¬è¿™æ¬¡ç”¨çš„æ˜¯CLIï¼Œæ‰€ä»¥å¿…é¡»æ‰‹åŠ¨å®‰è£…Gradleã€‚<br>ä»¥æˆ‘ç”¨çš„MacOSä¸ºä¾‹ï¼Œæ‰“å¼€terminalï¼Œrun</p>
<pre class="line-numbers language-shell"><code class="language-shell">$ brew install gradle
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>å®‰è£…å‰å¿…é¡»ç¡®ä¿å®‰è£…äº†<code>jdk1.7</code>ä»¥ä¸Šç‰ˆæœ¬ï¼ˆæˆ‘ç”¨çš„Gradle 4.1ç‰ˆæœ¬çš„è¦æ±‚ï¼‰ï¼Œå…¶å®ƒç³»ç»Ÿç”¨æˆ·å¯ä»¥å‚è€ƒ<a href="https://gradle.org/install/" target="_blank" rel="noopener">Installation</a></p>
<p>ç„¶årunï¼Œè‹¥å·²æˆåŠŸå®‰è£…å¯ä»¥çœ‹åˆ°</p>
<pre class="line-numbers language-shell"><code class="language-shell">$ gradle --version
------------------------------------------------------------
Gradle 4.1
------------------------------------------------------------

Build time:   2017-08-07 14:38:48 UTC
Revision:     941559e020f6c357ebb08d5c67acdb858a3defc2

Groovy:       2.4.11
Ant:          Apache Ant(TM) version 1.9.6 compiled on June 29 2015
JVM:          1.8.0_121 (Oracle Corporation 25.121-b13)
OS:           Mac OS X 10.12.4 x86_64
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="åˆ›å»ºå·¥ç¨‹"><a href="#åˆ›å»ºå·¥ç¨‹" class="headerlink" title="åˆ›å»ºå·¥ç¨‹"></a>åˆ›å»ºå·¥ç¨‹</h3><p>åˆ›å»ºä¸€ä¸ªç©ºæ–‡ä»¶å¤¹ä½œä¸ºå·¥ç¨‹ç›®å½•ï¼ŒåŒæ—¶åˆ›å»ºä¸€ä¸ªbuild.gradleç©ºæ–‡ä»¶</p>
<pre class="line-numbers language-shell"><code class="language-shell">$ mkdir gradle_cli
$ cd gradle_cli
$ touch build.gradle
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>ç„¶åæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ç”ŸæˆGradle Wrapper</p>
<pre class="line-numbers language-shell"><code class="language-shell">$ gradle wrapper
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>å¯ä»¥çœ‹åˆ°å½“å‰ç›®å½•çš„å˜åŒ–</p>
<pre class="line-numbers language-shell"><code class="language-shell">$ tree .
.
â”œâ”€â”€ build.gradle
â”œâ”€â”€ gradle
â”‚   â””â”€â”€ wrapper
â”‚       â”œâ”€â”€ gradle-wrapper.jar
â”‚       â””â”€â”€ gradle-wrapper.properties
â”œâ”€â”€ gradlew
â””â”€â”€ gradlew.bat
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>ç°åœ¨å¯ä»¥é€šè¿‡wrapperè„šæœ¬æ¥æ‰§è¡Œå„é¡¹ä»»åŠ¡ï¼Œè¿™æ ·å¯ä»¥ç¡®ä¿åœ¨æ›´æ¢äº†ç¯å¢ƒåä¾ç„¶èƒ½ä½¿ç”¨åˆ›å»ºé¡¹ç›®æ—¶ä½¿ç”¨çš„Gradleç‰ˆæœ¬è¿›è¡Œæ„å»ºã€‚</p>
<p>æŸ¥çœ‹propertiesä¿¡æ¯ï¼ˆä»¥ä¸‹è¾“å‡ºåšäº†å¤§é‡åˆ å‡ï¼‰</p>
<pre class="line-numbers language-shell"><code class="language-shell">$ sh gradlew properties
> Task :properties

------------------------------------------------------------
Root project
------------------------------------------------------------

allprojects: [root project 'gradle_cli']
ant: org.gradle.api.internal.project.DefaultAntBuilder@70e298ee
â€¦â€¦
buildDir: /Users/tac/Documents/studyspace/src/java/gradle_cli/build
buildFile: /Users/tac/Documents/studyspace/src/java/gradle_cli/build.gradle
buildScriptSource: org.gradle.groovy.scripts.UriScriptSource@460e8e7a
â€¦â€¦
depth: 0
description: null
displayName: root project 'gradle_cli'
â€¦â€¦
gradle: build 'gradle_cli'
group:
â€¦â€¦
plugins: [org.gradle.api.plugins.HelpTasksPlugin@23fb712b]
â€¦â€¦
project: root project 'gradle_cli'
â€¦â€¦
projectDir: /Users/tac/Documents/studyspace/src/java/gradle_cli
â€¦â€¦
repositories: repository container
resources: org.gradle.api.internal.resources.DefaultResourceHandler@7cad9556
rootDir: /Users/tac/Documents/studyspace/src/java/gradle_cli
rootProject: root project 'gradle_cli'
â€¦â€¦
state: project state 'EXECUTED'
status: release
subprojects: []
tasks: task set
version: unspecified
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>å¯ä»¥çœ‹åˆ°å…¶ä¸­å¤§å¤šæ•°å±æ€§éƒ½å·²ç»æœ‰äº†é»˜è®¤çš„å€¼ï¼Œè¿™ä¹Ÿæ°å¥½éªŒè¯äº†Gradleçº¦å®šä¼˜äºé…ç½®çš„åŸåˆ™ã€‚<br>å¦‚æœæˆ‘ä»¬éœ€è¦ä¿®æ”¹ä¸€äº›å±æ€§å€¼ï¼Œå¯ä»¥é€šè¿‡å†™build.gradleæ–‡ä»¶æ¥è¿›è¡Œé…ç½®</p>
<pre class="line-numbers language-groovy"><code class="language-groovy">description <span class="token operator">=</span> <span class="token string">'A Gradle build project for CLI'</span>
version <span class="token operator">=</span> <span class="token string">'1.0'</span>
group <span class="token operator">=</span> <span class="token string">'cn.tac.test'</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>å†æ¬¡æŸ¥çœ‹propertieså¯ä»¥çœ‹åˆ°å±æ€§å·²ç»æ›´æ”¹äº†</p>
<pre class="line-numbers language-shell"><code class="language-shell">$ sh gradlew properties | grep -E "group|description|version"
description: A Gradle build project for CLI
group: cn.tac.test
version: 1.0
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>tip</strong></p>
<ul>
<li>ä½ ä¹Ÿå¯ä»¥å…ˆç”ŸæˆWrapperå†åˆ›å»ºbuild.gradleï¼Œå¹¶ä¸ä¼šæœ‰å½±å“</li>
<li>é™¤äº†æ‰‹åŠ¨åˆ›å»ºä¹‹å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡<code>gradle init</code>æŒ‡ä»¤æ¥åˆå§‹åŒ–é¡¹ç›®ã€‚åˆå§‹åŒ–çš„å†…å®¹åŒ…æ‹¬æ‰§è¡Œgradle wrapperï¼Œä»¥åŠè‡ªåŠ¨ç”Ÿæˆbuild.gradleå’Œsettings.gradleï¼Œå¹¶ä¸”ç”Ÿæˆçš„æ–‡ä»¶é‡Œé¢å·²ç»æœ‰äº†ä¸€äº›è‡ªåŠ¨ç”Ÿæˆçš„é…ç½®ï¼ˆé»˜è®¤æ˜¯æ³¨é‡ŠçŠ¶æ€ï¼Œå³æœªå¯ç”¨ï¼‰ã€‚</li>
</ul>
<h3 id="é…ç½®ç¯å¢ƒ"><a href="#é…ç½®ç¯å¢ƒ" class="headerlink" title="é…ç½®ç¯å¢ƒ"></a>é…ç½®ç¯å¢ƒ</h3><p>ç”±äºæˆ‘ä»¬æ˜¯æ‰‹åŠ¨åˆ›å»ºçš„ç©ºbuild.gradleï¼Œè¦æ„å»ºjavaé¡¹ç›®ï¼Œæˆ‘ä»¬è¿˜éœ€è¦åšä¸€äº›ç®€å•çš„é…ç½®ã€‚<br>åœ¨build.gradleåŠ å…¥ç›®æ ‡å·¥ç¨‹è¯­è¨€ï¼ˆä¸Šé¢æè¿‡ï¼ŒGradleæ˜¯æ”¯æŒå¤šè¯­è¨€çš„ï¼‰åŠç‰ˆæœ¬ã€ä¾èµ–åŠä¸‹è½½ä¾èµ–çš„ä»“åº“çš„é…ç½®</p>
<pre class="line-numbers language-groovy"><code class="language-groovy">apply plugin<span class="token punctuation">:</span> <span class="token string">'java'</span>
sourceCompatibility <span class="token operator">=</span> <span class="token number">1.8</span>

repositories <span class="token punctuation">{</span>
    <span class="token function">mavenCentral</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

dependencies <span class="token punctuation">{</span>
    testCompile group<span class="token punctuation">:</span> <span class="token string">'junit'</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'junit'</span><span class="token punctuation">,</span> version<span class="token punctuation">:</span> <span class="token string">'4.12'</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>tips</strong></p>
<ul>
<li>å¯ä»¥é€šè¿‡<code>dependencies</code>ä»»åŠ¡æŸ¥çœ‹å½“å‰é¡¹ç›®çš„ä¾èµ–ä¿¡æ¯ã€‚</li>
</ul>
<h3 id="Hello-World-1"><a href="#Hello-World-1" class="headerlink" title="Hello World"></a>Hello World</h3><p>é…ç½®å¥½ç¯å¢ƒåï¼Œæˆ‘ä»¬åˆ›å»ºæºç ç›®å½•åŠå•å…ƒæµ‹è¯•ç±»</p>
<pre class="line-numbers language-shell"><code class="language-shell">$ mkdir -p src/main/java src/main/resources src/test/java src/test/resources
$ cd src/test/java
$ mkdir -p cn/tac/test
$ cd cn/tac/test
$ touch HelloWorld.java
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>ç„¶åæ‰§è¡Œæ„å»ºï¼Œå¦‚æœä¸çŸ¥é“æœ‰å“ªäº›taskså¯ä»¥æ‰§è¡Œï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ¥æŸ¥çœ‹</p>
<pre class="line-numbers language-shell"><code class="language-shell">$ sh gradlew tasks

> Task :tasks

------------------------------------------------------------
All tasks runnable from root project - A Gradle build project for CLI
------------------------------------------------------------

Build tasks
-----------
assemble - Assembles the outputs of this project.
build - Assembles and tests this project.
â€¦â€¦
Build Setup tasks
-----------------
init - Initializes a new Gradle build.
wrapper - Generates Gradle wrapper files.
Documentation tasks
-------------------
javadoc - Generates Javadoc API documentation for the main source code.
Help tasks
----------
â€¦â€¦
Verification tasks
------------------
check - Runs all checks.
test - Runs the unit tests.

Rules
-----
â€¦â€¦
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-shell"><code class="language-shell">$ sh gradlew build
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>å®Œäº†å¯ä»¥çœ‹è§é¡¹ç›®æ ¹ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªbuildç›®å½•ï¼Œé‡Œé¢çš„å†…å®¹å°±æ˜¯æ‰§è¡Œæ„å»ºçš„äº§ç‰©ã€‚ä¸Mavenä¸åŒçš„æ˜¯ï¼Œæœ‰ä¸ªreportsç›®å½•æ˜¯Gradleç”Ÿæˆçš„HTMLæ ¼å¼çš„æ„å»ºæŠ¥å‘Šï¼Œå¯ä»¥é€šè¿‡æµè§ˆå™¨æ‰“å¼€æŸ¥çœ‹<br><img src="/images/gradle_build_reports.jpg" alt="build reports"></p>
<p><strong>tip</strong></p>
<ul>
<li>æœ‰æ²¡æœ‰å‘ç°sh gradlew taskså‡ºæ¥çš„åˆ—è¡¨æœ‰ç‚¹åƒIDEA Gradle Projecté¢æ¿ä¸Šçš„tasksèŠ‚ç‚¹ï¼ŸğŸ˜ƒ</li>
<li>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ä½¿ç”¨gradleè·Ÿgradlewæ‰§è¡Œtaskçš„æ•ˆæœåŸºæœ¬æ˜¯ä¸€æ ·çš„ï¼ŒåŒºåˆ«åœ¨äºgradleä¼šä½¿ç”¨æœ¬åœ°å®‰è£…çš„Gradleç‰ˆæœ¬è¿›è¡Œæ„å»ºï¼Œè€Œgradlewä¼šä½¿ç”¨åˆ›å»ºé¡¹ç›®æ—¶ä½¿ç”¨çš„gradleç‰ˆæœ¬è¿›è¡Œæ„å»ºï¼Œå¦‚æœæœ¬åœ°æ²¡æœ‰æœç´¢åˆ°è¿™ä¸ªç‰ˆæœ¬ï¼Œåˆ™ä¼šè‡ªåŠ¨ä¸‹è½½</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://taccisum.github.io/interpreter_pattern_in_action.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="taccisum">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/Avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="taccisum ğŸ˜‰">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/interpreter_pattern_in_action.html" itemprop="url">è§£é‡Šå™¨æ¨¡å¼å®è·µ</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-09-25T17:12:13+08:00">
                2017-09-25
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/è®¾è®¡æ¨¡å¼/" itemprop="url" rel="index">
                    <span itemprop="name">è®¾è®¡æ¨¡å¼</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="æºç åœ°å€"><a href="#æºç åœ°å€" class="headerlink" title="æºç åœ°å€"></a>æºç åœ°å€</h2><p><a href="https://github.com/taccisum/interpreter_pattern" target="_blank" rel="noopener">Github</a></p>
<h2 id="å…³äºè§£é‡Šå™¨æ¨¡å¼"><a href="#å…³äºè§£é‡Šå™¨æ¨¡å¼" class="headerlink" title="å…³äºè§£é‡Šå™¨æ¨¡å¼"></a>å…³äºè§£é‡Šå™¨æ¨¡å¼</h2><p>è§£é‡Šå™¨æ¨¡å¼æ˜¯è¡Œä¸ºå‹æ¨¡å¼çš„ä¸€ç§ï¼Œå…³äºè§£é‡Šå™¨æ¨¡å¼çš„å®šä¹‰ä»ç½‘ä¸Šæ‘˜æŠ„äº†ä¸€æ®µ</p>
<blockquote>
<p>ç»™å®šä¸€ç§è¯­è¨€ï¼Œå¹¶å®šä¹‰ä»£è¡¨å…¶æ–‡æ³•çš„ç›¸åº”è§£é‡Šå™¨ï¼Œå¹¶ç”¨è¯¥è§£é‡Šå™¨æ¥è§£æä½¿ç”¨è¯¥è¯­è¨€çš„ç¼–å†™çš„å†…å®¹<br><a href="http://java-design-patterns.com/patterns/interpreter/" target="_blank" rel="noopener">JAVA Design pattern</a></p>
</blockquote>
<p>å…¶ä¸­çš„å…³é”®å­—æœ‰ï¼Œ<code>è¯­è¨€æ–‡æ³•</code>ã€<code>è§£é‡Šå™¨</code>ã€‚</p>
<ul>
<li>è¯­è¨€æ–‡æ³•ï¼Œå¦‚ï¼šä¸‹é¢è¦æåˆ°çš„<code>å››åˆ™è¿ç®—è¡¨è¾¾å¼</code>ã€æˆ‘ä»¬æ—¥å¸¸ä½¿ç”¨çš„å„ç§<code>ç¼–ç¨‹è¯­è¨€</code>ã€ç±»è‹±è¯­è¯­æ³•çš„<code>SQL</code>è¯­è¨€ã€ä¸€äº›æ¡†æ¶é‡Œé¢çš„ç‰¹å®šè¯­è¨€ï¼ˆå¦‚Springçš„SpELï¼‰ç­‰ç­‰ï¼Œéƒ½æ˜¯å…·æœ‰å›ºå®šæ–‡æ³•çš„è¯­è¨€ï¼Œè¿™æ„å‘³ç€è¿™äº›è¯­è¨€å‡å¯ä»¥ç”¨è§£é‡Šå™¨æ¨¡å¼æ¥è§£æã€‚å½“ç„¶ï¼Œé™¤æ­¤ä¹‹å¤–ä½ ä¹Ÿå¯ä»¥æ ¹æ®ä½ çš„éœ€æ±‚è‡ªå·±åˆ›é€ ä¸€ç§è¯­è¨€ã€‚</li>
<li>è§£é‡Šå™¨ï¼Œç”¨äºè®©è®¡ç®—æœºã€è®¤è¯†ã€è¿™äº›è¯­è¨€çš„å·¥å…·ï¼Œéœ€è¦ç”±æˆ‘ä»¬ç¨‹åºå‘˜ç¼–ç å®ç°ã€‚è¶Šå¤æ‚çš„è¯­è¨€æ–‡æ³•ï¼Œå…¶ç›¸åº”çš„è§£é‡Šå™¨å®ç°éš¾åº¦è¶Šå¤§ï¼Œæ¯”å¦‚äººç±»çš„ã€è‡ªç„¶è¯­è¨€ã€ã€‚</li>
</ul>
<h2 id="UMLå›¾"><a href="#UMLå›¾" class="headerlink" title="UMLå›¾"></a>UMLå›¾</h2><blockquote>
<p><img src="http://java-design-patterns.com/patterns/interpreter/etc/interpreter_1.png" alt=""><br><a href="http://java-design-patterns.com/patterns/interpreter/" target="_blank" rel="noopener">JAVA Design pattern</a></p>
</blockquote>
<p>å…¶å®å¹¶ä¸ç®—å¤æ‚ï¼ˆå› ä¸ºè§£é‡Šå™¨æ¨¡å¼æœ€å¤æ‚çš„éƒ¨åˆ†åœ¨äºå°†è¯­è¨€è§£æä¸ºå¯¹è±¡çš„è¿‡ç¨‹ï¼Œç¨åçš„å®è·µä¸­å¯ä»¥çœ‹åˆ°ï¼‰ï¼Œè·Ÿç»„åˆæ¨¡å¼çš„UMLå›¾æœ‰ç‚¹ç›¸åƒï¼ˆåŒä¸ºæ ‘å‹æ•°æ®ç»“æ„ï¼‰ï¼Œä¸‹é¢æ˜¯ä¸¤ä¸ªæ¯”è¾ƒé‡è¦çš„ç±»ï¼š</p>
<p><strong>NumberExpression</strong>: æ•°å€¼è¡¨è¾¾å¼ï¼ˆä¹Ÿç§°<code>ç»ˆç»“ç‚¹è¡¨è¾¾å¼</code>ï¼Œæ„ä¸ºè¡¨è¾¾å¼è§£æçš„ç»ˆç»“ç‚¹ï¼Œå¯ä»¥ç®€å•ç†è§£ä¸ºæ ‘å‹ç»“æ„çš„å¶å­èŠ‚ç‚¹ï¼‰ï¼Œæ‰§è¡Œinterpret()ä¸€èˆ¬ä¼šå¾—åˆ°ä¸€ä¸ªå¸¸é‡ä¾›å¤åˆè¡¨è¾¾å¼è®¡ç®—</p>
<p><strong>MultiplyExpression</strong>: å¤åˆè¡¨è¾¾å¼ï¼ˆä¹Ÿç§°<code>éç»ˆç»“ç‚¹è¡¨è¾¾å¼</code>ï¼Œå¯ä»¥ç®€å•ç†è§£ä¸ºæ ‘å‹ç»“æ„çš„æèŠ‚ç‚¹ï¼‰ï¼Œä¸€èˆ¬åŒ…æ‹¬ä¸€ä¸ªæˆ–å¤šä¸ªExpressionç±»å‹çš„å­èŠ‚ç‚¹ï¼Œå­èŠ‚ç‚¹æ•°å³ä»£è¡¨è¯¥å¤åˆè¡¨è¾¾å¼çš„æ“ä½œæ•°æ•°é‡ï¼Œæ‰§è¡Œinterpret()ä¸€èˆ¬ä¼šå¾—åˆ°å…¶å­èŠ‚ç‚¹äº’ç›¸ä½œç”¨åçš„ç»“æœ</p>
<h2 id="ç¼–ç å®è·µ"><a href="#ç¼–ç å®è·µ" class="headerlink" title="ç¼–ç å®è·µ"></a>ç¼–ç å®è·µ</h2><p>ä¸ºäº†èŠ‚çœç¯‡å¹…ï¼Œè¿™é‡Œåªè´´å‡ºéƒ¨åˆ†é‡è¦ä»£ç ï¼Œå®Œæ•´ä»£ç å¯ä»å¼€å¤´çš„æºç åœ°å€ä¸‹è½½ã€‚</p>
<h3 id="ç®€å•å››åˆ™è¿ç®—"><a href="#ç®€å•å››åˆ™è¿ç®—" class="headerlink" title="ç®€å•å››åˆ™è¿ç®—"></a>ç®€å•å››åˆ™è¿ç®—</h3><h4 id="å•å…ƒæµ‹è¯•ç±»"><a href="#å•å…ƒæµ‹è¯•ç±»" class="headerlink" title="å•å…ƒæµ‹è¯•ç±»"></a>å•å…ƒæµ‹è¯•ç±»</h4><pre class="line-numbers language-text"><code class="language-text">cn.tac.test.interpreter.arithmetic.simple.SimpleCalculatorTest
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h4 id="å®ç°æ•ˆæœ"><a href="#å®ç°æ•ˆæœ" class="headerlink" title="å®ç°æ•ˆæœ"></a>å®ç°æ•ˆæœ</h4><p>æ”¯æŒæœ€ç®€å•çš„å››åˆ™è¿ç®—ï¼Œä¸æ”¯æŒæ‹¬å¼§è¿ç®—ï¼Œä¸æ”¯æŒä¼˜å…ˆçº§è¿ç®—ç¬¦ã€‚å› ä¸ºè¯­è¨€æ–‡æ³•è¾ƒç®€å•ï¼Œæ‰€ä»¥è§£æå™¨è¾ƒæ˜“å®ç°ï¼Œé€‚åˆä½œä¸ºHello Worldã€‚</p>
<h4 id="ç›¸å…³ç±»"><a href="#ç›¸å…³ç±»" class="headerlink" title="ç›¸å…³ç±»"></a>ç›¸å…³ç±»</h4><p><strong>Node</strong>: å³Expression</p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Node</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> <span class="token function">interpret</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p><strong>ValueNode</strong>: å³NumberExpressionï¼Œä»£è¡¨æ“ä½œæ•°</p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">ValueNode</span> <span class="token keyword">implements</span> <span class="token class-name">Node</span><span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">int</span> value<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token function">ValueNode</span><span class="token punctuation">(</span><span class="token keyword">int</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>SymbolNode</strong>: å³MultiplyExpressionï¼Œä»£è¡¨è¿ç®—ç¬¦ï¼ˆå¦‚+-*/ï¼‰ï¼Œå› ä¸ºå‡ä¸º<code>äºŒå…ƒæ“ä½œç¬¦</code>ï¼Œæ‰€ä»¥åªæœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹</p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">SymbolNode</span> <span class="token keyword">implements</span> <span class="token class-name">Node</span> <span class="token punctuation">{</span>
    <span class="token keyword">protected</span> Node left<span class="token punctuation">;</span>
    <span class="token keyword">protected</span> Node right<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token function">SymbolNode</span><span class="token punctuation">(</span>Node left<span class="token punctuation">,</span> Node right<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>left <span class="token operator">=</span> left<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>right <span class="token operator">=</span> right<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>SimpleValueNode</strong>: ç®€å•åœ°è¿”å›æ•°å€¼æœ¬èº«</p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SimpleValueNode</span> <span class="token keyword">extends</span> <span class="token class-name">ValueNode</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token function">SimpleValueNode</span><span class="token punctuation">(</span><span class="token keyword">int</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">interpret</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>è¿ç®—ç¬¦èŠ‚ç‚¹</strong>: ä»£è¡¨+-*/</p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PlusNode</span> <span class="token keyword">extends</span> <span class="token class-name">SymbolNode</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token function">PlusNode</span><span class="token punctuation">(</span>Node left<span class="token punctuation">,</span> Node right<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>left<span class="token punctuation">,</span> right<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">interpret</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> left<span class="token punctuation">.</span><span class="token function">interpret</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> right<span class="token punctuation">.</span><span class="token function">interpret</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MinusNode</span> extend SymbolNode<span class="token punctuation">{</span>â€¦â€¦<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MulNode</span> extend SymbolNode<span class="token punctuation">{</span>â€¦â€¦<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DivNode</span> extend SymbolNode<span class="token punctuation">{</span>â€¦â€¦<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>Parser</strong>:</p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Parser</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> String SPLITTER <span class="token operator">=</span> <span class="token string">" "</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//ä¸ºäº†æ–¹ä¾¿è§£æï¼Œç”¨ç©ºæ ¼å°†è¡¨è¾¾å¼åˆ†éš”å¼€</span>
    <span class="token keyword">public</span> Node <span class="token function">parse</span><span class="token punctuation">(</span>String statement<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        String<span class="token punctuation">[</span><span class="token punctuation">]</span> arr <span class="token operator">=</span> statement<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span>SPLITTER<span class="token punctuation">)</span><span class="token punctuation">;</span>
        LinkedList<span class="token operator">&lt;</span>Node<span class="token operator">></span> nodeStack <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">boolean</span> symbolFlag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        String symbol <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span>String item <span class="token operator">:</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isSymbolNode</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                symbol <span class="token operator">=</span> item<span class="token punctuation">;</span>
                symbolFlag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isValueNode</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                nodeStack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SimpleValueNode</span><span class="token punctuation">(</span>Integer<span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>symbolFlag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    Node right <span class="token operator">=</span> nodeStack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//åå…¥å…ˆå‡º</span>
                    Node left <span class="token operator">=</span> nodeStack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    nodeStack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">mapSymbolNode</span><span class="token punctuation">(</span>left<span class="token punctuation">,</span> right<span class="token punctuation">,</span> symbol<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    symbolFlag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>                    
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"è¡¨è¾¾å¼æ ¼å¼æœ‰è¯¯"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> nodeStack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    â€¦â€¦
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>Calculator</strong>: </p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SimpleCalculator</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">calculate</span><span class="token punctuation">(</span>String statement<span class="token punctuation">)</span><span class="token punctuation">{</span>
        Parser parser <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Parser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> parser<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>statement<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">interpret</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h5 id="Parserè§£æè¿‡ç¨‹"><a href="#Parserè§£æè¿‡ç¨‹" class="headerlink" title="Parserè§£æè¿‡ç¨‹"></a>Parserè§£æè¿‡ç¨‹</h5><ol>
<li>å°†è¡¨è¾¾å¼åˆ†å‰²ä¸ºæ•°ç»„ï¼Œå¹¶éå†</li>
<li>ä»æ•°ç»„ä¸­è·å–ä¸€ä¸ªå…ƒç´ ï¼Œè‹¥ä¸ºæ•°å€¼ï¼Œåˆ™ç›´æ¥è½¬æ¢ä¸ºèŠ‚ç‚¹å¹¶å…¥æ ˆï¼›è‹¥ä¸ºè¿ç®—ç¬¦ï¼Œåˆ™åªè¿›è¡Œæ ‡è®°ï¼Œç­‰å¾…ä¸‹ä¸€ä¸ªèŠ‚ç‚¹å…¥æ ˆåï¼Œå°†å…¶ä¸ä¸Šä¸€ä¸ªèŠ‚ç‚¹ä¸€åŒå–å‡ºï¼Œå¹¶åˆå¹¶ä¸ºä¸€ä¸ªå¤åˆè¡¨è¾¾å¼èŠ‚ç‚¹å…¥æ ˆï¼›</li>
<li>åå¤æ‰§è¡Œæ­¥éª¤2ï¼Œç›´åˆ°æ•°ç»„æœ«å°¾</li>
<li>å°†æ ˆä¸­çš„å…ƒç´ popå¹¶è¿”å›ï¼ˆå¦‚æœè¡¨è¾¾å¼æ— è¯¯ï¼Œæœ€ç»ˆæ ˆä¸­åº”è¯¥åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œå¦åˆ™åº”è¯¥åœ¨è§£æè¿‡ç¨‹ä¸­æŠ›å‡ºå¼‚å¸¸ï¼‰</li>
</ol>
<h3 id="å®Œæ•´å››åˆ™è¿ç®—"><a href="#å®Œæ•´å››åˆ™è¿ç®—" class="headerlink" title="å®Œæ•´å››åˆ™è¿ç®—"></a>å®Œæ•´å››åˆ™è¿ç®—</h3><h4 id="å•å…ƒæµ‹è¯•ç±»-1"><a href="#å•å…ƒæµ‹è¯•ç±»-1" class="headerlink" title="å•å…ƒæµ‹è¯•ç±»"></a>å•å…ƒæµ‹è¯•ç±»</h4><pre class="line-numbers language-java"><code class="language-java">cn<span class="token punctuation">.</span>tac<span class="token punctuation">.</span>test<span class="token punctuation">.</span>interpreter<span class="token punctuation">.</span>arithmetic<span class="token punctuation">.</span>full<span class="token punctuation">.</span>FullCalculatorTest
cn<span class="token punctuation">.</span>tac<span class="token punctuation">.</span>test<span class="token punctuation">.</span>interpreter<span class="token punctuation">.</span>arithmetic<span class="token punctuation">.</span>full<span class="token punctuation">.</span>ParserTest
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h4 id="å®ç°æ•ˆæœ-1"><a href="#å®ç°æ•ˆæœ-1" class="headerlink" title="å®ç°æ•ˆæœ"></a>å®ç°æ•ˆæœ</h4><p>æ”¯æŒå®Œæ•´çš„å››åˆ™è¿ç®—ï¼ŒåŒ…æ‹¬æ‹¬å¼§è¿ç®—ï¼Œä¼˜å…ˆçº§è¿ç®—ã€‚ç”±äºç›¸è¾ƒäºä¸Šä¸€ä¸ªå®è·µæ–‡æ³•ä¸Šå¤æ‚äº†è®¸å¤šï¼Œä¸èƒ½ç”¨åŒæ ·çš„æ–¹å¼ç›´æ¥è§£æï¼Œè€Œæ˜¯åº”è¯¥å…ˆè½¬æ¢ä¸º<code>åç¼€è¡¨è¾¾å¼</code>å†è¿›è¡Œè§£æã€‚</p>
<h4 id="åç¼€è¡¨è¾¾å¼"><a href="#åç¼€è¡¨è¾¾å¼" class="headerlink" title="åç¼€è¡¨è¾¾å¼"></a>åç¼€è¡¨è¾¾å¼</h4><p>// todo::</p>
<h4 id="ç›¸å…³ç±»-1"><a href="#ç›¸å…³ç±»-1" class="headerlink" title="ç›¸å…³ç±»"></a>ç›¸å…³ç±»</h4><p><strong>èŠ‚ç‚¹</strong><br>å€¼èŠ‚ç‚¹å’Œè¿ç®—ç¬¦èŠ‚ç‚¹ç±»ä»é‡‡ç”¨å’Œä¸Šä¸ªå®è·µç›¸åŒçš„ç±»ã€‚</p>
<p><strong>Parser</strong></p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Parser</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> String SPLITTER <span class="token operator">=</span> <span class="token string">" "</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> Node <span class="token function">parse</span><span class="token punctuation">(</span>String statement<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        LinkedList<span class="token operator">&lt;</span>Node<span class="token operator">></span> stack <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        String<span class="token punctuation">[</span><span class="token punctuation">]</span> segments <span class="token operator">=</span> <span class="token function">convert2Postfix</span><span class="token punctuation">(</span>statement<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span>SPLITTER<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span>String segment <span class="token operator">:</span> segments<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isValueNode</span><span class="token punctuation">(</span>segment<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SimpleValueNode</span><span class="token punctuation">(</span>Integer<span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>segment<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isOperator</span><span class="token punctuation">(</span>segment<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                Node rightNode <span class="token operator">=</span> stack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                Node leftNode <span class="token operator">=</span> stack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">doOperate</span><span class="token punctuation">(</span>leftNode<span class="token punctuation">,</span> rightNode<span class="token punctuation">,</span> segment<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> stack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> String <span class="token function">convert2Postfix</span><span class="token punctuation">(</span>String statement<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        LinkedList<span class="token operator">&lt;</span>String<span class="token operator">></span> symbolStack <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//ä¸´æ—¶å­˜æ”¾ç¬¦å·èŠ‚ç‚¹çš„æ ˆ</span>
        LinkedList<span class="token operator">&lt;</span>String<span class="token operator">></span> stack <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        String<span class="token punctuation">[</span><span class="token punctuation">]</span> nodes <span class="token operator">=</span> statement<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span>SPLITTER<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span>String node <span class="token operator">:</span> nodes<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isSymbolNode</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>symbolStack<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> <span class="token string">"("</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    symbolStack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isOperator</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    String topSymbol <span class="token operator">=</span> symbolStack<span class="token punctuation">.</span><span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">priority</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token function">priority</span><span class="token punctuation">(</span>topSymbol<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token keyword">while</span> <span class="token punctuation">(</span>symbolStack<span class="token punctuation">.</span><span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">priority</span><span class="token punctuation">(</span>symbolStack<span class="token punctuation">.</span><span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token function">priority</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                <span class="token keyword">break</span><span class="token punctuation">;</span>
                            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                                stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>symbolStack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                            <span class="token punctuation">}</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span>
                    symbolStack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">")"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token string">"("</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>symbolStack<span class="token punctuation">.</span><span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>symbolStack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                    symbolStack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"ä¸æ”¯æŒçš„è¿ç®—ç¬¦"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isValueNode</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"ä¸æ”¯æŒçš„è¿ç®—ç¬¦"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token comment" spellcheck="true">//åˆ°æ•°ç»„å°¾éƒ¨åï¼Œè¿˜æœ‰ä¸€äº›ç¬¦å·åœ¨æ ˆå†…</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>symbolStack<span class="token punctuation">.</span><span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>symbolStack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        StringBuilder sb <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        String tmp<span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token function">isNull</span><span class="token punctuation">(</span>tmp <span class="token operator">=</span> stack<span class="token punctuation">.</span><span class="token function">pollLast</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>tmp<span class="token punctuation">)</span><span class="token punctuation">;</span>
            sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>SPLITTER<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> sb<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    â€¦â€¦
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>Calculator</strong></p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FullCalculator</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">calculate</span><span class="token punctuation">(</span>String statement<span class="token punctuation">)</span><span class="token punctuation">{</span>
        Parser parser <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Parser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> parser<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>statement<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">interpret</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h5 id="Parserè§£æè¿‡ç¨‹-1"><a href="#Parserè§£æè¿‡ç¨‹-1" class="headerlink" title="Parserè§£æè¿‡ç¨‹"></a>Parserè§£æè¿‡ç¨‹</h5><p>ä¸»è¦åˆ†ä¸ºä¸¤å¤§æ­¥éª¤<br><strong>ä¸€ã€å°†ä¸­ç¼€è¡¨è¾¾å¼è½¬æ¢ä¸ºåç¼€è¡¨è¾¾å¼</strong></p>
<ol>
<li>å°†è¡¨è¾¾å¼åˆ†å‰²ä¸ºæ•°ç»„ï¼Œå¹¶éå†</li>
<li>ä»æ•°ç»„ä¸­è·å–ä¸€ä¸ªå…ƒç´ <ul>
<li>è‹¥ä¸ºæ•°å€¼ï¼Œåˆ™ç›´æ¥å…¥å­˜æ”¾ç»“æœçš„æ ˆï¼Œä»¥ä¸‹ç®€ç§°<code>ç»“æœæ ˆ</code></li>
<li>è‹¥ä¸ºç¬¦å·ï¼Œåˆ™åˆ¤æ–­<ul>
<li>è‹¥ç¬¦å·æ ˆç›®å‰ä¸ºç©ºï¼Œæˆ–è¯¥ç¬¦å·ä¸ºå·¦æ‹¬å¼§â€(â€œï¼Œåˆ™ç›´æ¥å…¥ä¸´æ—¶å­˜æ”¾ç¬¦å·çš„æ ˆï¼Œä»¥ä¸‹ç®€ç§°<code>ç¬¦å·æ ˆ</code></li>
<li>è‹¥å½“å‰ç¬¦å·ä¸ºæ“ä½œç¬¦ï¼ˆ+-*/ï¼Œä¸åŒ…æ‹¬æ‹¬å¼§ï¼‰ï¼Œåˆ™ä»ç¬¦å·æ ˆpeekï¼ˆ<em>ä¸æ˜¯pop</em>ï¼‰ä¸€ä¸ªç¬¦å·ï¼Œæ¯”å¦‚ä¸¤è€…ä¼˜å…ˆçº§ï¼Œè‹¥ å½“å‰ç¬¦å·ä¼˜å…ˆçº§&lt;=ä»æ ˆé¡¶å–å‡ºçš„ç¬¦å·ä¼˜å…ˆçº§ï¼Œåˆ™ä»ç¬¦å·æ ˆpopä¸€ä¸ªç¬¦å·å¹¶pushè‡³ç»“æœæ ˆï¼Œç›´è‡³ ç¬¦å·æ ˆä¸ºç©º or æ ˆé¡¶ç¬¦å·ä¼˜å…ˆçº§&lt;=å½“å‰ç¬¦å·ä¼˜å…ˆçº§ï¼Œç„¶åå°†å½“å‰ç¬¦å·å…¥ç¬¦å·æ ˆã€‚<em>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå·¦å³æ‹¬å¼§ä¹Ÿæœ‰ä¼˜å…ˆçº§ï¼Œä¸”ä¼˜å…ˆçº§åº”å°äºæ“ä½œç¬¦ï¼Œå¦åˆ™åœ¨è¿™é‡Œéœ€è¦å•ç‹¬å¤„ç†popæ—¶é‡åˆ°å·¦æ‹¬å¼§çš„é—®é¢˜</em></li>
<li>è‹¥ä¸ºå³æ‹¬å¼§â€)â€ï¼Œåˆ™å°†ç¬¦å·æ ˆpopç¬¦å·å¹¶pushè‡³ç»“æœæ ˆï¼Œç›´åˆ°é‡åˆ°å·¦æ‹¬å¼§ï¼ˆé‡åˆ°åpopå¹¶ä¸¢å¼ƒï¼‰</li>
</ul>
</li>
</ul>
</li>
<li>åå¤æ‰§è¡Œæ­¥éª¤2ï¼Œç›´åˆ°æ•°ç»„æœ«å°¾</li>
<li>åˆ°æ•°ç»„å°¾éƒ¨åï¼Œå¤šæ•°æƒ…å†µéƒ½ä¼šæœ‰ä¸€äº›ç¬¦å·è¿˜ç•™åœ¨ç¬¦å·æ ˆå†…ï¼Œåº”å°†å…¶å–å‡ºå¹¶pushè‡³ç»“æœæ ˆ</li>
<li>å°†ç»“æœæ ˆæ„å»ºä¸ºå­—ç¬¦ä¸²ï¼Œå¹¶è¿”å›</li>
</ol>
<p><strong>äºŒã€å°†åç¼€è§£æä¸ºjavaå¯¹è±¡</strong></p>
<ol>
<li>å°†è¡¨è¾¾å¼åˆ†å‰²ä¸ºæ•°ç»„ï¼Œå¹¶éå†</li>
<li>ä»æ•°ç»„ä¸­è·å–ä¸€ä¸ªå…ƒç´ ï¼Œè‹¥ä¸ºæ•°å€¼ï¼Œåˆ™ç›´æ¥è½¬æ¢æˆæ•°å€¼èŠ‚ç‚¹å¹¶å…¥æ ˆï¼›è‹¥ä¸ºæ“ä½œç¬¦ï¼ˆè½¬æ¢æˆåç¼€è¡¨è¾¾å¼åå·²ç»æ²¡æœ‰æ‹¬å¼§äº†ï¼‰ï¼Œåˆ™ä»æ ˆé¡¶å–å‡ºä¸¤ä¸ªèŠ‚ç‚¹ï¼Œå¹¶åˆå¹¶ä¸ºä¸€ä¸ªå¤åˆè¡¨è¾¾å¼èŠ‚ç‚¹å¹¶å…¥æ ˆ</li>
<li>åå¤æ‰§è¡Œæ­¥éª¤2ï¼Œç›´åˆ°æ•°ç»„æœ«å°¾</li>
<li>å°†æ ˆä¸­çš„å…ƒç´ popå¹¶è¿”å›ï¼ˆå¦‚æœè¡¨è¾¾å¼æ— è¯¯ï¼Œæœ€ç»ˆæ ˆä¸­åº”è¯¥åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œå¦åˆ™åº”è¯¥åœ¨è§£æè¿‡ç¨‹ä¸­æŠ›å‡ºå¼‚å¸¸ï¼‰</li>
</ol>
<p>å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥å°†è¿™ä¸¤ä¸ªæ­¥éª¤åˆäºŒä¸ºä¸€ï¼Œåœ¨è½¬æ¢çš„åŒæ—¶å°†å…¶è½¬æ¢ä¸ºjavaå¯¹è±¡ï¼Œä½†éå®é™…åº”ç”¨ä¸­ä¸ªäººè¿˜æ˜¯å»ºè®®å°†ä¸¤ä¸ªæ­¥éª¤åˆ†ç¦»ï¼ŒåŸå› æœ‰äºŒï¼š</p>
<ul>
<li>é™ä½ç¼–ç çš„å¤æ‚åº¦</li>
<li>æ–¹ä¾¿è¿›è¡Œå•å…ƒæµ‹è¯•ï¼ˆå°¤å…¶æ˜¯å°†åç¼€è¡¨è¾¾å¼è½¬æ¢ä¸ºä¸­ç¼€è¡¨è¾¾å¼çš„æ­¥éª¤ï¼Œæ¯”è¾ƒå®¹æ˜“å‡ºé”™ï¼‰</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://taccisum.github.io/about_java.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="taccisum">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/Avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="taccisum ğŸ˜‰">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/about_java.html" itemprop="url">å…³äºjava</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-09-25T16:25:28+08:00">
                2017-09-25
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/jvm/" itemprop="url" rel="index">
                    <span itemprop="name">jvm</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="javaä½“ç³»"><a href="#javaä½“ç³»" class="headerlink" title="javaä½“ç³»"></a>javaä½“ç³»</h2><blockquote>
<p>javaä¸ä»…ä»…æ˜¯ä¸€é—¨ç¼–ç¨‹è¯­è¨€ï¼Œè¿˜æ˜¯ç”±ä¸€ç³»åˆ—è®¡ç®—æœºè½¯ä»¶å’Œè§„èŒƒå½¢æˆçš„æŠ€æœ¯ä½“ç³»ã€‚<br>è¿™ä¸ªä½“ç³»æä¾›äº†å®Œæ•´çš„ç”¨äºè½¯ä»¶å¼€å‘å’Œè·¨å¹³å°éƒ¨ç½²çš„æ”¯æŒç¯å¢ƒã€‚</p>
</blockquote>
<p><strong>Sunå®˜æ–¹å®šä¹‰çš„javaæŠ€æœ¯ä½“ç³»åŒ…æ‹¬ä»¥ä¸‹å†…å®¹</strong>ï¼š  </p>
<ol>
<li>javaç¨‹åºè®¾è®¡è¯­è¨€</li>
<li>å„ç¡¬ä»¶å¹³å°ä¸Šçš„javaè™šæ‹Ÿæœºï¼ˆjvmï¼‰</li>
<li>Classæ–‡ä»¶æ ¼å¼</li>
<li>java apiç±»åº“</li>
<li>æ¥è‡ªå•†ä¸šæœºæ„å’Œå¼€æºç¤¾åŒºçš„ç¬¬ä¸‰æ–¹ç±»åº“</li>
</ol>
<p>ä»¥ä¸Š1ã€2ã€4ç‚¹ç»Ÿç§°ä¸ºjdkï¼Œjdkæ˜¯æ”¯æŒjavaç¨‹åºå¼€å‘çš„æœ€å°ç¯å¢ƒ.<br>java apiä¸­çš„java se apiå­é›†å’Œjavaè™šæ‹Ÿæœºç»Ÿç§°ä¸ºjreï¼Œjreæ˜¯javaç¨‹åºè¿è¡Œçš„æœ€å°ç¯å¢ƒ.</p>
<p>javaé™¤äº†ä¸€é—¨ä¼˜ç§€çš„ç¼–ç¨‹è¯­è¨€å¤–ï¼Œè¿˜æœ‰è®¸å¤šä¸å¯å¿½è§†çš„ä¼˜ç‚¹ï¼š</p>
<ul>
<li>æ‘†è„±ç¡¬ä»¶å¹³å°æŸç¼šï¼Œå®ç°è·¨å¹³å°</li>
<li>å†…å­˜ç®¡ç†ï¼Œé¿å…ç»å¤§éƒ¨åˆ†å†…å­˜æ³„éœ²å’ŒæŒ‡é’ˆè¶Šç•Œé—®é¢˜</li>
<li>çƒ­ç‚¹ä»£ç æ£€æµ‹å’Œè¿è¡Œæ—¶ç¼–è¯‘åŠä¼˜åŒ–</li>
<li>å®Œå–„çš„åº”ç”¨ç¨‹åºç¼–ç¨‹æ¥å£åŠä¸°å¯Œã€ä¼˜ç§€çš„ç¬¬ä¸‰æ–¹ç±»åº“</li>
</ul>
<p>javaæŠ€æœ¯ä½“ç³»æŒ‰ç…§æ‰€æœåŠ¡çš„é¢†åŸŸæ¥åˆ’åˆ†ï¼Œå¯ä»¥åˆ†ä¸ºå››å¤§æ¨¡å—ï¼š<code>java card</code> <code>java se</code> <code>java me</code> <code>java ee</code></p>
<h2 id="jdkå‘å±•å²"><a href="#jdkå‘å±•å²" class="headerlink" title="jdkå‘å±•å²"></a>jdkå‘å±•å²</h2><p>javaè¯­è¨€å‰èº«ï¼šoak</p>
<ul>
<li>1995å¹´ï¼Œoakæ›´åä¸ºjavaï¼ŒåŒæ—¶sunæ­£å¼æå‡ºâ€write once, run anywhereâ€çš„å£å·ï¼Œæ ‡è¯†ç€javaæ­£å¼è¯ç”Ÿ</li>
<li>1996å¹´ï¼Œjdk1.0å‘å¸ƒï¼Œå¹¶æä¾›äº†ä¸€ä¸ªçº¯è§£é‡Šæ€§çš„javaè™šæ‹Ÿæœºï¼ˆSun Classic VMï¼‰</li>
<li>1997å¹´ï¼Œjdk1.lå‘å¸ƒï¼Œä»£è¡¨æŠ€æœ¯æœ‰ï¼šjdbc, rmi, java beans, .jaræ–‡ä»¶ç­‰</li>
<li>1998å¹´ï¼Œjdk1.2å‘å¸ƒï¼Œæ­£å¼æŠŠjavaæŠ€æœ¯ä½“ç³»åˆ’åˆ†ä¸º3ä¸ªæ–¹å‘ï¼šjava se, java me, java eeï¼Œä»£è¡¨æŠ€æœ¯è¾ƒå¤šï¼Œå¦‚ejb, java pluin-in, swingç­‰ã€‚javaè™šæ‹Ÿæœºä¸­ç¬¬ä¸€æ¬¡å†…ç½®äº†jitç¼–è¯‘å™¨ï¼Œä¸”é™„å¸¦äº†HotSpotä½œä¸ºå¤‡é€‰</li>
<li>2000å¹´ï¼Œjdk1.3å‘å¸ƒï¼Œå°†HotSpotä½œä¸ºé»˜è®¤è™šæ‹Ÿæœºï¼Œå¹¶æä¾›jndiä½œä¸ºå¹³å°çº§æœåŠ¡ï¼Œä»æ­¤åSunå…¬å¸åŸºæœ¬ä¿æŒä¸¤å¹´ä¸€ä¸ªä¸»ç‰ˆæœ¬çš„æ›´æ–°é€Ÿåº¦</li>
<li>2002å¹´ï¼Œjdk1.4å‘å¸ƒï¼Œæ ‡å¿—ç€javaæ­£å¼èµ°å‘æˆç†Ÿï¼Œä»£è¡¨æŠ€æœ¯æœ‰ï¼šæ­£åˆ™è¡¨è¾¾å¼ã€å¼‚å¸¸é“¾ã€nioã€æ—¥å¿—ç±»ã€xmlè§£æå™¨ç­‰ç­‰</li>
<li>2004å¹´ï¼Œjdk1.5(jdk5)å‘å¸ƒï¼Œä¸»è¦æ˜¯å¯¹javaè¯­è¨€çš„æ˜“ç”¨æ€§æ–¹é¢åšäº†æ”¹è¿›</li>
<li>2006å¹´ï¼Œjdk1.6(jdk6)å‘å¸ƒï¼Œé™¤äº†æ”¹è¿›ä¹‹å¤–ï¼ŒSunæ­£å¼å°†javaå¼€æºï¼ˆGPLåè®®ï¼‰ï¼Œå¹¶å»ºç«‹äº†OpenJDKç»„ç»‡å¯¹å…¶è¿›è¡Œç®¡ç†<br>jdk1.7(jdk7)å¼€å‘ï¼ŒSunå…¬å¸ç”±äºå„ç§åŸå› ï¼Œæœ€ç»ˆæ— æ³•æŒ‰è®¡åˆ’å®Œæˆã€‚2009å¹´Oracleå…¬å¸å°†å…¶æ”¶è´­åï¼Œå¯¹jdk1.7çš„å†…å®¹è¿›è¡Œå¤§å¹…åº¦è£å‰ªï¼Œå¹¶æŠŠå‰©ä½™å†…å®¹å»¶è¿Ÿåˆ°jdk1.8ä¸­ã€‚jdk1.7äº2011å¹´æ­£å¼å‘å¸ƒ</li>
<li>2013å¹´ï¼Œjdk1.8(jdk8)å‘å¸ƒï¼ŒåŠ å…¥äº†lambdaè¡¨è¾¾å¼åŠå‡½æ•°å¼æ¥å£ç­‰æ”¯æŒ</li>
</ul>
<h2 id="éƒ¨åˆ†jvmä»‹ç»"><a href="#éƒ¨åˆ†jvmä»‹ç»" class="headerlink" title="éƒ¨åˆ†jvmä»‹ç»"></a>éƒ¨åˆ†jvmä»‹ç»</h2><ul>
<li><p>Sun Classic VMr</p>
<ul>
<li>Classic VMæ˜¯Sunå…¬å¸å‘å¸ƒçš„ç¬¬ä¸€æ¬¾å•†ç”¨javaè™šæ‹Ÿæœºï¼Œä½œä¸ºé»˜è®¤è™šæ‹Ÿæœºä¸jdk1.0ç»‘å®šå‘å¸ƒï¼ŒæŠ€æœ¯è¾ƒä¸ºåŸå§‹</li>
<li>åœ¨jdk1.2ä¹‹å‰éƒ½æ˜¯å”¯ä¸€å­˜åœ¨çš„è™šæ‹Ÿæœº</li>
<li>åªèƒ½ä½¿ç”¨çº¯è§£é‡Šå™¨æ–¹å¼æ¥è¿è¡Œjavaç¨‹åº</li>
<li>å¦‚æœè¦ä½¿ç”¨JITç¼–è¯‘å™¨ï¼Œå¿…é¡»å¤–æŒ‚</li>
</ul>
</li>
<li><p>Exact VM</p>
<ul>
<li>ä¸ºäº†è§£å†³Classic VMå­˜åœ¨çš„å„ç§é—®é¢˜è€Œå¼€å‘ï¼Œåœ¨jdk1.2æœŸé—´å‘å¸ƒ</li>
<li>å…·å¤‡äº†ç°ä»£é«˜æ€§èƒ½è™šæ‹Ÿæœºçš„åŸå‹</li>
<li>åœ¨å•†ç”¨åªå­˜åœ¨äº†çŸ­æš‚çš„æ—¶é—´åï¼Œå³è¢«æ›´ä¸ºä¼˜ç§€çš„HotSpotå–ä»£</li>
</ul>
</li>
<li><p>Sun HotSpot VM</p>
<ul>
<li>æ˜¯SunJDKåŠOpenJDKä¸­æ‰€å¸¦çš„è™šæ‹Ÿæœºï¼Œä¹Ÿæ˜¯ç›®å‰ä½¿ç”¨æœ€å¹¿çš„è™šæ‹Ÿæœº</li>
<li>æœ€åˆæ˜¯ç”±ä¸€å®¶åä¸ºâ€Longview Teconologiesâ€çš„å°å…¬å¸è®¾è®¡ï¼Œåœ¨1997å¹´è¯¥å…¬å¸è¢«Sunæ”¶è´­</li>
<li>å…¶å³æœ‰Sunä¹‹å‰ä¸¤æ¬¾è™šæ‹Ÿæœºçš„ä¼˜ç‚¹ï¼Œä¹Ÿæœ‰è®¸å¤šè‡ªèº«çš„æŠ€æœ¯ä¼˜åŠ¿å¦‚çƒ­ç‚¹ä»£ç æ¢æµ‹èƒ½åŠ›</li>
</ul>
</li>
<li><p>Sun Mobile-Embedded VM/Meta-Circular VM</p>
<ul>
<li>Sunå…¬å¸é’ˆå¯¹ç§»åŠ¨å’ŒåµŒå…¥å¼å¸‚åœºçš„è™šæ‹Ÿæœº</li>
</ul>
</li>
<li><p>BEA JRockit</p>
<ul>
<li>ä¸€æ¬¾ä¸“é—¨ä¸ºæœåŠ¡ç«¯ç¡¬ä»¶å’ŒæœåŠ¡ç«¯åº”ç”¨åœºæ™¯è€Œä¸“é—¨ä¼˜åŒ–çš„è™šæ‹Ÿæœº</li>
<li>ä¸å…³æ³¨åº”ç”¨ç¨‹åºçš„å¯åŠ¨é€Ÿåº¦ï¼Œå› è€Œå…¶å†…éƒ¨ä¸å«è§£æå™¨çš„å®ç°ï¼Œå…¨éƒ¨ä»£ç é JITç¼–è¯‘è¿è¡Œ</li>
<li>é™¤æ­¤ä¹‹å¤–ï¼Œå…¶åƒåœ¾æ”¶é›†å™¨å’ŒMissionControlç­‰æœåŠ¡å¥—ä»¶çš„å®ç°ä¹Ÿä¸€ç›´åœ¨ä¼—å¤šè™šæ‹Ÿæœºä¸­ä¿æŒé¢†å…ˆçš„æ°´å¹³</li>
</ul>
</li>
<li><p>IBM J9 VM</p>
</li>
<li>Azul VM/BEA Liquid VM</li>
<li>Apache Harmony/Google Android Dalvik VM</li>
<li>Microsoft JVM</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/Avatar.jpg"
               alt="taccisum" />
          <p class="site-author-name" itemprop="name">taccisum</p>
           
              <p class="site-description motion-element" itemprop="description">el psy congroo.</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">29</span>
                <span class="site-state-item-name">posts</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">23</span>
                <span class="site-state-item-name">categories</span>
              </a>
            </div>
          

          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/taccisum" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                    
                      GitHub
                    
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://gitee.com/taccisum/projects" target="_blank" title="Gitee">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                    
                      Gitee
                    
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">taccisum</span>
</div>

<div>
  <span class="post-count">28.0k words</span>
</div>
        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  

  
    <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  






  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  

  

  

</body>
</html>
